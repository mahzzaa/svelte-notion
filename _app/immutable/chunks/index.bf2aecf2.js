var Ke=Object.defineProperty;var Je=(L,t,l)=>t in L?Ke(L,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):L[t]=l;var Ot=(L,t,l)=>(Je(L,typeof t!="symbol"?t+"":t,l),l),re=(L,t,l)=>{if(!t.has(L))throw TypeError("Cannot "+l)};var C=(L,t,l)=>(re(L,t,"read from private field"),l?l.call(L):t.get(L)),lt=(L,t,l)=>{if(t.has(L))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(L):t.set(L,l)},vt=(L,t,l,n)=>(re(L,t,"write to private field"),n?n.call(L,l):t.set(L,l),l),ae=(L,t,l,n)=>({set _(g){vt(L,t,g,l)},get _(){return C(L,t,n)}}),ut=(L,t,l)=>(re(L,t,"access private method"),l);import{S as SvelteComponent,i as init,s as safe_not_equal,C as create_slot,k as element,a as space,l as claim_element,m as children,h as detach,c as claim_space,n as attr,b as insert_hydration,G as append_hydration,_ as listen,D as update_slot_base,E as get_all_dirty_from_scope,F as get_slot_changes,g as transition_in,v as group_outros,d as transition_out,f as check_outros,a0 as run_all,a1 as null_to_empty,a2 as add_render_callback,a3 as create_in_transition,a4 as create_out_transition,a5 as bubble,W as svg_element,X as claim_svg_element,a6 as onDestroy,a7 as globals,t as tick,w as binding_callbacks,H as noop,q as text,r as claim_text,u as set_data,a8 as set_input_value,y as create_component,z as claim_component,A as mount_component,B as destroy_component}from"./index.43fe54b0.js";import{g as getAugmentedNamespace,c as commonjsGlobal}from"./Render.05b9ff83.js";function commonjsRequire(L){throw new Error('Could not dynamically require "'+L+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdfExports={},pdf={get exports(){return pdfExports},set exports(L){pdfExports=L}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(t,l){module.exports=l()})(globalThis,()=>(()=>{var __webpack_modules__=[,(L,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.UNSUPPORTED_FEATURES=t.TextRenderingMode=t.RenderingIntentFlag=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=N,t.bytesToString=Z,t.createPromiseCapability=Et,t.createValidAbsoluteUrl=o,t.getModificationDate=wt,t.getVerbosityLevel=z,t.info=X,t.isArrayBuffer=bt,t.isArrayEqual=St,t.objectFromMap=j,t.objectSize=x,t.setVerbosityLevel=K,t.shadow=E,t.string32=_,t.stringToBytes=d,t.stringToPDFString=_t,t.stringToUTF8String=it,t.unreachable=ct,t.utf8StringToString=mt,t.warn=at;const l=[1,0,0,1,0,0];t.IDENTITY_MATRIX=l;const n=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=n;const g=1.35;t.LINE_FACTOR=g;const T=.35;t.LINE_DESCENT_FACTOR=T;const P=T/g;t.BASELINE_FACTOR=P;const D={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=D;const w={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=w;const h="pdfjs_internal_editor_";t.AnnotationEditorPrefix=h;const v={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};t.AnnotationEditorType=v;const I={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};t.AnnotationEditorParamsType=I;const y={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=y;const A={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=A;const m={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=m;const f={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=f;const r={MARKED:"Marked",REVIEW:"Review"};t.AnnotationStateModelType=r;const c={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationMarkedState=c;const p={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReviewState=p;const i={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=i;const a={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=a;const e={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=e;const s={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=s;const b={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=b;const k={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=k;const M={O:"PageOpen",C:"PageClose"};t.PageActionEventType=M;const q={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=q;const S={NONE:0,BINARY:1};t.CMapCompressionType=S;const G={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=G;const ht={forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};t.UNSUPPORTED_FEATURES=ht;const nt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=nt;let rt=q.WARNINGS;function K(U){Number.isInteger(U)&&(rt=U)}function z(){return rt}function X(U){rt>=q.INFOS&&console.log(`Info: ${U}`)}function at(U){rt>=q.WARNINGS&&console.log(`Warning: ${U}`)}function ct(U){throw new Error(U)}function N(U,H){U||ct(H)}function u(U){if(!U)return!1;switch(U.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function o(U,H=null,V=null){if(!U)return null;try{if(V&&typeof U=="string"){if(V.addDefaultProtocol&&U.startsWith("www.")){const Ct=U.match(/\./g);Ct&&Ct.length>=2&&(U=`http://${U}`)}if(V.tryConvertEncoding)try{U=it(U)}catch{}}const gt=H?new URL(U,H):new URL(U);if(u(gt))return gt}catch{}return null}function E(U,H,V,gt=!1){return Object.defineProperty(U,H,{value:V,enumerable:!gt,configurable:!0,writable:!1}),V}const R=function(){function H(V,gt){this.constructor===H&&ct("Cannot initialize BaseException."),this.message=V,this.name=gt}return H.prototype=new Error,H.constructor=H,H}();t.BaseException=R;class O extends R{constructor(H,V){super(H,"PasswordException"),this.code=V}}t.PasswordException=O;class B extends R{constructor(H,V){super(H,"UnknownErrorException"),this.details=V}}t.UnknownErrorException=B;class W extends R{constructor(H){super(H,"InvalidPDFException")}}t.InvalidPDFException=W;class Y extends R{constructor(H){super(H,"MissingPDFException")}}t.MissingPDFException=Y;class Q extends R{constructor(H,V){super(H,"UnexpectedResponseException"),this.status=V}}t.UnexpectedResponseException=Q;class J extends R{constructor(H){super(H,"FormatError")}}t.FormatError=J;class st extends R{constructor(H){super(H,"AbortException")}}t.AbortException=st;function Z(U){(typeof U!="object"||U===null||U.length===void 0)&&ct("Invalid argument for bytesToString");const H=U.length,V=8192;if(H<V)return String.fromCharCode.apply(null,U);const gt=[];for(let Ct=0;Ct<H;Ct+=V){const Mt=Math.min(Ct+V,H),tt=U.subarray(Ct,Mt);gt.push(String.fromCharCode.apply(null,tt))}return gt.join("")}function d(U){typeof U!="string"&&ct("Invalid argument for stringToBytes");const H=U.length,V=new Uint8Array(H);for(let gt=0;gt<H;++gt)V[gt]=U.charCodeAt(gt)&255;return V}function _(U){return String.fromCharCode(U>>24&255,U>>16&255,U>>8&255,U&255)}function x(U){return Object.keys(U).length}function j(U){const H=Object.create(null);for(const[V,gt]of U)H[V]=gt;return H}function F(){const U=new Uint8Array(4);return U[0]=1,new Uint32Array(U.buffer,0,1)[0]===1}function $(){try{return new Function(""),!0}catch{return!1}}class ot{static get isLittleEndian(){return E(this,"isLittleEndian",F())}static get isEvalSupported(){return E(this,"isEvalSupported",$())}static get isOffscreenCanvasSupported(){return E(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?E(this,"platform",{isWin:!1,isMac:!1}):E(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}t.FeatureTest=ot;const dt=[...Array(256).keys()].map(U=>U.toString(16).padStart(2,"0"));class ft{static makeHexColor(H,V,gt){return`#${dt[H]}${dt[V]}${dt[gt]}`}static scaleMinMax(H,V){let gt;H[0]?(H[0]<0&&(gt=V[0],V[0]=V[1],V[1]=gt),V[0]*=H[0],V[1]*=H[0],H[3]<0&&(gt=V[2],V[2]=V[3],V[3]=gt),V[2]*=H[3],V[3]*=H[3]):(gt=V[0],V[0]=V[2],V[2]=gt,gt=V[1],V[1]=V[3],V[3]=gt,H[1]<0&&(gt=V[2],V[2]=V[3],V[3]=gt),V[2]*=H[1],V[3]*=H[1],H[2]<0&&(gt=V[0],V[0]=V[1],V[1]=gt),V[0]*=H[2],V[1]*=H[2]),V[0]+=H[4],V[1]+=H[4],V[2]+=H[5],V[3]+=H[5]}static transform(H,V){return[H[0]*V[0]+H[2]*V[1],H[1]*V[0]+H[3]*V[1],H[0]*V[2]+H[2]*V[3],H[1]*V[2]+H[3]*V[3],H[0]*V[4]+H[2]*V[5]+H[4],H[1]*V[4]+H[3]*V[5]+H[5]]}static applyTransform(H,V){const gt=H[0]*V[0]+H[1]*V[2]+V[4],Ct=H[0]*V[1]+H[1]*V[3]+V[5];return[gt,Ct]}static applyInverseTransform(H,V){const gt=V[0]*V[3]-V[1]*V[2],Ct=(H[0]*V[3]-H[1]*V[2]+V[2]*V[5]-V[4]*V[3])/gt,Mt=(-H[0]*V[1]+H[1]*V[0]+V[4]*V[1]-V[5]*V[0])/gt;return[Ct,Mt]}static getAxialAlignedBoundingBox(H,V){const gt=ft.applyTransform(H,V),Ct=ft.applyTransform(H.slice(2,4),V),Mt=ft.applyTransform([H[0],H[3]],V),tt=ft.applyTransform([H[2],H[1]],V);return[Math.min(gt[0],Ct[0],Mt[0],tt[0]),Math.min(gt[1],Ct[1],Mt[1],tt[1]),Math.max(gt[0],Ct[0],Mt[0],tt[0]),Math.max(gt[1],Ct[1],Mt[1],tt[1])]}static inverseTransform(H){const V=H[0]*H[3]-H[1]*H[2];return[H[3]/V,-H[1]/V,-H[2]/V,H[0]/V,(H[2]*H[5]-H[4]*H[3])/V,(H[4]*H[1]-H[5]*H[0])/V]}static singularValueDecompose2dScale(H){const V=[H[0],H[2],H[1],H[3]],gt=H[0]*V[0]+H[1]*V[2],Ct=H[0]*V[1]+H[1]*V[3],Mt=H[2]*V[0]+H[3]*V[2],tt=H[2]*V[1]+H[3]*V[3],pt=(gt+tt)/2,At=Math.sqrt((gt+tt)**2-4*(gt*tt-Mt*Ct))/2,yt=pt+At||1,Tt=pt-At||1;return[Math.sqrt(yt),Math.sqrt(Tt)]}static normalizeRect(H){const V=H.slice(0);return H[0]>H[2]&&(V[0]=H[2],V[2]=H[0]),H[1]>H[3]&&(V[1]=H[3],V[3]=H[1]),V}static intersect(H,V){const gt=Math.max(Math.min(H[0],H[2]),Math.min(V[0],V[2])),Ct=Math.min(Math.max(H[0],H[2]),Math.max(V[0],V[2]));if(gt>Ct)return null;const Mt=Math.max(Math.min(H[1],H[3]),Math.min(V[1],V[3])),tt=Math.min(Math.max(H[1],H[3]),Math.max(V[1],V[3]));return Mt>tt?null:[gt,Mt,Ct,tt]}static bezierBoundingBox(H,V,gt,Ct,Mt,tt,pt,At){const yt=[],Tt=[[],[]];let Ft,Pt,xt,kt,Rt,jt,It,Lt;for(let Bt=0;Bt<2;++Bt){if(Bt===0?(Pt=6*H-12*gt+6*Mt,Ft=-3*H+9*gt-9*Mt+3*pt,xt=3*gt-3*H):(Pt=6*V-12*Ct+6*tt,Ft=-3*V+9*Ct-9*tt+3*At,xt=3*Ct-3*V),Math.abs(Ft)<1e-12){if(Math.abs(Pt)<1e-12)continue;kt=-xt/Pt,0<kt&&kt<1&&yt.push(kt);continue}It=Pt*Pt-4*xt*Ft,Lt=Math.sqrt(It),!(It<0)&&(Rt=(-Pt+Lt)/(2*Ft),0<Rt&&Rt<1&&yt.push(Rt),jt=(-Pt-Lt)/(2*Ft),0<jt&&jt<1&&yt.push(jt))}let Nt=yt.length,Dt;const Ut=Nt;for(;Nt--;)kt=yt[Nt],Dt=1-kt,Tt[0][Nt]=Dt*Dt*Dt*H+3*Dt*Dt*kt*gt+3*Dt*kt*kt*Mt+kt*kt*kt*pt,Tt[1][Nt]=Dt*Dt*Dt*V+3*Dt*Dt*kt*Ct+3*Dt*kt*kt*tt+kt*kt*kt*At;return Tt[0][Ut]=H,Tt[1][Ut]=V,Tt[0][Ut+1]=pt,Tt[1][Ut+1]=At,Tt[0].length=Tt[1].length=Ut+2,[Math.min(...Tt[0]),Math.min(...Tt[1]),Math.max(...Tt[0]),Math.max(...Tt[1])]}}t.Util=ft;const et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function _t(U){if(U[0]>="ï"){let V;if(U[0]==="þ"&&U[1]==="ÿ"?V="utf-16be":U[0]==="ÿ"&&U[1]==="þ"?V="utf-16le":U[0]==="ï"&&U[1]==="»"&&U[2]==="¿"&&(V="utf-8"),V)try{const gt=new TextDecoder(V,{fatal:!0}),Ct=d(U);return gt.decode(Ct)}catch(gt){at(`stringToPDFString: "${gt}".`)}}const H=[];for(let V=0,gt=U.length;V<gt;V++){const Ct=et[U.charCodeAt(V)];H.push(Ct?String.fromCharCode(Ct):U.charAt(V))}return H.join("")}function it(U){return decodeURIComponent(escape(U))}function mt(U){return unescape(encodeURIComponent(U))}function bt(U){return typeof U=="object"&&U!==null&&U.byteLength!==void 0}function St(U,H){if(U.length!==H.length)return!1;for(let V=0,gt=U.length;V<gt;V++)if(U[V]!==H[V])return!1;return!0}function wt(U=new Date){return[U.getUTCFullYear().toString(),(U.getUTCMonth()+1).toString().padStart(2,"0"),U.getUTCDate().toString().padStart(2,"0"),U.getUTCHours().toString().padStart(2,"0"),U.getUTCMinutes().toString().padStart(2,"0"),U.getUTCSeconds().toString().padStart(2,"0")].join("")}function Et(){const U=Object.create(null);let H=!1;return Object.defineProperty(U,"settled",{get(){return H}}),U.promise=new Promise(function(V,gt){U.resolve=function(Ct){H=!0,V(Ct)},U.reject=function(Ct){H=!0,gt(Ct)}}),U}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var L,t,n,g,T,P,D,w,h,v,oe,y,A,le,f,r;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:p,NodeCMapReaderFactory:i,NodeStandardFontDataFactory:a}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=p,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=i,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=a}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:p}=__w_pdfjs_require__(21);createPDFNetworkStream=i=>new p(i)}else{const{PDFNetworkStream:p}=__w_pdfjs_require__(24),{PDFFetchStream:i}=__w_pdfjs_require__(25);createPDFNetworkStream=a=>(0,_display_utils.isValidFetchUrl)(a.url)?new i(a):new p(a)}function getDocument(p){if(typeof p=="string"||p instanceof URL)p={url:p};else if((0,_util.isArrayBuffer)(p))p={data:p};else if(p instanceof PDFDataRangeTransport)(0,_display_utils.deprecated)("`PDFDataRangeTransport`-instance, please use a parameter object with `range`-property instead."),p={range:p};else if(typeof p!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!p.url&&!p.data&&!p.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const i=new PDFDocumentLoadingTask,a=p.url?getUrlProp(p.url):null,e=p.data?getDataProp(p.data):null,s=p.httpHeaders||null,b=p.withCredentials===!0,k=p.password??null,M=p.range instanceof PDFDataRangeTransport?p.range:null,q=Number.isInteger(p.rangeChunkSize)&&p.rangeChunkSize>0?p.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let S=p.worker instanceof PDFWorker?p.worker:null;const G=p.verbosity,ht=typeof p.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(p.docBaseUrl)?p.docBaseUrl:null,nt=typeof p.cMapUrl=="string"?p.cMapUrl:null,rt=p.cMapPacked!==!1,K=p.CMapReaderFactory||DefaultCMapReaderFactory,z=typeof p.standardFontDataUrl=="string"?p.standardFontDataUrl:null,X=p.StandardFontDataFactory||DefaultStandardFontDataFactory,at=p.stopAtErrors!==!0,ct=Number.isInteger(p.maxImageSize)&&p.maxImageSize>-1?p.maxImageSize:-1,N=p.isEvalSupported!==!1,u=typeof p.isOffscreenCanvasSupported=="boolean"?p.isOffscreenCanvasSupported:!_is_node.isNodeJS,o=typeof p.disableFontFace=="boolean"?p.disableFontFace:_is_node.isNodeJS,E=p.fontExtraProperties===!0,R=p.enableXfa===!0,O=p.ownerDocument||globalThis.document,B=p.disableRange===!0,W=p.disableStream===!0,Y=p.disableAutoFetch===!0,Q=p.pdfBug===!0,J=M?M.length:p.length??NaN,st=typeof p.useSystemFonts=="boolean"?p.useSystemFonts:!_is_node.isNodeJS&&!o,Z=typeof p.useWorkerFetch=="boolean"?p.useWorkerFetch:K===_display_utils.DOMCMapReaderFactory&&X===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(nt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(z,document.baseURI),d=null;(0,_util.setVerbosityLevel)(G);const _=Z?null:{cMapReaderFactory:new K({baseUrl:nt,isCompressed:rt}),standardFontDataFactory:new X({baseUrl:z})};if(!S){const $={verbosity:G,port:_worker_options.GlobalWorkerOptions.workerPort};S=$.port?PDFWorker.fromPort($):new PDFWorker($),i._worker=S}const x=i.docId,j={docId:x,apiVersion:"3.4.120",data:e,password:k,disableAutoFetch:Y,rangeChunkSize:q,length:J,docBaseUrl:ht,enableXfa:R,evaluatorOptions:{maxImageSize:ct,disableFontFace:o,ignoreErrors:at,isEvalSupported:N,isOffscreenCanvasSupported:u,fontExtraProperties:E,useSystemFonts:st,cMapUrl:Z?nt:null,standardFontDataUrl:Z?z:null}},F={ignoreErrors:at,isEvalSupported:N,disableFontFace:o,fontExtraProperties:E,enableXfa:R,ownerDocument:O,disableAutoFetch:Y,pdfBug:Q,styleElement:d};return S.promise.then(function(){if(i.destroyed)throw new Error("Loading aborted");const $=_fetchDocument(S,j),ot=new Promise(function(dt){let ft;M?ft=new _transport_stream.PDFDataTransportStream({length:J,initialData:M.initialData,progressiveDone:M.progressiveDone,contentDispositionFilename:M.contentDispositionFilename,disableRange:B,disableStream:W},M):e||(ft=createPDFNetworkStream({url:a,length:J,httpHeaders:s,withCredentials:b,rangeChunkSize:q,disableRange:B,disableStream:W})),dt(ft)});return Promise.all([$,ot]).then(function([dt,ft]){if(i.destroyed)throw new Error("Loading aborted");const et=new _message_handler.MessageHandler(x,dt,S.port),_t=new WorkerTransport(et,i,ft,F,_);i._transport=_t,et.send("Ready",null)})}).catch(i._capability.reject),i}async function _fetchDocument(p,i){if(p.destroyed)throw new Error("Worker was destroyed");const a=await p.messageHandler.sendWithPromise("GetDocRequest",i,i.data?[i.data.buffer]:null);if(p.destroyed)throw new Error("Worker was destroyed");return a}function getUrlProp(p){if(p instanceof URL)return p.href;try{return new URL(p,window.location).href}catch{if(_is_node.isNodeJS&&typeof p=="string")return p}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(p){if(_is_node.isNodeJS&&typeof Buffer<"u"&&p instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(p);if(p instanceof Uint8Array&&p.byteLength===p.buffer.byteLength)return p;if(typeof p=="string")return(0,_util.stringToBytes)(p);if(typeof p=="object"&&!isNaN(p==null?void 0:p.length)||(0,_util.isArrayBuffer)(p))return new Uint8Array(p);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const l=class{constructor(){lt(this,t,null);this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${ae(l,L)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get onUnsupportedFeature(){return C(this,t)}set onUnsupportedFeature(i){(0,_display_utils.deprecated)("The PDFDocumentLoadingTask onUnsupportedFeature property will be removed in the future."),vt(this,t,i)}get promise(){return this._capability.promise}async destroy(){var i;this.destroyed=!0,await((i=this._transport)==null?void 0:i.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=l;L=new WeakMap,t=new WeakMap,lt(PDFDocumentLoadingTask,L,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(i,a,e=!1,s=null){this.length=i,this.initialData=a,this.progressiveDone=e,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(i){this._rangeListeners.push(i)}addProgressListener(i){this._progressListeners.push(i)}addProgressiveReadListener(i){this._progressiveReadListeners.push(i)}addProgressiveDoneListener(i){this._progressiveDoneListeners.push(i)}onDataRange(i,a){for(const e of this._rangeListeners)e(i,a)}onDataProgress(i,a){this._readyCapability.promise.then(()=>{for(const e of this._progressListeners)e(i,a)})}onDataProgressiveRead(i){this._readyCapability.promise.then(()=>{for(const a of this._progressiveReadListeners)a(i)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const i of this._progressiveDoneListeners)i()})}transportReady(){this._readyCapability.resolve()}requestDataRange(i,a){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(i,a){this._pdfInfo=i,this._transport=a}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(i){return this._transport.getPage(i)}getPageIndex(i){return this._transport.getPageIndex(i)}getDestinations(){return this._transport.getDestinations()}getDestination(i){return this._transport.getDestination(i)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(i=!1){return this._transport.startCleanup(i||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(i,a,e,s,b=!1){this._pageIndex=i,this._pageInfo=a,this._ownerDocument=s,this._transport=e,this._stats=b?new _display_utils.StatTimer:null,this._pdfBug=b,this.commonObjs=e.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:i,rotation:a=this.rotate,offsetX:e=0,offsetY:s=0,dontFlip:b=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:i,rotation:a,offsetX:e,offsetY:s,dontFlip:b})}getAnnotations({intent:i="display"}={}){const a=this._transport.getRenderingIntent(i);return this._transport.getAnnotations(this._pageIndex,a.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var i;return((i=this._transport._htmlForXfa)==null?void 0:i.children[this._pageIndex])||null}render({canvasContext:i,viewport:a,intent:e="display",annotationMode:s=_util.AnnotationMode.ENABLE,transform:b=null,canvasFactory:k=null,background:M=null,optionalContentConfigPromise:q=null,annotationCanvasMap:S=null,pageColors:G=null,printAnnotationStorage:ht=null}){var N,u;(N=this._stats)==null||N.time("Overall");const nt=this._transport.getRenderingIntent(e,s,ht);this.pendingCleanup=!1,q||(q=this._transport.getOptionalContentConfig());let rt=this._intentStates.get(nt.cacheKey);rt||(rt=Object.create(null),this._intentStates.set(nt.cacheKey,rt)),rt.streamReaderCancelTimeout&&(clearTimeout(rt.streamReaderCancelTimeout),rt.streamReaderCancelTimeout=null);const K=k||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),z=!!(nt.renderingIntent&_util.RenderingIntentFlag.PRINT);rt.displayReadyCapability||(rt.displayReadyCapability=(0,_util.createPromiseCapability)(),rt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(nt));const X=o=>{var E,R;rt.renderTasks.delete(at),(this.cleanupAfterRender||z)&&(this.pendingCleanup=!0),this._tryCleanup(),o?(at.capability.reject(o),this._abortOperatorList({intentState:rt,reason:o instanceof Error?o:new Error(o)})):at.capability.resolve(),(E=this._stats)==null||E.timeEnd("Rendering"),(R=this._stats)==null||R.timeEnd("Overall")},at=new InternalRenderTask({callback:X,params:{canvasContext:i,viewport:a,transform:b,background:M},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:S,operatorList:rt.operatorList,pageIndex:this._pageIndex,canvasFactory:K,useRequestAnimationFrame:!z,pdfBug:this._pdfBug,pageColors:G});(rt.renderTasks||(rt.renderTasks=new Set)).add(at);const ct=at.task;return Promise.all([rt.displayReadyCapability.promise,q]).then(([o,E])=>{var R;if(this.pendingCleanup){X();return}(R=this._stats)==null||R.time("Rendering"),at.initializeGraphics({transparency:o,optionalContentConfig:E}),at.operatorListChanged()}).catch(X),ct}getOperatorList({intent:i="display",annotationMode:a=_util.AnnotationMode.ENABLE,printAnnotationStorage:e=null}={}){var q;function s(){k.operatorList.lastChunk&&(k.opListReadCapability.resolve(k.operatorList),k.renderTasks.delete(M))}const b=this._transport.getRenderingIntent(i,a,e,!0);let k=this._intentStates.get(b.cacheKey);k||(k=Object.create(null),this._intentStates.set(b.cacheKey,k));let M;return k.opListReadCapability||(M=Object.create(null),M.operatorListChanged=s,k.opListReadCapability=(0,_util.createPromiseCapability)(),(k.renderTasks||(k.renderTasks=new Set)).add(M),k.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(q=this._stats)==null||q.time("Page Request"),this._pumpOperatorList(b)),k.opListReadCapability.promise}streamTextContent({disableCombineTextItems:i=!1,includeMarkedContent:a=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:i!==!0,includeMarkedContent:a===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(i={}){if(this._transport._htmlForXfa)return this.getXfa().then(e=>_xfa_text.XfaText.textContent(e));const a=this.streamTextContent(i);return new Promise(function(e,s){function b(){k.read().then(function({value:q,done:S}){if(S){e(M);return}Object.assign(M.styles,q.styles),M.items.push(...q.items),b()},s)}const k=a.getReader(),M={items:[],styles:Object.create(null)};b()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const i=[];for(const a of this._intentStates.values())if(this._abortOperatorList({intentState:a,reason:new Error("Page was destroyed."),force:!0}),!a.opListReadCapability)for(const e of a.renderTasks)i.push(e.completed),e.cancel();return this.objs.clear(),this.pendingCleanup=!1,Promise.all(i)}cleanup(i=!1){return this.pendingCleanup=!0,this._tryCleanup(i)}_tryCleanup(i=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:a,operatorList:e}of this._intentStates.values())if(a.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),i&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(i,a){var s,b;const e=this._intentStates.get(a);e&&((s=this._stats)==null||s.timeEnd("Page Request"),(b=e.displayReadyCapability)==null||b.resolve(i))}_renderPageChunk(i,a){for(let e=0,s=i.length;e<s;e++)a.operatorList.fnArray.push(i.fnArray[e]),a.operatorList.argsArray.push(i.argsArray[e]);a.operatorList.lastChunk=i.lastChunk,a.operatorList.separateAnnots=i.separateAnnots;for(const e of a.renderTasks)e.operatorListChanged();i.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:i,cacheKey:a,annotationStorageMap:e}){const b=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:i,cacheKey:a,annotationStorage:e}).getReader(),k=this._intentStates.get(a);k.streamReader=b;const M=()=>{b.read().then(({value:q,done:S})=>{if(S){k.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(q,k),M())},q=>{if(k.streamReader=null,!this._transport.destroyed){if(k.operatorList){k.operatorList.lastChunk=!0;for(const S of k.renderTasks)S.operatorListChanged();this._tryCleanup()}if(k.displayReadyCapability)k.displayReadyCapability.reject(q);else if(k.opListReadCapability)k.opListReadCapability.reject(q);else throw q}})};M()}_abortOperatorList({intentState:i,reason:a,force:e=!1}){if(i.streamReader){if(i.streamReaderCancelTimeout&&(clearTimeout(i.streamReaderCancelTimeout),i.streamReaderCancelTimeout=null),!e){if(i.renderTasks.size>0)return;if(a instanceof _display_utils.RenderingCancelledException){let s=RENDERING_CANCELLED_TIMEOUT;a.extraDelay>0&&a.extraDelay<1e3&&(s+=a.extraDelay),i.streamReaderCancelTimeout=setTimeout(()=>{i.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:i,reason:a,force:!0})},s);return}}if(i.streamReader.cancel(new _util.AbortException(a.message)).catch(()=>{}),i.streamReader=null,!this._transport.destroyed){for(const[s,b]of this._intentStates)if(b===i){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){lt(this,n,new Set);lt(this,g,Promise.resolve())}postMessage(i,a){const e={data:structuredClone(i,a)};C(this,g).then(()=>{for(const s of C(this,n))s.call(this,e)})}addEventListener(i,a){C(this,n).add(a)}removeEventListener(i,a){C(this,n).delete(a)}terminate(){C(this,n).clear()}}n=new WeakMap,g=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const p=(T=document==null?void 0:document.currentScript)==null?void 0:T.src;p&&(PDFWorkerUtil.fallbackWorkerSrc=p.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(p,i){let a;try{if(a=new URL(p),!a.origin||a.origin==="null")return!1}catch{return!1}const e=new URL(i,a);return a.origin===e.origin},PDFWorkerUtil.createCDNWrapper=function(p){const i=`importScripts("${p}");`;return URL.createObjectURL(new Blob([i]))}}const _PDFWorker=class{constructor({name:p=null,port:i=null,verbosity:a=(0,_util.getVerbosityLevel)()}={}){if(i&&C(_PDFWorker,P).has(i))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=p,this.destroyed=!1,this.verbosity=a,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,i){C(_PDFWorker,P).set(i,this),this._initializeFromPort(i);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(p){this._port=p,this._messageHandler=new _message_handler.MessageHandler("main","worker",p),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:p}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,p)||(p=PDFWorkerUtil.createCDNWrapper(new URL(p,window.location).href));const i=new Worker(p),a=new _message_handler.MessageHandler("main","worker",i),e=()=>{i.removeEventListener("error",s),a.destroy(),i.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=()=>{this._webWorker||e()};i.addEventListener("error",s),a.on("test",k=>{if(i.removeEventListener("error",s),this.destroyed){e();return}k?(this._messageHandler=a,this._port=i,this._webWorker=i,this._readyCapability.resolve(),a.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),a.destroy(),i.terminate())}),a.on("ready",k=>{if(i.removeEventListener("error",s),this.destroyed){e();return}try{b()}catch{this._setupFakeWorker()}});const b=()=>{const k=new Uint8Array;a.send("test",k,[k.buffer])};b();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(p=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const i=new LoopbackPort;this._port=i;const a=`fake${PDFWorkerUtil.fakeWorkerId++}`,e=new _message_handler.MessageHandler(a+"_worker",a,i);p.setup(e,i);const s=new _message_handler.MessageHandler(a,a+"_worker",i);this._messageHandler=s,this._readyCapability.resolve(),s.send("configure",{verbosity:this.verbosity})}).catch(p=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${p.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),C(_PDFWorker,P).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(p){if(!(p!=null&&p.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return C(this,P).has(p.port)?C(this,P).get(p.port):new _PDFWorker(p)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var p;try{return((p=globalThis.pdfjsWorker)==null?void 0:p.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;P=new WeakMap,lt(PDFWorker,P,new WeakMap),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(i,a,e,s,b){lt(this,v);lt(this,D,new Map);lt(this,w,new Map);lt(this,h,new Map);this.messageHandler=i,this.loadingTask=a,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this._params=s,this.cMapReaderFactory=b==null?void 0:b.cMapReaderFactory,this.standardFontDataFactory=b==null?void 0:b.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=e,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(i,a=_util.AnnotationMode.ENABLE,e=null,s=!1){let b=_util.RenderingIntentFlag.DISPLAY,k=null;switch(i){case"any":b=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":b=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${i}`)}switch(a){case _util.AnnotationMode.DISABLE:b+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:b+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:b+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,k=(b&_util.RenderingIntentFlag.PRINT&&e instanceof _annotation_storage.PrintAnnotationStorage?e:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${a}`)}return s&&(b+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:b,cacheKey:`${b}_${_annotation_storage.AnnotationStorage.getHash(k)}`,annotationStorageMap:k}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const i=[];for(const e of C(this,w).values())i.push(e._destroy());C(this,w).clear(),C(this,h).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const a=this.messageHandler.sendWithPromise("Terminate",null);return i.push(a),Promise.all(i).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),C(this,D).clear(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:i,loadingTask:a}=this;i.on("GetReader",(e,s)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=b=>{this._lastProgress={loaded:b.loaded,total:b.total}},s.onPull=()=>{this._fullReader.read().then(function({value:b,done:k}){if(k){s.close();return}(0,_util.assert)(b instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(b),1,[b])}).catch(b=>{s.error(b)})},s.onCancel=b=>{this._fullReader.cancel(b),s.ready.catch(k=>{if(!this.destroyed)throw k})}}),i.on("ReaderHeadersReady",e=>{const s=(0,_util.createPromiseCapability)(),b=this._fullReader;return b.headersReady.then(()=>{var k;(!b.isStreamingSupported||!b.isRangeSupported)&&(this._lastProgress&&((k=a.onProgress)==null||k.call(a,this._lastProgress)),b.onProgress=M=>{var q;(q=a.onProgress)==null||q.call(a,{loaded:M.loaded,total:M.total})}),s.resolve({isStreamingSupported:b.isStreamingSupported,isRangeSupported:b.isRangeSupported,contentLength:b.contentLength})},s.reject),s.promise}),i.on("GetRangeReader",(e,s)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const b=this._networkStream.getRangeReader(e.begin,e.end);if(!b){s.close();return}s.onPull=()=>{b.read().then(function({value:k,done:M}){if(M){s.close();return}(0,_util.assert)(k instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(k),1,[k])}).catch(k=>{s.error(k)})},s.onCancel=k=>{b.cancel(k),s.ready.catch(M=>{if(!this.destroyed)throw M})}}),i.on("GetDoc",({pdfInfo:e})=>{this._numPages=e.numPages,this._htmlForXfa=e.htmlForXfa,delete e.htmlForXfa,a._capability.resolve(new PDFDocumentProxy(e,this))}),i.on("DocException",function(e){let s;switch(e.name){case"PasswordException":s=new _util.PasswordException(e.message,e.code);break;case"InvalidPDFException":s=new _util.InvalidPDFException(e.message);break;case"MissingPDFException":s=new _util.MissingPDFException(e.message);break;case"UnexpectedResponseException":s=new _util.UnexpectedResponseException(e.message,e.status);break;case"UnknownErrorException":s=new _util.UnknownErrorException(e.message,e.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}a._capability.reject(s)}),i.on("PasswordRequest",e=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),a.onPassword){const s=b=>{b instanceof Error?this._passwordCapability.reject(b):this._passwordCapability.resolve({password:b})};try{a.onPassword(s,e.code)}catch(b){this._passwordCapability.reject(b)}}else this._passwordCapability.reject(new _util.PasswordException(e.message,e.code));return this._passwordCapability.promise}),i.on("DataLoaded",e=>{var s;(s=a.onProgress)==null||s.call(a,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),i.on("StartRenderPage",e=>{if(this.destroyed)return;C(this,w).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),i.on("commonobj",([e,s,b])=>{var k;if(!this.destroyed&&!this.commonObjs.has(e))switch(s){case"Font":const M=this._params;if("error"in b){const G=b.error;(0,_util.warn)(`Error during font loading: ${G}`),this.commonObjs.resolve(e,G);break}let q=null;M.pdfBug&&((k=globalThis.FontInspector)!=null&&k.enabled)&&(q={registerFont(G,ht){globalThis.FontInspector.fontAdded(G,ht)}});const S=new _font_loader.FontFaceObject(b,{isEvalSupported:M.isEvalSupported,disableFontFace:M.disableFontFace,ignoreErrors:M.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:q});this.fontLoader.bind(S).catch(G=>i.sendWithPromise("FontFallback",{id:e})).finally(()=>{!M.fontExtraProperties&&S.data&&(S.data=null),this.commonObjs.resolve(e,S)});break;case"FontPath":case"Image":this.commonObjs.resolve(e,b);break;default:throw new Error(`Got unknown common object type ${s}`)}}),i.on("obj",([e,s,b,k])=>{var q;if(this.destroyed)return;const M=C(this,w).get(s);if(!M.objs.has(e))switch(b){case"Image":M.objs.resolve(e,k);const S=8e6;if(k){let G;if(k.bitmap){const{width:ht,height:nt}=k;G=ht*nt*4}else G=((q=k.data)==null?void 0:q.length)||0;G>S&&(M.cleanupAfterRender=!0)}break;case"Pattern":M.objs.resolve(e,k);break;default:throw new Error(`Got unknown object type ${b}`)}}),i.on("DocProgress",e=>{var s;this.destroyed||(s=a.onProgress)==null||s.call(a,{loaded:e.loaded,total:e.total})}),i.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),i.on("FetchBuiltInCMap",e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(e):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),i.on("FetchStandardFontData",e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(e):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:i}){var a,e;this.destroyed||(e=(a=this.loadingTask).onUnsupportedFeature)==null||e.call(a,i)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((i=this._fullReader)==null?void 0:i.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(i){if(!Number.isInteger(i)||i<=0||i>this._numPages)return Promise.reject(new Error("Invalid page request."));const a=i-1,e=C(this,h).get(a);if(e)return e;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:a}).then(b=>{if(this.destroyed)throw new Error("Transport destroyed");const k=new PDFPageProxy(a,b,this,this._params.ownerDocument,this._params.pdfBug);return C(this,w).set(a,k),k});return C(this,h).set(a,s),s}getPageIndex(i){return typeof i!="object"||i===null||!Number.isInteger(i.num)||i.num<0||!Number.isInteger(i.gen)||i.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:i.num,gen:i.gen})}getAnnotations(i,a){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:i,intent:a})}getFieldObjects(){return ut(this,v,oe).call(this,"GetFieldObjects")}hasJSActions(){return ut(this,v,oe).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(i){return typeof i!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:i})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(i){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:i})}getStructTree(i){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:i})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(i=>new _optional_content_config.OptionalContentConfig(i))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const i="GetMetadata",a=C(this,D).get(i);if(a)return a;const e=this.messageHandler.sendWithPromise(i,null).then(s=>{var b,k;return{info:s[0],metadata:s[1]?new _metadata.Metadata(s[1]):null,contentDispositionFilename:((b=this._fullReader)==null?void 0:b.filename)??null,contentLength:((k=this._fullReader)==null?void 0:k.contentLength)??null}});return C(this,D).set(i,e),e}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(i=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const a of C(this,w).values())if(!a.cleanup())throw new Error(`startCleanup: Page ${a.pageNumber} is currently rendering.`);this.commonObjs.clear(),i||this.fontLoader.clear(),C(this,D).clear()}}get loadingParams(){const{disableAutoFetch:i,enableXfa:a}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:i,enableXfa:a})}}D=new WeakMap,w=new WeakMap,h=new WeakMap,v=new WeakSet,oe=function(i,a=null){const e=C(this,D).get(i);if(e)return e;const s=this.messageHandler.sendWithPromise(i,a);return C(this,D).set(i,s),s};class PDFObjects{constructor(){lt(this,A);lt(this,y,Object.create(null))}get(i,a=null){if(a){const s=ut(this,A,le).call(this,i);return s.capability.promise.then(()=>a(s.data)),null}const e=C(this,y)[i];if(!(e!=null&&e.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${i}.`);return e.data}has(i){const a=C(this,y)[i];return(a==null?void 0:a.capability.settled)||!1}resolve(i,a=null){const e=ut(this,A,le).call(this,i);e.data=a,e.capability.resolve()}clear(){var i;for(const a in C(this,y)){const{data:e}=C(this,y)[a];(i=e==null?void 0:e.bitmap)==null||i.close()}vt(this,y,Object.create(null))}}y=new WeakMap,A=new WeakSet,le=function(i){const a=C(this,y)[i];return a||(C(this,y)[i]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(i){lt(this,f,null);vt(this,f,i),this.onContinue=null}get promise(){return C(this,f).capability.promise}cancel(i=0){C(this,f).cancel(null,i)}get separateAnnots(){const{separateAnnots:i}=C(this,f).operatorList;if(!i)return!1;const{annotationCanvasMap:a}=C(this,f);return i.form||i.canvas&&(a==null?void 0:a.size)>0}}f=new WeakMap,exports.RenderTask=RenderTask;const c=class{constructor({callback:i,params:a,objs:e,commonObjs:s,annotationCanvasMap:b,operatorList:k,pageIndex:M,canvasFactory:q,useRequestAnimationFrame:S=!1,pdfBug:G=!1,pageColors:ht=null}){this.callback=i,this.params=a,this.objs=e,this.commonObjs=s,this.annotationCanvasMap=b,this.operatorListIdx=null,this.operatorList=k,this._pageIndex=M,this.canvasFactory=q,this._pdfBug=G,this.pageColors=ht,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=S===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=a.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:i=!1,optionalContentConfig:a}){var M,q;if(this.cancelled)return;if(this._canvas){if(C(c,r).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");C(c,r).add(this._canvas)}this._pdfBug&&((M=globalThis.StepperManager)!=null&&M.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:e,viewport:s,transform:b,background:k}=this.params;this.gfx=new _canvas.CanvasGraphics(e,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:a},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:b,viewport:s,transparency:i,background:k}),this.operatorListIdx=0,this.graphicsReady=!0,(q=this.graphicsReadyCallback)==null||q.call(this)}cancel(i=null,a=0){var e;this.running=!1,this.cancelled=!0,(e=this.gfx)==null||e.endDrawing(),this._canvas&&C(c,r).delete(this._canvas),this.callback(i||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",a))}operatorListChanged(){var i;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(i=this.stepper)==null||i.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&C(c,r).delete(this._canvas),this.callback())))}};let InternalRenderTask=c;r=new WeakMap,lt(InternalRenderTask,r,new WeakSet);const version="3.4.120";exports.version=version;const build="af6414988";exports.build=build},(L,t,l)=>{var w,h,v,ke,y;Object.defineProperty(t,"__esModule",{value:!0}),t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var n=l(1),g=l(4),T=l(8);class P{constructor(){lt(this,v);lt(this,w,!1);lt(this,h,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(m,f){const r=C(this,h).get(m);return r===void 0?f:Object.assign(f,r)}getRawValue(m){return C(this,h).get(m)}remove(m){if(C(this,h).delete(m),C(this,h).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const f of C(this,h).values())if(f instanceof g.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(m,f){const r=C(this,h).get(m);let c=!1;if(r!==void 0)for(const[p,i]of Object.entries(f))r[p]!==i&&(c=!0,r[p]=i);else c=!0,C(this,h).set(m,f);c&&ut(this,v,ke).call(this),f instanceof g.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(f.constructor._type)}has(m){return C(this,h).has(m)}getAll(){return C(this,h).size>0?(0,n.objectFromMap)(C(this,h)):null}setAll(m){for(const[f,r]of Object.entries(m))this.setValue(f,r)}get size(){return C(this,h).size}resetModified(){C(this,w)&&(vt(this,w,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new D(this)}get serializable(){if(C(this,h).size===0)return null;const m=new Map;for(const[f,r]of C(this,h)){const c=r instanceof g.AnnotationEditor?r.serialize():r;c&&m.set(f,c)}return m}static getHash(m){if(!m)return"";const f=new T.MurmurHash3_64;for(const[r,c]of m)f.update(`${r}:${JSON.stringify(c)}`);return f.hexdigest()}}w=new WeakMap,h=new WeakMap,v=new WeakSet,ke=function(){C(this,w)||(vt(this,w,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=P;class D extends P{constructor(f){super();lt(this,y,null);vt(this,y,structuredClone(f.serializable))}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return C(this,y)}}y=new WeakMap,t.PrintAnnotationStorage=D},(L,t,l)=>{var P,D,w,h,v,I;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var n=l(5),g=l(1);const y=class{constructor(m){lt(this,P,this.focusin.bind(this));lt(this,D,this.focusout.bind(this));lt(this,w,!1);lt(this,h,!1);lt(this,v,!1);Ot(this,"_uiManager",null);lt(this,I,y._zIndex++);this.constructor===y&&(0,g.unreachable)("Cannot initialize AnnotationEditor."),this.parent=m.parent,this.id=m.id,this.width=this.height=null,this.pageIndex=m.parent.pageIndex,this.name=m.name,this.div=null,this._uiManager=m.uiManager;const{rotation:f,rawDims:{pageWidth:r,pageHeight:c,pageX:p,pageY:i}}=this.parent.viewport;this.rotation=f,this.pageDimensions=[r,c],this.pageTranslation=[p,i];const[a,e]=this.parentDimensions;this.x=m.x/a,this.y=m.y/e,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,g.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(m){this._uiManager.addCommands(m)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=C(this,I)}setParent(m){m!==null&&(this.pageIndex=m.pageIndex,this.pageDimensions=m.pageDimensions),this.parent=m}focusin(m){C(this,w)?vt(this,w,!1):this.parent.setSelected(this)}focusout(m){var r;if(!this.isAttachedToDOM)return;const f=m.relatedTarget;f!=null&&f.closest(`#${this.id}`)||(m.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(m){const f=this.parent.div.getBoundingClientRect();this.startX=m.clientX-f.x,this.startY=m.clientY-f.y,m.dataTransfer.setData("text/plain",this.id),m.dataTransfer.effectAllowed="move"}setAt(m,f,r,c){const[p,i]=this.parentDimensions;[r,c]=this.screenToPageTranslation(r,c),this.x=(m+r)/p,this.y=(f+c)/i,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(m,f){const[r,c]=this.parentDimensions;[m,f]=this.screenToPageTranslation(m,f),this.x+=m/r,this.y+=f/c,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(m,f){switch(this.parentRotation){case 90:return[f,-m];case 180:return[-m,-f];case 270:return[-f,m];default:return[m,f]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return this._uiManager.viewParameters.rotation}get parentDimensions(){const{realScale:m}=this._uiManager.viewParameters,[f,r]=this.pageDimensions;return[f*m,r*m]}setDims(m,f){const[r,c]=this.parentDimensions;this.div.style.width=`${100*m/r}%`,this.div.style.height=`${100*f/c}%`}fixDims(){const{style:m}=this.div,{height:f,width:r}=m,c=r.endsWith("%"),p=f.endsWith("%");if(c&&p)return;const[i,a]=this.parentDimensions;c||(m.width=`${100*parseFloat(r)/i}%`),p||(m.height=`${100*parseFloat(f)/a}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",C(this,P)),this.div.addEventListener("focusout",C(this,D));const[m,f]=this.getInitialTranslation();return this.translate(m,f),(0,n.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(m){const{isMac:f}=g.FeatureTest.platform;if(m.button!==0||m.ctrlKey&&f){m.preventDefault();return}m.ctrlKey&&!f||m.shiftKey||m.metaKey&&f?this.parent.toggleSelected(this):this.parent.setSelected(this),vt(this,w,!0)}getRect(m,f){const r=this.parentScale,[c,p]=this.pageDimensions,[i,a]=this.pageTranslation,e=m/r,s=f/r,b=this.x*c,k=this.y*p,M=this.width*c,q=this.height*p;switch(this.rotation){case 0:return[b+e+i,p-k-s-q+a,b+e+M+i,p-k-s+a];case 90:return[b+s+i,p-k+e+a,b+s+q+i,p-k+e+M+a];case 180:return[b-e-M+i,p-k+s+a,b-e+i,p-k+s+q+a];case 270:return[b-s-q+i,p-k-e-M+a,b-s+i,p-k-e+a];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(m,f){const[r,c,p,i]=m,a=p-r,e=i-c;switch(this.rotation){case 0:return[r,f-i,a,e];case 90:return[r,f-c,e,a];case 180:return[p,f-c,a,e];case 270:return[p,f-i,e,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){vt(this,v,!0)}disableEditMode(){vt(this,v,!1)}isInEditMode(){return C(this,v)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var m;(m=this.div)==null||m.addEventListener("focusin",C(this,P))}serialize(){(0,g.unreachable)("An editor must be serializable")}static deserialize(m,f,r){const c=new this.prototype.constructor({parent:f,id:f.getNextId(),uiManager:r});c.rotation=m.rotation;const[p,i]=c.pageDimensions,[a,e,s,b]=c.getRectInCurrentCoords(m.rect,i);return c.x=a/p,c.y=e/i,c.width=s/p,c.height=b/i,c}remove(){this.div.removeEventListener("focusin",C(this,P)),this.div.removeEventListener("focusout",C(this,D)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var m;(m=this.div)==null||m.classList.add("selectedEditor")}unselect(){var m;(m=this.div)==null||m.classList.remove("selectedEditor")}updateParams(m,f){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return C(this,h)}set isEditing(m){vt(this,h,m),m?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let T=y;P=new WeakMap,D=new WeakMap,w=new WeakMap,h=new WeakMap,v=new WeakMap,I=new WeakMap,Ot(T,"_colorManager",new n.ColorManager),Ot(T,"_zIndex",1),t.AnnotationEditor=T},(L,t,l)=>{var y,A,m,f,r,c,xe,a,e,s,b,k,M,q,S,G,ht,nt,rt,K,z,X,at,ct,N,u,o,E,R,O,B,Re,Y,ce,J,Fe,Z,Me,_,Wt,j,$t,$,De,dt,Oe,et,he,it,Yt,bt,de;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=T,t.opacityToHex=P;var n=l(1),g=l(6);function T(Et,U,H){for(const V of H)U.addEventListener(V,Et[V].bind(Et))}function P(Et){return Math.round(Math.min(255,Math.max(1,255*Et))).toString(16).padStart(2,"0")}class D{constructor(){lt(this,y,0)}getId(){return`${n.AnnotationEditorPrefix}${ae(this,y)._++}`}}y=new WeakMap;class w{constructor(U=128){lt(this,A,[]);lt(this,m,!1);lt(this,f,void 0);lt(this,r,-1);vt(this,f,U)}add({cmd:U,undo:H,mustExec:V,type:gt=NaN,overwriteIfSameType:Ct=!1,keepUndo:Mt=!1}){if(V&&U(),C(this,m))return;const tt={cmd:U,undo:H,type:gt};if(C(this,r)===-1){C(this,A).length>0&&(C(this,A).length=0),vt(this,r,0),C(this,A).push(tt);return}if(Ct&&C(this,A)[C(this,r)].type===gt){Mt&&(tt.undo=C(this,A)[C(this,r)].undo),C(this,A)[C(this,r)]=tt;return}const pt=C(this,r)+1;pt===C(this,f)?C(this,A).splice(0,1):(vt(this,r,pt),pt<C(this,A).length&&C(this,A).splice(pt)),C(this,A).push(tt)}undo(){C(this,r)!==-1&&(vt(this,m,!0),C(this,A)[C(this,r)].undo(),vt(this,m,!1),vt(this,r,C(this,r)-1))}redo(){C(this,r)<C(this,A).length-1&&(vt(this,r,C(this,r)+1),vt(this,m,!0),C(this,A)[C(this,r)].cmd(),vt(this,m,!1))}hasSomethingToUndo(){return C(this,r)!==-1}hasSomethingToRedo(){return C(this,r)<C(this,A).length-1}destroy(){vt(this,A,null)}}A=new WeakMap,m=new WeakMap,f=new WeakMap,r=new WeakMap,t.CommandManager=w;class h{constructor(U){lt(this,c);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:H}=n.FeatureTest.platform;for(const[V,gt]of U)for(const Ct of V){const Mt=Ct.startsWith("mac+");H&&Mt?(this.callbacks.set(Ct.slice(4),gt),this.allKeys.add(Ct.split("+").at(-1))):!H&&!Mt&&(this.callbacks.set(Ct,gt),this.allKeys.add(Ct.split("+").at(-1)))}}exec(U,H){if(!this.allKeys.has(H.key))return;const V=this.callbacks.get(ut(this,c,xe).call(this,H));V&&(V.bind(U)(),H.stopPropagation(),H.preventDefault())}}c=new WeakSet,xe=function(U){U.altKey&&this.buffer.push("alt"),U.ctrlKey&&this.buffer.push("ctrl"),U.metaKey&&this.buffer.push("meta"),U.shiftKey&&this.buffer.push("shift"),this.buffer.push(U.key);const H=this.buffer.join("+");return this.buffer.length=0,H},t.KeyboardManager=h;const i=class{get _colors(){const U=new Map([["CanvasText",null],["Canvas",null]]);return(0,g.getColorValues)(U),(0,n.shadow)(this,"_colors",U)}convert(U){const H=(0,g.getRGB)(U);if(!window.matchMedia("(forced-colors: active)").matches)return H;for(const[V,gt]of this._colors)if(gt.every((Ct,Mt)=>Ct===H[Mt]))return i._colorsMapping.get(V);return H}getHexCode(U){const H=this._colors.get(U);return H?n.Util.makeHexColor(...H):U}};let v=i;Ot(v,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),t.ColorManager=v;const wt=class{constructor(U,H,V){lt(this,B);lt(this,Y);lt(this,J);lt(this,Z);lt(this,_);lt(this,j);lt(this,$);lt(this,dt);lt(this,et);lt(this,it);lt(this,bt);lt(this,a,null);lt(this,e,new Map);lt(this,s,new Map);lt(this,b,null);lt(this,k,new w);lt(this,M,0);lt(this,q,null);lt(this,S,new Set);lt(this,G,null);lt(this,ht,new D);lt(this,nt,!1);lt(this,rt,n.AnnotationEditorType.NONE);lt(this,K,new Set);lt(this,z,this.copy.bind(this));lt(this,X,this.cut.bind(this));lt(this,at,this.paste.bind(this));lt(this,ct,this.keydown.bind(this));lt(this,N,this.onEditingAction.bind(this));lt(this,u,this.onPageChanging.bind(this));lt(this,o,this.onScaleChanging.bind(this));lt(this,E,this.onRotationChanging.bind(this));lt(this,R,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});lt(this,O,null);vt(this,O,U),vt(this,G,H),C(this,G)._on("editingaction",C(this,N)),C(this,G)._on("pagechanging",C(this,u)),C(this,G)._on("scalechanging",C(this,o)),C(this,G)._on("rotationchanging",C(this,E)),vt(this,b,V),this.viewParameters={realScale:g.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){ut(this,Y,ce).call(this),C(this,G)._off("editingaction",C(this,N)),C(this,G)._off("pagechanging",C(this,u)),C(this,G)._off("scalechanging",C(this,o)),C(this,G)._off("rotationchanging",C(this,E));for(const U of C(this,s).values())U.destroy();C(this,s).clear(),C(this,e).clear(),C(this,S).clear(),vt(this,a,null),C(this,K).clear(),C(this,k).destroy()}onPageChanging({pageNumber:U}){vt(this,M,U-1)}focusMainContainer(){C(this,O).focus()}addShouldRescale(U){C(this,S).add(U)}removeShouldRescale(U){C(this,S).delete(U)}onScaleChanging({scale:U}){this.commitOrRemove(),this.viewParameters.realScale=U*g.PixelsPerInch.PDF_TO_CSS_UNITS;for(const H of C(this,S))H.onScaleChanging()}onRotationChanging({pagesRotation:U}){this.commitOrRemove(),this.viewParameters.rotation=U}addToAnnotationStorage(U){!U.isEmpty()&&C(this,b)&&!C(this,b).has(U.id)&&C(this,b).setValue(U.id,U)}copy(U){if(U.preventDefault(),C(this,a)&&C(this,a).commitOrRemove(),!this.hasSelection)return;const H=[];for(const V of C(this,K))V.isEmpty()||H.push(V.serialize());H.length!==0&&U.clipboardData.setData("application/pdfjs",JSON.stringify(H))}cut(U){this.copy(U),this.delete()}paste(U){U.preventDefault();let H=U.clipboardData.getData("application/pdfjs");if(!H)return;try{H=JSON.parse(H)}catch(gt){(0,n.warn)(`paste: "${gt.message}".`);return}if(!Array.isArray(H))return;this.unselectAll();const V=C(this,s).get(C(this,M));try{const gt=[];for(const tt of H){const pt=V.deserialize(tt);if(!pt)return;gt.push(pt)}const Ct=()=>{for(const tt of gt)ut(this,et,he).call(this,tt);ut(this,bt,de).call(this,gt)},Mt=()=>{for(const tt of gt)tt.remove()};this.addCommands({cmd:Ct,undo:Mt,mustExec:!0})}catch(gt){(0,n.warn)(`paste: "${gt.message}".`)}}keydown(U){var H;(H=this.getActive())!=null&&H.shouldGetKeyboardEvents()||wt._keyboardManager.exec(this,U)}onEditingAction(U){["undo","redo","delete","selectAll"].includes(U.name)&&this[U.name]()}setEditingState(U){U?(ut(this,B,Re).call(this),ut(this,J,Fe).call(this),ut(this,_,Wt).call(this,{isEditing:C(this,rt)!==n.AnnotationEditorType.NONE,isEmpty:ut(this,it,Yt).call(this),hasSomethingToUndo:C(this,k).hasSomethingToUndo(),hasSomethingToRedo:C(this,k).hasSomethingToRedo(),hasSelectedEditor:!1})):(ut(this,Y,ce).call(this),ut(this,Z,Me).call(this),ut(this,_,Wt).call(this,{isEditing:!1}))}registerEditorTypes(U){if(!C(this,q)){vt(this,q,U);for(const H of C(this,q))ut(this,j,$t).call(this,H.defaultPropertiesToUpdate)}}getId(){return C(this,ht).getId()}get currentLayer(){return C(this,s).get(C(this,M))}get currentPageIndex(){return C(this,M)}addLayer(U){C(this,s).set(U.pageIndex,U),C(this,nt)?U.enable():U.disable()}removeLayer(U){C(this,s).delete(U.pageIndex)}updateMode(U){if(vt(this,rt,U),U===n.AnnotationEditorType.NONE)this.setEditingState(!1),ut(this,dt,Oe).call(this);else{this.setEditingState(!0),ut(this,$,De).call(this);for(const H of C(this,s).values())H.updateMode(U)}}updateToolbar(U){U!==C(this,rt)&&C(this,G).dispatch("switchannotationeditormode",{source:this,mode:U})}updateParams(U,H){if(C(this,q)){for(const V of C(this,K))V.updateParams(U,H);for(const V of C(this,q))V.updateDefaultParams(U,H)}}getEditors(U){const H=[];for(const V of C(this,e).values())V.pageIndex===U&&H.push(V);return H}getEditor(U){return C(this,e).get(U)}addEditor(U){C(this,e).set(U.id,U)}removeEditor(U){var H;C(this,e).delete(U.id),this.unselect(U),(H=C(this,b))==null||H.remove(U.id)}setActiveEditor(U){C(this,a)!==U&&(vt(this,a,U),U&&ut(this,j,$t).call(this,U.propertiesToUpdate))}toggleSelected(U){if(C(this,K).has(U)){C(this,K).delete(U),U.unselect(),ut(this,_,Wt).call(this,{hasSelectedEditor:this.hasSelection});return}C(this,K).add(U),U.select(),ut(this,j,$t).call(this,U.propertiesToUpdate),ut(this,_,Wt).call(this,{hasSelectedEditor:!0})}setSelected(U){for(const H of C(this,K))H!==U&&H.unselect();C(this,K).clear(),C(this,K).add(U),U.select(),ut(this,j,$t).call(this,U.propertiesToUpdate),ut(this,_,Wt).call(this,{hasSelectedEditor:!0})}isSelected(U){return C(this,K).has(U)}unselect(U){U.unselect(),C(this,K).delete(U),ut(this,_,Wt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return C(this,K).size!==0}undo(){C(this,k).undo(),ut(this,_,Wt).call(this,{hasSomethingToUndo:C(this,k).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ut(this,it,Yt).call(this)})}redo(){C(this,k).redo(),ut(this,_,Wt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:C(this,k).hasSomethingToRedo(),isEmpty:ut(this,it,Yt).call(this)})}addCommands(U){C(this,k).add(U),ut(this,_,Wt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ut(this,it,Yt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const U=[...C(this,K)],H=()=>{for(const gt of U)gt.remove()},V=()=>{for(const gt of U)ut(this,et,he).call(this,gt)};this.addCommands({cmd:H,undo:V,mustExec:!0})}commitOrRemove(){var U;(U=C(this,a))==null||U.commitOrRemove()}selectAll(){for(const U of C(this,K))U.commit();ut(this,bt,de).call(this,C(this,e).values())}unselectAll(){if(C(this,a)){C(this,a).commitOrRemove();return}if(C(this,K).size!==0){for(const U of C(this,K))U.unselect();C(this,K).clear(),ut(this,_,Wt).call(this,{hasSelectedEditor:!1})}}isActive(U){return C(this,a)===U}getActive(){return C(this,a)}getMode(){return C(this,rt)}};let I=wt;a=new WeakMap,e=new WeakMap,s=new WeakMap,b=new WeakMap,k=new WeakMap,M=new WeakMap,q=new WeakMap,S=new WeakMap,G=new WeakMap,ht=new WeakMap,nt=new WeakMap,rt=new WeakMap,K=new WeakMap,z=new WeakMap,X=new WeakMap,at=new WeakMap,ct=new WeakMap,N=new WeakMap,u=new WeakMap,o=new WeakMap,E=new WeakMap,R=new WeakMap,O=new WeakMap,B=new WeakSet,Re=function(){C(this,O).addEventListener("keydown",C(this,ct))},Y=new WeakSet,ce=function(){C(this,O).removeEventListener("keydown",C(this,ct))},J=new WeakSet,Fe=function(){document.addEventListener("copy",C(this,z)),document.addEventListener("cut",C(this,X)),document.addEventListener("paste",C(this,at))},Z=new WeakSet,Me=function(){document.removeEventListener("copy",C(this,z)),document.removeEventListener("cut",C(this,X)),document.removeEventListener("paste",C(this,at))},_=new WeakSet,Wt=function(U){Object.entries(U).some(([V,gt])=>C(this,R)[V]!==gt)&&C(this,G).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(C(this,R),U)})},j=new WeakSet,$t=function(U){C(this,G).dispatch("annotationeditorparamschanged",{source:this,details:U})},$=new WeakSet,De=function(){if(!C(this,nt)){vt(this,nt,!0);for(const U of C(this,s).values())U.enable()}},dt=new WeakSet,Oe=function(){if(this.unselectAll(),C(this,nt)){vt(this,nt,!1);for(const U of C(this,s).values())U.disable()}},et=new WeakSet,he=function(U){const H=C(this,s).get(U.pageIndex);H?H.addOrRebuild(U):this.addEditor(U)},it=new WeakSet,Yt=function(){if(C(this,e).size===0)return!0;if(C(this,e).size===1)for(const U of C(this,e).values())return U.isEmpty();return!1},bt=new WeakSet,de=function(U){C(this,K).clear();for(const H of U)H.isEmpty()||(C(this,K).add(H),H.select());ut(this,_,Wt).call(this,{hasSelectedEditor:!0})},Ot(I,"_keyboardManager",new h([[["ctrl+a","mac+meta+a"],wt.prototype.selectAll],[["ctrl+z","mac+meta+z"],wt.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],wt.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],wt.prototype.delete],[["Escape","mac+Escape"],wt.prototype.unselectAll]])),t.AnnotationEditorUIManager=I},(L,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=t.AnnotationPrefix=void 0,t.deprecated=s,t.getColorValues=S,t.getCurrentTransform=G,t.getCurrentTransformInverse=ht,t.getFilenameFromUrl=c,t.getPdfFilenameFromUrl=p,t.getRGB=q,t.getXfaPageViewport=M,t.isDataScheme=f,t.isPdfFile=r,t.isValidFetchUrl=a,t.loadScript=e,t.setLayerDimensions=nt;var n=l(7),g=l(1);const T="http://www.w3.org/2000/svg",P="pdfjs_internal_id_";t.AnnotationPrefix=P;const rt=class{};let D=rt;Ot(D,"CSS",96),Ot(D,"PDF",72),Ot(D,"PDF_TO_CSS_UNITS",rt.CSS/rt.PDF),t.PixelsPerInch=D;class w extends n.BaseCanvasFactory{constructor({ownerDocument:z=globalThis.document}={}){super(),this._document=z}_createCanvas(z,X){const at=this._document.createElement("canvas");return at.width=z,at.height=X,at}}t.DOMCanvasFactory=w;async function h(K,z=!1){if(a(K,document.baseURI)){const X=await fetch(K);if(!X.ok)throw new Error(X.statusText);return z?new Uint8Array(await X.arrayBuffer()):(0,g.stringToBytes)(await X.text())}return new Promise((X,at)=>{const ct=new XMLHttpRequest;ct.open("GET",K,!0),z&&(ct.responseType="arraybuffer"),ct.onreadystatechange=()=>{if(ct.readyState===XMLHttpRequest.DONE){if(ct.status===200||ct.status===0){let N;if(z&&ct.response?N=new Uint8Array(ct.response):!z&&ct.responseText&&(N=(0,g.stringToBytes)(ct.responseText)),N){X(N);return}}at(new Error(ct.statusText))}},ct.send(null)})}class v extends n.BaseCMapReaderFactory{_fetchData(z,X){return h(z,this.isCompressed).then(at=>({cMapData:at,compressionType:X}))}}t.DOMCMapReaderFactory=v;class I extends n.BaseStandardFontDataFactory{_fetchData(z){return h(z,!0)}}t.DOMStandardFontDataFactory=I;class y extends n.BaseSVGFactory{_createSVG(z){return document.createElementNS(T,z)}}t.DOMSVGFactory=y;class A{constructor({viewBox:z,scale:X,rotation:at,offsetX:ct=0,offsetY:N=0,dontFlip:u=!1}){this.viewBox=z,this.scale=X,this.rotation=at,this.offsetX=ct,this.offsetY=N;const o=(z[2]+z[0])/2,E=(z[3]+z[1])/2;let R,O,B,W;switch(at%=360,at<0&&(at+=360),at){case 180:R=-1,O=0,B=0,W=1;break;case 90:R=0,O=1,B=1,W=0;break;case 270:R=0,O=-1,B=-1,W=0;break;case 0:R=1,O=0,B=0,W=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(B=-B,W=-W);let Y,Q,J,st;R===0?(Y=Math.abs(E-z[1])*X+ct,Q=Math.abs(o-z[0])*X+N,J=(z[3]-z[1])*X,st=(z[2]-z[0])*X):(Y=Math.abs(o-z[0])*X+ct,Q=Math.abs(E-z[1])*X+N,J=(z[2]-z[0])*X,st=(z[3]-z[1])*X),this.transform=[R*X,O*X,B*X,W*X,Y-R*X*o-B*X*E,Q-O*X*o-W*X*E],this.width=J,this.height=st}get rawDims(){const{viewBox:z}=this;return(0,g.shadow)(this,"rawDims",{pageWidth:z[2]-z[0],pageHeight:z[3]-z[1],pageX:z[0],pageY:z[1]})}clone({scale:z=this.scale,rotation:X=this.rotation,offsetX:at=this.offsetX,offsetY:ct=this.offsetY,dontFlip:N=!1}={}){return new A({viewBox:this.viewBox.slice(),scale:z,rotation:X,offsetX:at,offsetY:ct,dontFlip:N})}convertToViewportPoint(z,X){return g.Util.applyTransform([z,X],this.transform)}convertToViewportRectangle(z){const X=g.Util.applyTransform([z[0],z[1]],this.transform),at=g.Util.applyTransform([z[2],z[3]],this.transform);return[X[0],X[1],at[0],at[1]]}convertToPdfPoint(z,X){return g.Util.applyInverseTransform([z,X],this.transform)}}t.PageViewport=A;class m extends g.BaseException{constructor(z,X,at=0){super(z,"RenderingCancelledException"),this.type=X,this.extraDelay=at}}t.RenderingCancelledException=m;function f(K){const z=K.length;let X=0;for(;X<z&&K[X].trim()==="";)X++;return K.substring(X,X+5).toLowerCase()==="data:"}function r(K){return typeof K=="string"&&/\.pdf$/i.test(K)}function c(K,z=!1){return z||([K]=K.split(/[#?]/,1)),K.substring(K.lastIndexOf("/")+1)}function p(K,z="document.pdf"){if(typeof K!="string")return z;if(f(K))return(0,g.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),z;const X=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,at=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,ct=X.exec(K);let N=at.exec(ct[1])||at.exec(ct[2])||at.exec(ct[3]);if(N&&(N=N[0],N.includes("%")))try{N=at.exec(decodeURIComponent(N))[0]}catch{}return N||z}class i{constructor(){Ot(this,"started",Object.create(null));Ot(this,"times",[])}time(z){z in this.started&&(0,g.warn)(`Timer is already running for ${z}`),this.started[z]=Date.now()}timeEnd(z){z in this.started||(0,g.warn)(`Timer has not been started for ${z}`),this.times.push({name:z,start:this.started[z],end:Date.now()}),delete this.started[z]}toString(){const z=[];let X=0;for(const{name:at}of this.times)X=Math.max(at.length,X);for(const{name:at,start:ct,end:N}of this.times)z.push(`${at.padEnd(X)} ${N-ct}ms
`);return z.join("")}}t.StatTimer=i;function a(K,z){try{const{protocol:X}=z?new URL(K,z):new URL(K);return X==="http:"||X==="https:"}catch{return!1}}function e(K,z=!1){return new Promise((X,at)=>{const ct=document.createElement("script");ct.src=K,ct.onload=function(N){z&&ct.remove(),X(N)},ct.onerror=function(){at(new Error(`Cannot load script at: ${ct.src}`))},(document.head||document.documentElement).append(ct)})}function s(K){console.log("Deprecated API usage: "+K)}let b;class k{static toDateObject(z){if(!z||typeof z!="string")return null;b||(b=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const X=b.exec(z);if(!X)return null;const at=parseInt(X[1],10);let ct=parseInt(X[2],10);ct=ct>=1&&ct<=12?ct-1:0;let N=parseInt(X[3],10);N=N>=1&&N<=31?N:1;let u=parseInt(X[4],10);u=u>=0&&u<=23?u:0;let o=parseInt(X[5],10);o=o>=0&&o<=59?o:0;let E=parseInt(X[6],10);E=E>=0&&E<=59?E:0;const R=X[7]||"Z";let O=parseInt(X[8],10);O=O>=0&&O<=23?O:0;let B=parseInt(X[9],10)||0;return B=B>=0&&B<=59?B:0,R==="-"?(u+=O,o+=B):R==="+"&&(u-=O,o-=B),new Date(Date.UTC(at,ct,N,u,o,E))}}t.PDFDateString=k;function M(K,{scale:z=1,rotation:X=0}){const{width:at,height:ct}=K.attributes.style,N=[0,0,parseInt(at),parseInt(ct)];return new A({viewBox:N,scale:z,rotation:X})}function q(K){if(K.startsWith("#")){const z=parseInt(K.slice(1),16);return[(z&16711680)>>16,(z&65280)>>8,z&255]}return K.startsWith("rgb(")?K.slice(4,-1).split(",").map(z=>parseInt(z)):K.startsWith("rgba(")?K.slice(5,-1).split(",").map(z=>parseInt(z)).slice(0,3):((0,g.warn)(`Not a valid color format: "${K}"`),[0,0,0])}function S(K){const z=document.createElement("span");z.style.visibility="hidden",document.body.append(z);for(const X of K.keys()){z.style.color=X;const at=window.getComputedStyle(z).color;K.set(X,q(at))}z.remove()}function G(K){const{a:z,b:X,c:at,d:ct,e:N,f:u}=K.getTransform();return[z,X,at,ct,N,u]}function ht(K){const{a:z,b:X,c:at,d:ct,e:N,f:u}=K.getTransform().invertSelf();return[z,X,at,ct,N,u]}function nt(K,z,X=!1,at=!0){if(z instanceof A){const{pageWidth:ct,pageHeight:N}=z.rawDims,{style:u}=K,o=`calc(var(--scale-factor) * ${ct}px)`,E=`calc(var(--scale-factor) * ${N}px)`;!X||z.rotation%180===0?(u.width=o,u.height=E):(u.width=E,u.height=o)}at&&K.setAttribute("data-main-rotation",z.rotation)}},(L,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var n=l(1);class g{constructor(){this.constructor===g&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(h,v){if(h<=0||v<=0)throw new Error("Invalid canvas size");const I=this._createCanvas(h,v);return{canvas:I,context:I.getContext("2d")}}reset(h,v,I){if(!h.canvas)throw new Error("Canvas is not specified");if(v<=0||I<=0)throw new Error("Invalid canvas size");h.canvas.width=v,h.canvas.height=I}destroy(h){if(!h.canvas)throw new Error("Canvas is not specified");h.canvas.width=0,h.canvas.height=0,h.canvas=null,h.context=null}_createCanvas(h,v){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=g;class T{constructor({baseUrl:h=null,isCompressed:v=!0}){this.constructor===T&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=h,this.isCompressed=v}async fetch({name:h}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!h)throw new Error("CMap name must be specified.");const v=this.baseUrl+h+(this.isCompressed?".bcmap":""),I=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(v,I).catch(y=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${v}`)})}_fetchData(h,v){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=T;class P{constructor({baseUrl:h=null}){this.constructor===P&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=h}async fetch({filename:h}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!h)throw new Error("Font filename must be specified.");const v=`${this.baseUrl}${h}`;return this._fetchData(v).catch(I=>{throw new Error(`Unable to load font data at: ${v}`)})}_fetchData(h){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=P;class D{constructor(){this.constructor===D&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(h,v,I=!1){if(h<=0||v<=0)throw new Error("Invalid SVG dimensions");const y=this._createSVG("svg:svg");return y.setAttribute("version","1.1"),I||(y.setAttribute("width",`${h}px`),y.setAttribute("height",`${v}px`)),y.setAttribute("preserveAspectRatio","none"),y.setAttribute("viewBox",`0 0 ${h} ${v}`),y}createElement(h){if(typeof h!="string")throw new Error("Invalid SVG element type");return this._createSVG(h)}_createSVG(h){(0,n.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=D},(L,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var n=l(1);const g=3285377520,T=4294901760,P=65535;class D{constructor(h){this.h1=h?h&4294967295:g,this.h2=h?h&4294967295:g}update(h){let v,I;if(typeof h=="string"){v=new Uint8Array(h.length*2),I=0;for(let b=0,k=h.length;b<k;b++){const M=h.charCodeAt(b);M<=255?v[I++]=M:(v[I++]=M>>>8,v[I++]=M&255)}}else if((0,n.isArrayBuffer)(h))v=h.slice(),I=v.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const y=I>>2,A=I-y*4,m=new Uint32Array(v.buffer,0,y);let f=0,r=0,c=this.h1,p=this.h2;const i=3432918353,a=461845907,e=i&P,s=a&P;for(let b=0;b<y;b++)b&1?(f=m[b],f=f*i&T|f*e&P,f=f<<15|f>>>17,f=f*a&T|f*s&P,c^=f,c=c<<13|c>>>19,c=c*5+3864292196):(r=m[b],r=r*i&T|r*e&P,r=r<<15|r>>>17,r=r*a&T|r*s&P,p^=r,p=p<<13|p>>>19,p=p*5+3864292196);switch(f=0,A){case 3:f^=v[y*4+2]<<16;case 2:f^=v[y*4+1]<<8;case 1:f^=v[y*4],f=f*i&T|f*e&P,f=f<<15|f>>>17,f=f*a&T|f*s&P,y&1?c^=f:p^=f}this.h1=c,this.h2=p}hexdigest(){let h=this.h1,v=this.h2;return h^=v>>>1,h=h*3981806797&T|h*36045&P,v=v*4283543511&T|((v<<16|h>>>16)*2950163797&T)>>>16,h^=v>>>1,h=h*444984403&T|h*60499&P,v=v*3301882366&T|((v<<16|h>>>16)*3120437893&T)>>>16,h^=v>>>1,(h>>>0).toString(16).padStart(8,"0")+(v>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=D},(L,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var n=l(1),g=l(10);class T{constructor({onUnsupportedFeature:w,ownerDocument:h=globalThis.document,styleElement:v=null}){this._onUnsupportedFeature=w,this._document=h,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(w){this.nativeFontFaces.push(w),this._document.fonts.add(w)}insertRule(w){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const h=this.styleElement.sheet;h.insertRule(w,h.cssRules.length)}clear(){for(const w of this.nativeFontFaces)this._document.fonts.delete(w);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(w){if(w.attached||w.missingFile)return;if(w.attached=!0,this.isFontLoadingAPISupported){const v=w.createNativeFontFace();if(v){this.addNativeFontFace(v);try{await v.loaded}catch(I){throw this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,n.warn)(`Failed to load font '${v.family}': '${I}'.`),w.disableFontFace=!0,I}}return}const h=w.createFontFaceRule();if(h){if(this.insertRule(h),this.isSyncFontLoadingSupported)return;await new Promise(v=>{const I=this._queueLoadingCallback(v);this._prepareFontLoadEvent(w,I)})}}get isFontLoadingAPISupported(){var h;const w=!!((h=this._document)!=null&&h.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",w)}get isSyncFontLoadingSupported(){let w=!1;return(g.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(w=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",w)}_queueLoadingCallback(w){function h(){for((0,n.assert)(!I.done,"completeRequest() cannot be called twice."),I.done=!0;v.length>0&&v[0].done;){const y=v.shift();setTimeout(y.callback,0)}}const{loadingRequests:v}=this,I={done:!1,complete:h,callback:w};return v.push(I),I}get _loadTestFont(){const w=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",w)}_prepareFontLoadEvent(w,h){function v(S,G){return S.charCodeAt(G)<<24|S.charCodeAt(G+1)<<16|S.charCodeAt(G+2)<<8|S.charCodeAt(G+3)&255}function I(S,G,ht,nt){const rt=S.substring(0,G),K=S.substring(G+ht);return rt+nt+K}let y,A;const m=this._document.createElement("canvas");m.width=1,m.height=1;const f=m.getContext("2d");let r=0;function c(S,G){if(++r>30){(0,n.warn)("Load test font never loaded."),G();return}if(f.font="30px "+S,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){G();return}setTimeout(c.bind(null,S,G))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let i=this._loadTestFont;i=I(i,976,p.length,p);const e=16,s=1482184792;let b=v(i,e);for(y=0,A=p.length-3;y<A;y+=4)b=b-s+v(p,y)|0;y<p.length&&(b=b-s+v(p+"XXX",y)|0),i=I(i,e,4,(0,n.string32)(b));const k=`url(data:font/opentype;base64,${btoa(i)});`,M=`@font-face {font-family:"${p}";src:${k}}`;this.insertRule(M);const q=this._document.createElement("div");q.style.visibility="hidden",q.style.width=q.style.height="10px",q.style.position="absolute",q.style.top=q.style.left="0px";for(const S of[w.loadedName,p]){const G=this._document.createElement("span");G.textContent="Hi",G.style.fontFamily=S,q.append(G)}this._document.body.append(q),c(p,()=>{q.remove(),h.complete()})}}t.FontLoader=T;class P{constructor(w,{isEvalSupported:h=!0,disableFontFace:v=!1,ignoreErrors:I=!1,onUnsupportedFeature:y,fontRegistry:A=null}){this.compiledGlyphs=Object.create(null);for(const m in w)this[m]=w[m];this.isEvalSupported=h!==!1,this.disableFontFace=v===!0,this.ignoreErrors=I===!0,this._onUnsupportedFeature=y,this.fontRegistry=A}createNativeFontFace(){var h;if(!this.data||this.disableFontFace)return null;let w;if(!this.cssFontInfo)w=new FontFace(this.loadedName,this.data,{});else{const v={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(v.style=`oblique ${this.cssFontInfo.italicAngle}deg`),w=new FontFace(this.cssFontInfo.fontFamily,this.data,v)}return(h=this.fontRegistry)==null||h.registerFont(this),w}createFontFaceRule(){var I;if(!this.data||this.disableFontFace)return null;const w=(0,n.bytesToString)(this.data),h=`url(data:${this.mimetype};base64,${btoa(w)});`;let v;if(!this.cssFontInfo)v=`@font-face {font-family:"${this.loadedName}";src:${h}}`;else{let y=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(y+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),v=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${y}src:${h}}`}return(I=this.fontRegistry)==null||I.registerFont(this,h),v}getPathGenerator(w,h){if(this.compiledGlyphs[h]!==void 0)return this.compiledGlyphs[h];let v;try{v=w.get(this.loadedName+"_path_"+h)}catch(I){if(!this.ignoreErrors)throw I;return this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,n.warn)(`getPathGenerator - ignoring character: "${I}".`),this.compiledGlyphs[h]=function(y,A){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const I=[];for(const y of v){const A=y.args!==void 0?y.args.join(","):"";I.push("c.",y.cmd,"(",A,`);
`)}return this.compiledGlyphs[h]=new Function("c","size",I.join(""))}return this.compiledGlyphs[h]=function(I,y){for(const A of v)A.cmd==="scale"&&(A.args=[y,-y]),I[A.cmd].apply(I,A.args)}}}t.FontFaceObject=P},(L,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const l=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=l},(L,t,l)=>{var X,ue;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var n=l(1),g=l(6),T=l(12),P=l(13);const D=16,w=100,h=4096,v=15,I=10,y=1e3,A=16;function m(N,u){if(N._removeMirroring)throw new Error("Context is already forwarding operations.");N.__originalSave=N.save,N.__originalRestore=N.restore,N.__originalRotate=N.rotate,N.__originalScale=N.scale,N.__originalTranslate=N.translate,N.__originalTransform=N.transform,N.__originalSetTransform=N.setTransform,N.__originalResetTransform=N.resetTransform,N.__originalClip=N.clip,N.__originalMoveTo=N.moveTo,N.__originalLineTo=N.lineTo,N.__originalBezierCurveTo=N.bezierCurveTo,N.__originalRect=N.rect,N.__originalClosePath=N.closePath,N.__originalBeginPath=N.beginPath,N._removeMirroring=()=>{N.save=N.__originalSave,N.restore=N.__originalRestore,N.rotate=N.__originalRotate,N.scale=N.__originalScale,N.translate=N.__originalTranslate,N.transform=N.__originalTransform,N.setTransform=N.__originalSetTransform,N.resetTransform=N.__originalResetTransform,N.clip=N.__originalClip,N.moveTo=N.__originalMoveTo,N.lineTo=N.__originalLineTo,N.bezierCurveTo=N.__originalBezierCurveTo,N.rect=N.__originalRect,N.closePath=N.__originalClosePath,N.beginPath=N.__originalBeginPath,delete N._removeMirroring},N.save=function(){u.save(),this.__originalSave()},N.restore=function(){u.restore(),this.__originalRestore()},N.translate=function(E,R){u.translate(E,R),this.__originalTranslate(E,R)},N.scale=function(E,R){u.scale(E,R),this.__originalScale(E,R)},N.transform=function(E,R,O,B,W,Y){u.transform(E,R,O,B,W,Y),this.__originalTransform(E,R,O,B,W,Y)},N.setTransform=function(E,R,O,B,W,Y){u.setTransform(E,R,O,B,W,Y),this.__originalSetTransform(E,R,O,B,W,Y)},N.resetTransform=function(){u.resetTransform(),this.__originalResetTransform()},N.rotate=function(E){u.rotate(E),this.__originalRotate(E)},N.clip=function(E){u.clip(E),this.__originalClip(E)},N.moveTo=function(o,E){u.moveTo(o,E),this.__originalMoveTo(o,E)},N.lineTo=function(o,E){u.lineTo(o,E),this.__originalLineTo(o,E)},N.bezierCurveTo=function(o,E,R,O,B,W){u.bezierCurveTo(o,E,R,O,B,W),this.__originalBezierCurveTo(o,E,R,O,B,W)},N.rect=function(o,E,R,O){u.rect(o,E,R,O),this.__originalRect(o,E,R,O)},N.closePath=function(){u.closePath(),this.__originalClosePath()},N.beginPath=function(){u.beginPath(),this.__originalBeginPath()}}class f{constructor(u){this.canvasFactory=u,this.cache=Object.create(null)}getCanvas(u,o,E){let R;return this.cache[u]!==void 0?(R=this.cache[u],this.canvasFactory.reset(R,o,E)):(R=this.canvasFactory.create(o,E),this.cache[u]=R),R}delete(u){delete this.cache[u]}clear(){for(const u in this.cache){const o=this.cache[u];this.canvasFactory.destroy(o),delete this.cache[u]}}}function r(N,u,o,E,R,O,B,W,Y,Q){const[J,st,Z,d,_,x]=(0,g.getCurrentTransform)(N);if(st===0&&Z===0){const $=B*J+_,ot=Math.round($),dt=W*d+x,ft=Math.round(dt),et=(B+Y)*J+_,_t=Math.abs(Math.round(et)-ot)||1,it=(W+Q)*d+x,mt=Math.abs(Math.round(it)-ft)||1;return N.setTransform(Math.sign(J),0,0,Math.sign(d),ot,ft),N.drawImage(u,o,E,R,O,0,0,_t,mt),N.setTransform(J,st,Z,d,_,x),[_t,mt]}if(J===0&&d===0){const $=W*Z+_,ot=Math.round($),dt=B*st+x,ft=Math.round(dt),et=(W+Q)*Z+_,_t=Math.abs(Math.round(et)-ot)||1,it=(B+Y)*st+x,mt=Math.abs(Math.round(it)-ft)||1;return N.setTransform(0,Math.sign(st),Math.sign(Z),0,ot,ft),N.drawImage(u,o,E,R,O,0,0,mt,_t),N.setTransform(J,st,Z,d,_,x),[mt,_t]}N.drawImage(u,o,E,R,O,B,W,Y,Q);const j=Math.hypot(J,st),F=Math.hypot(Z,d);return[j*Y,F*Q]}function c(N){const{width:u,height:o}=N;if(u>y||o>y)return null;const E=1e3,R=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),O=u+1;let B=new Uint8Array(O*(o+1)),W,Y,Q;const J=u+7&-8;let st=new Uint8Array(J*o),Z=0;for(const F of N.data){let $=128;for(;$>0;)st[Z++]=F&$?0:255,$>>=1}let d=0;for(Z=0,st[Z]!==0&&(B[0]=1,++d),Y=1;Y<u;Y++)st[Z]!==st[Z+1]&&(B[Y]=st[Z]?2:1,++d),Z++;for(st[Z]!==0&&(B[Y]=2,++d),W=1;W<o;W++){Z=W*J,Q=W*O,st[Z-J]!==st[Z]&&(B[Q]=st[Z]?1:8,++d);let F=(st[Z]?4:0)+(st[Z-J]?8:0);for(Y=1;Y<u;Y++)F=(F>>2)+(st[Z+1]?4:0)+(st[Z-J+1]?8:0),R[F]&&(B[Q+Y]=R[F],++d),Z++;if(st[Z-J]!==st[Z]&&(B[Q+Y]=st[Z]?2:4,++d),d>E)return null}for(Z=J*(o-1),Q=W*O,st[Z]!==0&&(B[Q]=8,++d),Y=1;Y<u;Y++)st[Z]!==st[Z+1]&&(B[Q+Y]=st[Z]?4:8,++d),Z++;if(st[Z]!==0&&(B[Q+Y]=4,++d),d>E)return null;const _=new Int32Array([0,O,-1,0,-O,0,0,0,1]),x=new Path2D;for(W=0;d&&W<=o;W++){let F=W*O;const $=F+u;for(;F<$&&!B[F];)F++;if(F===$)continue;x.moveTo(F%O,W);const ot=F;let dt=B[F];do{const ft=_[dt];do F+=ft;while(!B[F]);const et=B[F];et!==5&&et!==10?(dt=et,B[F]=0):(dt=et&51*dt>>4,B[F]&=dt>>2|dt<<2),x.lineTo(F%O,F/O|0),B[F]||--d}while(ot!==F);--W}return st=null,B=null,function(F){F.save(),F.scale(1/u,-1/o),F.translate(0,-o),F.fill(x),F.beginPath(),F.restore()}}class p{constructor(u,o){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,u,o])}clone(){const u=Object.create(this);return u.clipBox=this.clipBox.slice(),u}setCurrentPoint(u,o){this.x=u,this.y=o}updatePathMinMax(u,o,E){[o,E]=n.Util.applyTransform([o,E],u),this.minX=Math.min(this.minX,o),this.minY=Math.min(this.minY,E),this.maxX=Math.max(this.maxX,o),this.maxY=Math.max(this.maxY,E)}updateRectMinMax(u,o){const E=n.Util.applyTransform(o,u),R=n.Util.applyTransform(o.slice(2),u);this.minX=Math.min(this.minX,E[0],R[0]),this.minY=Math.min(this.minY,E[1],R[1]),this.maxX=Math.max(this.maxX,E[0],R[0]),this.maxY=Math.max(this.maxY,E[1],R[1])}updateScalingPathMinMax(u,o){n.Util.scaleMinMax(u,o),this.minX=Math.min(this.minX,o[0]),this.maxX=Math.max(this.maxX,o[1]),this.minY=Math.min(this.minY,o[2]),this.maxY=Math.max(this.maxY,o[3])}updateCurvePathMinMax(u,o,E,R,O,B,W,Y,Q,J){const st=n.Util.bezierBoundingBox(o,E,R,O,B,W,Y,Q);if(J){J[0]=Math.min(J[0],st[0],st[2]),J[1]=Math.max(J[1],st[0],st[2]),J[2]=Math.min(J[2],st[1],st[3]),J[3]=Math.max(J[3],st[1],st[3]);return}this.updateRectMinMax(u,st)}getPathBoundingBox(u=T.PathType.FILL,o=null){const E=[this.minX,this.minY,this.maxX,this.maxY];if(u===T.PathType.STROKE){o||(0,n.unreachable)("Stroke bounding box must include transform.");const R=n.Util.singularValueDecompose2dScale(o),O=R[0]*this.lineWidth/2,B=R[1]*this.lineWidth/2;E[0]-=O,E[1]-=B,E[2]+=O,E[3]+=B}return E}updateClipFromPath(){const u=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(u||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(u){this.clipBox=u,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(u=T.PathType.FILL,o=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(u,o))}}function i(N,u,o=null){if(typeof ImageData<"u"&&u instanceof ImageData){N.putImageData(u,0,0);return}const E=u.height,R=u.width,O=E%A,B=(E-O)/A,W=O===0?B:B+1,Y=N.createImageData(R,A);let Q=0,J;const st=u.data,Z=Y.data;let d,_,x,j,F,$,ot,dt;if(o)switch(o.length){case 1:F=o[0],$=o[0],ot=o[0],dt=o[0];break;case 4:F=o[0],$=o[1],ot=o[2],dt=o[3];break}if(u.kind===n.ImageKind.GRAYSCALE_1BPP){const ft=st.byteLength,et=new Uint32Array(Z.buffer,0,Z.byteLength>>2),_t=et.length,it=R+7>>3;let mt=4294967295,bt=n.FeatureTest.isLittleEndian?4278190080:255;for(dt&&dt[0]===255&&dt[255]===0&&([mt,bt]=[bt,mt]),d=0;d<W;d++){for(x=d<B?A:O,J=0,_=0;_<x;_++){const St=ft-Q;let wt=0;const Et=St>it?R:St*8-7,U=Et&-8;let H=0,V=0;for(;wt<U;wt+=8)V=st[Q++],et[J++]=V&128?mt:bt,et[J++]=V&64?mt:bt,et[J++]=V&32?mt:bt,et[J++]=V&16?mt:bt,et[J++]=V&8?mt:bt,et[J++]=V&4?mt:bt,et[J++]=V&2?mt:bt,et[J++]=V&1?mt:bt;for(;wt<Et;wt++)H===0&&(V=st[Q++],H=128),et[J++]=V&H?mt:bt,H>>=1}for(;J<_t;)et[J++]=0;N.putImageData(Y,0,d*A)}}else if(u.kind===n.ImageKind.RGBA_32BPP){const ft=!!(F||$||ot);for(_=0,j=R*A*4,d=0;d<B;d++){if(Z.set(st.subarray(Q,Q+j)),Q+=j,ft)for(let et=0;et<j;et+=4)F&&(Z[et+0]=F[Z[et+0]]),$&&(Z[et+1]=$[Z[et+1]]),ot&&(Z[et+2]=ot[Z[et+2]]);N.putImageData(Y,0,_),_+=A}if(d<W){if(j=R*O*4,Z.set(st.subarray(Q,Q+j)),ft)for(let et=0;et<j;et+=4)F&&(Z[et+0]=F[Z[et+0]]),$&&(Z[et+1]=$[Z[et+1]]),ot&&(Z[et+2]=ot[Z[et+2]]);N.putImageData(Y,0,_)}}else if(u.kind===n.ImageKind.RGB_24BPP){const ft=!!(F||$||ot);for(x=A,j=R*x,d=0;d<W;d++){for(d>=B&&(x=O,j=R*x),J=0,_=j;_--;)Z[J++]=st[Q++],Z[J++]=st[Q++],Z[J++]=st[Q++],Z[J++]=255;if(ft)for(let et=0;et<J;et+=4)F&&(Z[et+0]=F[Z[et+0]]),$&&(Z[et+1]=$[Z[et+1]]),ot&&(Z[et+2]=ot[Z[et+2]]);N.putImageData(Y,0,d*A)}}else throw new Error(`bad image kind: ${u.kind}`)}function a(N,u){if(u.bitmap){N.drawImage(u.bitmap,0,0);return}const o=u.height,E=u.width,R=o%A,O=(o-R)/A,B=R===0?O:O+1,W=N.createImageData(E,A);let Y=0;const Q=u.data,J=W.data;for(let st=0;st<B;st++){const Z=st<O?A:R;({srcPos:Y}=(0,P.applyMaskImageData)({src:Q,srcPos:Y,dest:J,width:E,height:Z})),N.putImageData(W,0,st*A)}}function e(N,u){const o=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(const E of o)N[E]!==void 0&&(u[E]=N[E]);N.setLineDash!==void 0&&(u.setLineDash(N.getLineDash()),u.lineDashOffset=N.lineDashOffset)}function s(N,u){N.strokeStyle=N.fillStyle=u||"#000000",N.fillRule="nonzero",N.globalAlpha=1,N.lineWidth=1,N.lineCap="butt",N.lineJoin="miter",N.miterLimit=10,N.globalCompositeOperation="source-over",N.font="10px sans-serif",N.setLineDash!==void 0&&(N.setLineDash([]),N.lineDashOffset=0)}function b(N,u,o,E){const R=N.length;for(let O=3;O<R;O+=4){const B=N[O];if(B===0)N[O-3]=u,N[O-2]=o,N[O-1]=E;else if(B<255){const W=255-B;N[O-3]=N[O-3]*B+u*W>>8,N[O-2]=N[O-2]*B+o*W>>8,N[O-1]=N[O-1]*B+E*W>>8}}}function k(N,u,o){const E=N.length,R=1/255;for(let O=3;O<E;O+=4){const B=o?o[N[O]]:N[O];u[O]=u[O]*B*R|0}}function M(N,u,o){const E=N.length;for(let R=3;R<E;R+=4){const O=N[R-3]*77+N[R-2]*152+N[R-1]*28;u[R]=o?u[R]*o[O>>8]>>8:u[R]*O>>16}}function q(N,u,o,E,R,O,B,W,Y,Q,J){const st=!!O,Z=st?O[0]:0,d=st?O[1]:0,_=st?O[2]:0;let x;R==="Luminosity"?x=M:x=k;const F=Math.min(E,Math.ceil(1048576/o));for(let $=0;$<E;$+=F){const ot=Math.min(F,E-$),dt=N.getImageData(W-Q,$+(Y-J),o,ot),ft=u.getImageData(W,$+Y,o,ot);st&&b(dt.data,Z,d,_),x(dt.data,ft.data,B),u.putImageData(ft,W,$+Y)}}function S(N,u,o,E){const R=E[0],O=E[1],B=E[2]-R,W=E[3]-O;B===0||W===0||(q(u.context,o,B,W,u.subtype,u.backdrop,u.transferMap,R,O,u.offsetX,u.offsetY),N.save(),N.globalAlpha=1,N.globalCompositeOperation="source-over",N.setTransform(1,0,0,1,0,0),N.drawImage(o.canvas,0,0),N.restore())}function G(N,u){const o=n.Util.singularValueDecompose2dScale(N);o[0]=Math.fround(o[0]),o[1]=Math.fround(o[1]);const E=Math.fround((globalThis.devicePixelRatio||1)*g.PixelsPerInch.PDF_TO_CSS_UNITS);return u!==void 0?u:o[0]<=E||o[1]<=E}const ht=["butt","round","square"],nt=["miter","round","bevel"],rt={},K={},ct=class{constructor(u,o,E,R,{optionalContentConfig:O,markedContentStack:B=null},W,Y){lt(this,X);this.ctx=u,this.current=new p(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=o,this.objs=E,this.canvasFactory=R,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=B||[],this.optionalContentConfig=O,this.cachedCanvases=new f(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=W,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(Y==null?void 0:Y.background)||null,this.foregroundColor=(Y==null?void 0:Y.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(u,o=null){return typeof u=="string"?u.startsWith("g_")?this.commonObjs.get(u):this.objs.get(u):o}beginDrawing({transform:u,viewport:o,transparency:E=!1,background:R=null}){const O=this.ctx.canvas.width,B=this.ctx.canvas.height,W=R||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const Y=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const Q=this.backgroundColor=this.ctx.fillStyle;let J=!0,st=W;if(this.ctx.fillStyle=W,st=this.ctx.fillStyle,J=typeof st=="string"&&/^#[0-9A-Fa-f]{6}$/.test(st),Y==="#000000"&&Q==="#ffffff"||Y===Q||!J)this.foregroundColor=this.backgroundColor=null;else{const[Z,d,_]=(0,g.getRGB)(st),x=F=>(F/=255,F<=.03928?F/12.92:((F+.055)/1.055)**2.4),j=Math.round(.2126*x(Z)+.7152*x(d)+.0722*x(_));this.selectColor=(F,$,ot)=>{const dt=.2126*x(F)+.7152*x($)+.0722*x(ot);return Math.round(dt)===j?Q:Y}}}if(this.ctx.fillStyle=this.backgroundColor||W,this.ctx.fillRect(0,0,O,B),this.ctx.restore(),E){const Y=this.cachedCanvases.getCanvas("transparent",O,B);this.compositeCtx=this.ctx,this.transparentCanvas=Y.canvas,this.ctx=Y.context,this.ctx.save(),this.ctx.transform(...(0,g.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),s(this.ctx,this.foregroundColor),u&&(this.ctx.transform(...u),this.outputScaleX=u[0],this.outputScaleY=u[0]),this.ctx.transform(...o.transform),this.viewportScale=o.scale,this.baseTransform=(0,g.getCurrentTransform)(this.ctx)}executeOperatorList(u,o,E,R){const O=u.argsArray,B=u.fnArray;let W=o||0;const Y=O.length;if(Y===W)return W;const Q=Y-W>I&&typeof E=="function",J=Q?Date.now()+v:0;let st=0;const Z=this.commonObjs,d=this.objs;let _;for(;;){if(R!==void 0&&W===R.nextBreakPoint)return R.breakIt(W,E),W;if(_=B[W],_!==n.OPS.dependency)this[_].apply(this,O[W]);else for(const x of O[W]){const j=x.startsWith("g_")?Z:d;if(!j.has(x))return j.get(x,E),W}if(W++,W===Y)return W;if(Q&&++st>I){if(Date.now()>J)return E(),W;st=0}}}endDrawing(){ut(this,X,ue).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const u of this._cachedBitmapsMap.values()){for(const o of u.values())typeof HTMLCanvasElement<"u"&&o instanceof HTMLCanvasElement&&(o.width=o.height=0);u.clear()}this._cachedBitmapsMap.clear()}_scaleImage(u,o){const E=u.width,R=u.height;let O=Math.max(Math.hypot(o[0],o[1]),1),B=Math.max(Math.hypot(o[2],o[3]),1),W=E,Y=R,Q="prescale1",J,st;for(;O>2&&W>1||B>2&&Y>1;){let Z=W,d=Y;O>2&&W>1&&(Z=Math.ceil(W/2),O/=W/Z),B>2&&Y>1&&(d=Math.ceil(Y/2),B/=Y/d),J=this.cachedCanvases.getCanvas(Q,Z,d),st=J.context,st.clearRect(0,0,Z,d),st.drawImage(u,0,0,W,Y,0,0,Z,d),u=J.canvas,W=Z,Y=d,Q=Q==="prescale1"?"prescale2":"prescale1"}return{img:u,paintWidth:W,paintHeight:Y}}_createMaskCanvas(u){const o=this.ctx,{width:E,height:R}=u,O=this.current.fillColor,B=this.current.patternFill,W=(0,g.getCurrentTransform)(o);let Y,Q,J,st;if((u.bitmap||u.data)&&u.count>1){const _t=u.bitmap||u.data.buffer;Q=JSON.stringify(B?W:[W.slice(0,4),O]),Y=this._cachedBitmapsMap.get(_t),Y||(Y=new Map,this._cachedBitmapsMap.set(_t,Y));const it=Y.get(Q);if(it&&!B){const mt=Math.round(Math.min(W[0],W[2])+W[4]),bt=Math.round(Math.min(W[1],W[3])+W[5]);return{canvas:it,offsetX:mt,offsetY:bt}}J=it}J||(st=this.cachedCanvases.getCanvas("maskCanvas",E,R),a(st.context,u));let Z=n.Util.transform(W,[1/E,0,0,-1/R,0,0]);Z=n.Util.transform(Z,[1,0,0,1,0,-R]);const d=n.Util.applyTransform([0,0],Z),_=n.Util.applyTransform([E,R],Z),x=n.Util.normalizeRect([d[0],d[1],_[0],_[1]]),j=Math.round(x[2]-x[0])||1,F=Math.round(x[3]-x[1])||1,$=this.cachedCanvases.getCanvas("fillCanvas",j,F),ot=$.context,dt=Math.min(d[0],_[0]),ft=Math.min(d[1],_[1]);ot.translate(-dt,-ft),ot.transform(...Z),J||(J=this._scaleImage(st.canvas,(0,g.getCurrentTransformInverse)(ot)),J=J.img,Y&&B&&Y.set(Q,J)),ot.imageSmoothingEnabled=G((0,g.getCurrentTransform)(ot),u.interpolate),r(ot,J,0,0,J.width,J.height,0,0,E,R),ot.globalCompositeOperation="source-in";const et=n.Util.transform((0,g.getCurrentTransformInverse)(ot),[1,0,0,1,-dt,-ft]);return ot.fillStyle=B?O.getPattern(o,this,et,T.PathType.FILL):O,ot.fillRect(0,0,E,R),Y&&!B&&(this.cachedCanvases.delete("fillCanvas"),Y.set(Q,$.canvas)),{canvas:$.canvas,offsetX:Math.round(dt),offsetY:Math.round(ft)}}setLineWidth(u){u!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=u,this.ctx.lineWidth=u}setLineCap(u){this.ctx.lineCap=ht[u]}setLineJoin(u){this.ctx.lineJoin=nt[u]}setMiterLimit(u){this.ctx.miterLimit=u}setDash(u,o){const E=this.ctx;E.setLineDash!==void 0&&(E.setLineDash(u),E.lineDashOffset=o)}setRenderingIntent(u){}setFlatness(u){}setGState(u){for(const[o,E]of u)switch(o){case"LW":this.setLineWidth(E);break;case"LC":this.setLineCap(E);break;case"LJ":this.setLineJoin(E);break;case"ML":this.setMiterLimit(E);break;case"D":this.setDash(E[0],E[1]);break;case"RI":this.setRenderingIntent(E);break;case"FL":this.setFlatness(E);break;case"Font":this.setFont(E[0],E[1]);break;case"CA":this.current.strokeAlpha=E;break;case"ca":this.current.fillAlpha=E,this.ctx.globalAlpha=E;break;case"BM":this.ctx.globalCompositeOperation=E;break;case"SMask":this.current.activeSMask=E?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=E}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const u=this.inSMaskMode;this.current.activeSMask&&!u?this.beginSMaskMode():!this.current.activeSMask&&u&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const u=this.ctx.canvas.width,o=this.ctx.canvas.height,E="smaskGroupAt"+this.groupLevel,R=this.cachedCanvases.getCanvas(E,u,o);this.suspendedCtx=this.ctx,this.ctx=R.context;const O=this.ctx;O.setTransform(...(0,g.getCurrentTransform)(this.suspendedCtx)),e(this.suspendedCtx,O),m(O,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),e(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(u){if(!this.current.activeSMask)return;u?(u[0]=Math.floor(u[0]),u[1]=Math.floor(u[1]),u[2]=Math.ceil(u[2]),u[3]=Math.ceil(u[3])):u=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const o=this.current.activeSMask,E=this.suspendedCtx;S(E,o,this.ctx,u),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(e(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const u=this.current;this.stateStack.push(u),this.current=u.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),e(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(u,o,E,R,O,B){this.ctx.transform(u,o,E,R,O,B),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(u,o,E){const R=this.ctx,O=this.current;let B=O.x,W=O.y,Y,Q;const J=(0,g.getCurrentTransform)(R),st=J[0]===0&&J[3]===0||J[1]===0&&J[2]===0,Z=st?E.slice(0):null;for(let d=0,_=0,x=u.length;d<x;d++)switch(u[d]|0){case n.OPS.rectangle:B=o[_++],W=o[_++];const j=o[_++],F=o[_++],$=B+j,ot=W+F;R.moveTo(B,W),j===0||F===0?R.lineTo($,ot):(R.lineTo($,W),R.lineTo($,ot),R.lineTo(B,ot)),st||O.updateRectMinMax(J,[B,W,$,ot]),R.closePath();break;case n.OPS.moveTo:B=o[_++],W=o[_++],R.moveTo(B,W),st||O.updatePathMinMax(J,B,W);break;case n.OPS.lineTo:B=o[_++],W=o[_++],R.lineTo(B,W),st||O.updatePathMinMax(J,B,W);break;case n.OPS.curveTo:Y=B,Q=W,B=o[_+4],W=o[_+5],R.bezierCurveTo(o[_],o[_+1],o[_+2],o[_+3],B,W),O.updateCurvePathMinMax(J,Y,Q,o[_],o[_+1],o[_+2],o[_+3],B,W,Z),_+=6;break;case n.OPS.curveTo2:Y=B,Q=W,R.bezierCurveTo(B,W,o[_],o[_+1],o[_+2],o[_+3]),O.updateCurvePathMinMax(J,Y,Q,B,W,o[_],o[_+1],o[_+2],o[_+3],Z),B=o[_+2],W=o[_+3],_+=4;break;case n.OPS.curveTo3:Y=B,Q=W,B=o[_+2],W=o[_+3],R.bezierCurveTo(o[_],o[_+1],B,W,B,W),O.updateCurvePathMinMax(J,Y,Q,o[_],o[_+1],B,W,B,W,Z),_+=4;break;case n.OPS.closePath:R.closePath();break}st&&O.updateScalingPathMinMax(J,Z),O.setCurrentPoint(B,W)}closePath(){this.ctx.closePath()}stroke(u=!0){const o=this.ctx,E=this.current.strokeColor;o.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof E=="object"&&(E!=null&&E.getPattern)?(o.save(),o.strokeStyle=E.getPattern(o,this,(0,g.getCurrentTransformInverse)(o),T.PathType.STROKE),this.rescaleAndStroke(!1),o.restore()):this.rescaleAndStroke(!0)),u&&this.consumePath(this.current.getClippedPathBoundingBox()),o.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(u=!0){const o=this.ctx,E=this.current.fillColor,R=this.current.patternFill;let O=!1;R&&(o.save(),o.fillStyle=E.getPattern(o,this,(0,g.getCurrentTransformInverse)(o),T.PathType.FILL),O=!0);const B=this.current.getClippedPathBoundingBox();this.contentVisible&&B!==null&&(this.pendingEOFill?(o.fill("evenodd"),this.pendingEOFill=!1):o.fill()),O&&o.restore(),u&&this.consumePath(B)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=rt}eoClip(){this.pendingClip=K}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const u=this.pendingTextPaths,o=this.ctx;if(u===void 0){o.beginPath();return}o.save(),o.beginPath();for(const E of u)o.setTransform(...E.transform),o.translate(E.x,E.y),E.addToPath(o,E.fontSize);o.restore(),o.clip(),o.beginPath(),delete this.pendingTextPaths}setCharSpacing(u){this.current.charSpacing=u}setWordSpacing(u){this.current.wordSpacing=u}setHScale(u){this.current.textHScale=u/100}setLeading(u){this.current.leading=-u}setFont(u,o){const E=this.commonObjs.get(u),R=this.current;if(!E)throw new Error(`Can't find font for ${u}`);if(R.fontMatrix=E.fontMatrix||n.FONT_IDENTITY_MATRIX,(R.fontMatrix[0]===0||R.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+u),o<0?(o=-o,R.fontDirection=-1):R.fontDirection=1,this.current.font=E,this.current.fontSize=o,E.isType3Font)return;const O=E.loadedName||"sans-serif";let B="normal";E.black?B="900":E.bold&&(B="bold");const W=E.italic?"italic":"normal",Y=`"${O}", ${E.fallbackName}`;let Q=o;o<D?Q=D:o>w&&(Q=w),this.current.fontSizeScale=o/Q,this.ctx.font=`${W} ${B} ${Q}px ${Y}`}setTextRenderingMode(u){this.current.textRenderingMode=u}setTextRise(u){this.current.textRise=u}moveText(u,o){this.current.x=this.current.lineX+=u,this.current.y=this.current.lineY+=o}setLeadingMoveText(u,o){this.setLeading(-o),this.moveText(u,o)}setTextMatrix(u,o,E,R,O,B){this.current.textMatrix=[u,o,E,R,O,B],this.current.textMatrixScale=Math.hypot(u,o),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(u,o,E,R){const O=this.ctx,B=this.current,W=B.font,Y=B.textRenderingMode,Q=B.fontSize/B.fontSizeScale,J=Y&n.TextRenderingMode.FILL_STROKE_MASK,st=!!(Y&n.TextRenderingMode.ADD_TO_PATH_FLAG),Z=B.patternFill&&!W.missingFile;let d;(W.disableFontFace||st||Z)&&(d=W.getPathGenerator(this.commonObjs,u)),W.disableFontFace||Z?(O.save(),O.translate(o,E),O.beginPath(),d(O,Q),R&&O.setTransform(...R),(J===n.TextRenderingMode.FILL||J===n.TextRenderingMode.FILL_STROKE)&&O.fill(),(J===n.TextRenderingMode.STROKE||J===n.TextRenderingMode.FILL_STROKE)&&O.stroke(),O.restore()):((J===n.TextRenderingMode.FILL||J===n.TextRenderingMode.FILL_STROKE)&&O.fillText(u,o,E),(J===n.TextRenderingMode.STROKE||J===n.TextRenderingMode.FILL_STROKE)&&O.strokeText(u,o,E)),st&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,g.getCurrentTransform)(O),x:o,y:E,fontSize:Q,addToPath:d})}get isFontSubpixelAAEnabled(){const{context:u}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);u.scale(1.5,1),u.fillText("I",0,10);const o=u.getImageData(0,0,10,10).data;let E=!1;for(let R=3;R<o.length;R+=4)if(o[R]>0&&o[R]<255){E=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",E)}showText(u){const o=this.current,E=o.font;if(E.isType3Font)return this.showType3Text(u);const R=o.fontSize;if(R===0)return;const O=this.ctx,B=o.fontSizeScale,W=o.charSpacing,Y=o.wordSpacing,Q=o.fontDirection,J=o.textHScale*Q,st=u.length,Z=E.vertical,d=Z?1:-1,_=E.defaultVMetrics,x=R*o.fontMatrix[0],j=o.textRenderingMode===n.TextRenderingMode.FILL&&!E.disableFontFace&&!o.patternFill;O.save(),O.transform(...o.textMatrix),O.translate(o.x,o.y+o.textRise),Q>0?O.scale(J,-1):O.scale(J,1);let F;if(o.patternFill){O.save();const et=o.fillColor.getPattern(O,this,(0,g.getCurrentTransformInverse)(O),T.PathType.FILL);F=(0,g.getCurrentTransform)(O),O.restore(),O.fillStyle=et}let $=o.lineWidth;const ot=o.textMatrixScale;if(ot===0||$===0){const et=o.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(et===n.TextRenderingMode.STROKE||et===n.TextRenderingMode.FILL_STROKE)&&($=this.getSinglePixelWidth())}else $/=ot;if(B!==1&&(O.scale(B,B),$/=B),O.lineWidth=$,E.isInvalidPDFjsFont){const et=[];let _t=0;for(const it of u)et.push(it.unicode),_t+=it.width;O.fillText(et.join(""),0,0),o.x+=_t*x*J,O.restore(),this.compose();return}let dt=0,ft;for(ft=0;ft<st;++ft){const et=u[ft];if(typeof et=="number"){dt+=d*et*R/1e3;continue}let _t=!1;const it=(et.isSpace?Y:0)+W,mt=et.fontChar,bt=et.accent;let St,wt,Et=et.width;if(Z){const H=et.vmetric||_,V=-(et.vmetric?H[1]:Et*.5)*x,gt=H[2]*x;Et=H?-H[0]:Et,St=V/B,wt=(dt+gt)/B}else St=dt/B,wt=0;if(E.remeasure&&Et>0){const H=O.measureText(mt).width*1e3/R*B;if(Et<H&&this.isFontSubpixelAAEnabled){const V=Et/H;_t=!0,O.save(),O.scale(V,1),St/=V}else Et!==H&&(St+=(Et-H)/2e3*R/B)}if(this.contentVisible&&(et.isInFont||E.missingFile)){if(j&&!bt)O.fillText(mt,St,wt);else if(this.paintChar(mt,St,wt,F),bt){const H=St+R*bt.offset.x/B,V=wt-R*bt.offset.y/B;this.paintChar(bt.fontChar,H,V,F)}}let U;Z?U=Et*x-it*Q:U=Et*x+it*Q,dt+=U,_t&&O.restore()}Z?o.y-=dt:o.x+=dt*J,O.restore(),this.compose()}showType3Text(u){const o=this.ctx,E=this.current,R=E.font,O=E.fontSize,B=E.fontDirection,W=R.vertical?1:-1,Y=E.charSpacing,Q=E.wordSpacing,J=E.textHScale*B,st=E.fontMatrix||n.FONT_IDENTITY_MATRIX,Z=u.length,d=E.textRenderingMode===n.TextRenderingMode.INVISIBLE;let _,x,j,F;if(!(d||O===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,o.save(),o.transform(...E.textMatrix),o.translate(E.x,E.y),o.scale(J,B),_=0;_<Z;++_){if(x=u[_],typeof x=="number"){F=W*x*O/1e3,this.ctx.translate(F,0),E.x+=F*J;continue}const $=(x.isSpace?Q:0)+Y,ot=R.charProcOperatorList[x.operatorListId];if(!ot){(0,n.warn)(`Type3 character "${x.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=x,this.save(),o.scale(O,O),o.transform(...st),this.executeOperatorList(ot),this.restore()),j=n.Util.applyTransform([x.width,0],st)[0]*O+$,o.translate(j,0),E.x+=j*J}o.restore(),this.processingType3=null}}setCharWidth(u,o){}setCharWidthAndBounds(u,o,E,R,O,B){this.ctx.rect(E,R,O-E,B-R),this.ctx.clip(),this.endPath()}getColorN_Pattern(u){let o;if(u[0]==="TilingPattern"){const E=u[1],R=this.baseTransform||(0,g.getCurrentTransform)(this.ctx),O={createCanvasGraphics:B=>new ct(B,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};o=new T.TilingPattern(u,E,this.ctx,O,R)}else o=this._getPattern(u[1],u[2]);return o}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(u,o,E){var O;const R=((O=this.selectColor)==null?void 0:O.call(this,u,o,E))||n.Util.makeHexColor(u,o,E);this.ctx.strokeStyle=R,this.current.strokeColor=R}setFillRGBColor(u,o,E){var O;const R=((O=this.selectColor)==null?void 0:O.call(this,u,o,E))||n.Util.makeHexColor(u,o,E);this.ctx.fillStyle=R,this.current.fillColor=R,this.current.patternFill=!1}_getPattern(u,o=null){let E;return this.cachedPatterns.has(u)?E=this.cachedPatterns.get(u):(E=(0,T.getShadingPattern)(this.objs.get(u)),this.cachedPatterns.set(u,E)),o&&(E.matrix=o),E}shadingFill(u){if(!this.contentVisible)return;const o=this.ctx;this.save();const E=this._getPattern(u);o.fillStyle=E.getPattern(o,this,(0,g.getCurrentTransformInverse)(o),T.PathType.SHADING);const R=(0,g.getCurrentTransformInverse)(o);if(R){const O=o.canvas,B=O.width,W=O.height,Y=n.Util.applyTransform([0,0],R),Q=n.Util.applyTransform([0,W],R),J=n.Util.applyTransform([B,0],R),st=n.Util.applyTransform([B,W],R),Z=Math.min(Y[0],Q[0],J[0],st[0]),d=Math.min(Y[1],Q[1],J[1],st[1]),_=Math.max(Y[0],Q[0],J[0],st[0]),x=Math.max(Y[1],Q[1],J[1],st[1]);this.ctx.fillRect(Z,d,_-Z,x-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(u,o){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(u)&&u.length===6&&this.transform(...u),this.baseTransform=(0,g.getCurrentTransform)(this.ctx),o)){const E=o[2]-o[0],R=o[3]-o[1];this.ctx.rect(o[0],o[1],E,R),this.current.updateRectMinMax((0,g.getCurrentTransform)(this.ctx),o),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(u){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const o=this.ctx;u.isolated||(0,n.info)("TODO: Support non-isolated groups."),u.knockout&&(0,n.warn)("Knockout groups not supported.");const E=(0,g.getCurrentTransform)(o);if(u.matrix&&o.transform(...u.matrix),!u.bbox)throw new Error("Bounding box is required.");let R=n.Util.getAxialAlignedBoundingBox(u.bbox,(0,g.getCurrentTransform)(o));const O=[0,0,o.canvas.width,o.canvas.height];R=n.Util.intersect(R,O)||[0,0,0,0];const B=Math.floor(R[0]),W=Math.floor(R[1]);let Y=Math.max(Math.ceil(R[2])-B,1),Q=Math.max(Math.ceil(R[3])-W,1),J=1,st=1;Y>h&&(J=Y/h,Y=h),Q>h&&(st=Q/h,Q=h),this.current.startNewPathAndClipBox([0,0,Y,Q]);let Z="groupAt"+this.groupLevel;u.smask&&(Z+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(Z,Y,Q),_=d.context;_.scale(1/J,1/st),_.translate(-B,-W),_.transform(...E),u.smask?this.smaskStack.push({canvas:d.canvas,context:_,offsetX:B,offsetY:W,scaleX:J,scaleY:st,subtype:u.smask.subtype,backdrop:u.smask.backdrop,transferMap:u.smask.transferMap||null,startTransformInverse:null}):(o.setTransform(1,0,0,1,0,0),o.translate(B,W),o.scale(J,st),o.save()),e(o,_),this.ctx=_,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(o),this.groupLevel++}endGroup(u){if(!this.contentVisible)return;this.groupLevel--;const o=this.ctx,E=this.groupStack.pop();if(this.ctx=E,this.ctx.imageSmoothingEnabled=!1,u.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const R=(0,g.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...R);const O=n.Util.getAxialAlignedBoundingBox([0,0,o.canvas.width,o.canvas.height],R);this.ctx.drawImage(o.canvas,0,0),this.ctx.restore(),this.compose(O)}}beginAnnotation(u,o,E,R,O){if(ut(this,X,ue).call(this),s(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(o)&&o.length===4){const B=o[2]-o[0],W=o[3]-o[1];if(O&&this.annotationCanvasMap){E=E.slice(),E[4]-=o[0],E[5]-=o[1],o=o.slice(),o[0]=o[1]=0,o[2]=B,o[3]=W;const[Y,Q]=n.Util.singularValueDecompose2dScale((0,g.getCurrentTransform)(this.ctx)),{viewportScale:J}=this,st=Math.ceil(B*this.outputScaleX*J),Z=Math.ceil(W*this.outputScaleY*J);this.annotationCanvas=this.canvasFactory.create(st,Z);const{canvas:d,context:_}=this.annotationCanvas;this.annotationCanvasMap.set(u,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=_,this.ctx.setTransform(Y,0,0,-Q,0,W*Q),s(this.ctx,this.foregroundColor)}else s(this.ctx,this.foregroundColor),this.ctx.rect(o[0],o[1],B,W),this.ctx.clip(),this.endPath()}this.current=new p(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...E),this.transform(...R)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(u){if(!this.contentVisible)return;const o=u.count;u=this.getObject(u.data,u),u.count=o;const E=this.ctx,R=this.processingType3;if(R&&(R.compiled===void 0&&(R.compiled=c(u)),R.compiled)){R.compiled(E);return}const O=this._createMaskCanvas(u),B=O.canvas;E.save(),E.setTransform(1,0,0,1,0,0),E.drawImage(B,O.offsetX,O.offsetY),E.restore(),this.compose()}paintImageMaskXObjectRepeat(u,o,E=0,R=0,O,B){if(!this.contentVisible)return;u=this.getObject(u.data,u);const W=this.ctx;W.save();const Y=(0,g.getCurrentTransform)(W);W.transform(o,E,R,O,0,0);const Q=this._createMaskCanvas(u);W.setTransform(1,0,0,1,Q.offsetX-Y[4],Q.offsetY-Y[5]);for(let J=0,st=B.length;J<st;J+=2){const Z=n.Util.transform(Y,[o,E,R,O,B[J],B[J+1]]),[d,_]=n.Util.applyTransform([0,0],Z);W.drawImage(Q.canvas,d,_)}W.restore(),this.compose()}paintImageMaskXObjectGroup(u){if(!this.contentVisible)return;const o=this.ctx,E=this.current.fillColor,R=this.current.patternFill;for(const O of u){const{data:B,width:W,height:Y,transform:Q}=O,J=this.cachedCanvases.getCanvas("maskCanvas",W,Y),st=J.context;st.save();const Z=this.getObject(B,O);a(st,Z),st.globalCompositeOperation="source-in",st.fillStyle=R?E.getPattern(st,this,(0,g.getCurrentTransformInverse)(o),T.PathType.FILL):E,st.fillRect(0,0,W,Y),st.restore(),o.save(),o.transform(...Q),o.scale(1,-1),r(o,J.canvas,0,0,W,Y,0,-1,1,1),o.restore()}this.compose()}paintImageXObject(u){if(!this.contentVisible)return;const o=this.getObject(u);if(!o){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(o)}paintImageXObjectRepeat(u,o,E,R){if(!this.contentVisible)return;const O=this.getObject(u);if(!O){(0,n.warn)("Dependent image isn't ready yet");return}const B=O.width,W=O.height,Y=[];for(let Q=0,J=R.length;Q<J;Q+=2)Y.push({transform:[o,0,0,E,R[Q],R[Q+1]],x:0,y:0,w:B,h:W});this.paintInlineImageXObjectGroup(O,Y)}paintInlineImageXObject(u){if(!this.contentVisible)return;const o=u.width,E=u.height,R=this.ctx;this.save(),R.scale(1/o,-1/E);let O;if(typeof HTMLElement=="function"&&u instanceof HTMLElement||!u.data)O=u;else{const W=this.cachedCanvases.getCanvas("inlineImage",o,E),Y=W.context;i(Y,u,this.current.transferMaps),O=W.canvas}const B=this._scaleImage(O,(0,g.getCurrentTransformInverse)(R));R.imageSmoothingEnabled=G((0,g.getCurrentTransform)(R),u.interpolate),r(R,B.img,0,0,B.paintWidth,B.paintHeight,0,-E,o,E),this.compose(),this.restore()}paintInlineImageXObjectGroup(u,o){if(!this.contentVisible)return;const E=this.ctx,R=u.width,O=u.height,B=this.cachedCanvases.getCanvas("inlineImage",R,O),W=B.context;i(W,u,this.current.transferMaps);for(const Y of o)E.save(),E.transform(...Y.transform),E.scale(1,-1),r(E,B.canvas,Y.x,Y.y,Y.w,Y.h,0,-1,1,1),E.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(u){}markPointProps(u,o){}beginMarkedContent(u){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(u,o){u==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(o)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(u){const o=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(u);const E=this.ctx;this.pendingClip&&(o||(this.pendingClip===K?E.clip("evenodd"):E.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),E.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const u=(0,g.getCurrentTransform)(this.ctx);if(u[1]===0&&u[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(u[0]),Math.abs(u[3]));else{const o=Math.abs(u[0]*u[3]-u[2]*u[1]),E=Math.hypot(u[0],u[2]),R=Math.hypot(u[1],u[3]);this._cachedGetSinglePixelWidth=Math.max(E,R)/o}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:u}=this.current,o=(0,g.getCurrentTransform)(this.ctx);let E,R;if(o[1]===0&&o[2]===0){const O=Math.abs(o[0]),B=Math.abs(o[3]);if(u===0)E=1/O,R=1/B;else{const W=O*u,Y=B*u;E=W<1?1/W:1,R=Y<1?1/Y:1}}else{const O=Math.abs(o[0]*o[3]-o[2]*o[1]),B=Math.hypot(o[0],o[1]),W=Math.hypot(o[2],o[3]);if(u===0)E=W/O,R=B/O;else{const Y=u*O;E=W>Y?W/Y:1,R=B>Y?B/Y:1}}this._cachedScaleForStroking=[E,R]}return this._cachedScaleForStroking}rescaleAndStroke(u){const{ctx:o}=this,{lineWidth:E}=this.current,[R,O]=this.getScaleForStroking();if(o.lineWidth=E||1,R===1&&O===1){o.stroke();return}let B,W,Y;u&&(B=(0,g.getCurrentTransform)(o),W=o.getLineDash().slice(),Y=o.lineDashOffset),o.scale(R,O);const Q=Math.max(R,O);o.setLineDash(o.getLineDash().map(J=>J/Q)),o.lineDashOffset/=Q,o.stroke(),u&&(o.setTransform(...B),o.setLineDash(W),o.lineDashOffset=Y)}isContentVisible(){for(let u=this.markedContentStack.length-1;u>=0;u--)if(!this.markedContentStack[u].visible)return!1;return!0}};let z=ct;X=new WeakSet,ue=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},t.CanvasGraphics=z;for(const N in n.OPS)z.prototype[N]!==void 0&&(z.prototype[n.OPS[N]]=z.prototype[N])},(L,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=A;var n=l(1),g=l(6);const T={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=T;function P(r,c){if(!c)return;const p=c[2]-c[0],i=c[3]-c[1],a=new Path2D;a.rect(c[0],c[1],p,i),r.clip(a)}class D{constructor(){this.constructor===D&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class w extends D{constructor(c){super(),this._type=c[1],this._bbox=c[2],this._colorStops=c[3],this._p0=c[4],this._p1=c[5],this._r0=c[6],this._r1=c[7],this.matrix=null}_createGradient(c){let p;this._type==="axial"?p=c.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(p=c.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)p.addColorStop(i[0],i[1]);return p}getPattern(c,p,i,a){let e;if(a===T.STROKE||a===T.FILL){const s=p.current.getClippedPathBoundingBox(a,(0,g.getCurrentTransform)(c))||[0,0,0,0],b=Math.ceil(s[2]-s[0])||1,k=Math.ceil(s[3]-s[1])||1,M=p.cachedCanvases.getCanvas("pattern",b,k,!0),q=M.context;q.clearRect(0,0,q.canvas.width,q.canvas.height),q.beginPath(),q.rect(0,0,q.canvas.width,q.canvas.height),q.translate(-s[0],-s[1]),i=n.Util.transform(i,[1,0,0,1,s[0],s[1]]),q.transform(...p.baseTransform),this.matrix&&q.transform(...this.matrix),P(q,this._bbox),q.fillStyle=this._createGradient(q),q.fill(),e=c.createPattern(M.canvas,"no-repeat");const S=new DOMMatrix(i);e.setTransform(S)}else P(c,this._bbox),e=this._createGradient(c);return e}}function h(r,c,p,i,a,e,s,b){const k=c.coords,M=c.colors,q=r.data,S=r.width*4;let G;k[p+1]>k[i+1]&&(G=p,p=i,i=G,G=e,e=s,s=G),k[i+1]>k[a+1]&&(G=i,i=a,a=G,G=s,s=b,b=G),k[p+1]>k[i+1]&&(G=p,p=i,i=G,G=e,e=s,s=G);const ht=(k[p]+c.offsetX)*c.scaleX,nt=(k[p+1]+c.offsetY)*c.scaleY,rt=(k[i]+c.offsetX)*c.scaleX,K=(k[i+1]+c.offsetY)*c.scaleY,z=(k[a]+c.offsetX)*c.scaleX,X=(k[a+1]+c.offsetY)*c.scaleY;if(nt>=X)return;const at=M[e],ct=M[e+1],N=M[e+2],u=M[s],o=M[s+1],E=M[s+2],R=M[b],O=M[b+1],B=M[b+2],W=Math.round(nt),Y=Math.round(X);let Q,J,st,Z,d,_,x,j;for(let F=W;F<=Y;F++){if(F<K){let et;F<nt?et=0:et=(nt-F)/(nt-K),Q=ht-(ht-rt)*et,J=at-(at-u)*et,st=ct-(ct-o)*et,Z=N-(N-E)*et}else{let et;F>X?et=1:K===X?et=0:et=(K-F)/(K-X),Q=rt-(rt-z)*et,J=u-(u-R)*et,st=o-(o-O)*et,Z=E-(E-B)*et}let $;F<nt?$=0:F>X?$=1:$=(nt-F)/(nt-X),d=ht-(ht-z)*$,_=at-(at-R)*$,x=ct-(ct-O)*$,j=N-(N-B)*$;const ot=Math.round(Math.min(Q,d)),dt=Math.round(Math.max(Q,d));let ft=S*F+ot*4;for(let et=ot;et<=dt;et++)$=(Q-et)/(Q-d),$<0?$=0:$>1&&($=1),q[ft++]=J-(J-_)*$|0,q[ft++]=st-(st-x)*$|0,q[ft++]=Z-(Z-j)*$|0,q[ft++]=255}}function v(r,c,p){const i=c.coords,a=c.colors;let e,s;switch(c.type){case"lattice":const b=c.verticesPerRow,k=Math.floor(i.length/b)-1,M=b-1;for(e=0;e<k;e++){let q=e*b;for(let S=0;S<M;S++,q++)h(r,p,i[q],i[q+1],i[q+b],a[q],a[q+1],a[q+b]),h(r,p,i[q+b+1],i[q+1],i[q+b],a[q+b+1],a[q+1],a[q+b])}break;case"triangles":for(e=0,s=i.length;e<s;e+=3)h(r,p,i[e],i[e+1],i[e+2],a[e],a[e+1],a[e+2]);break;default:throw new Error("illegal figure")}}class I extends D{constructor(c){super(),this._coords=c[2],this._colors=c[3],this._figures=c[4],this._bounds=c[5],this._bbox=c[7],this._background=c[8],this.matrix=null}_createMeshCanvas(c,p,i){const b=Math.floor(this._bounds[0]),k=Math.floor(this._bounds[1]),M=Math.ceil(this._bounds[2])-b,q=Math.ceil(this._bounds[3])-k,S=Math.min(Math.ceil(Math.abs(M*c[0]*1.1)),3e3),G=Math.min(Math.ceil(Math.abs(q*c[1]*1.1)),3e3),ht=M/S,nt=q/G,rt={coords:this._coords,colors:this._colors,offsetX:-b,offsetY:-k,scaleX:1/ht,scaleY:1/nt},K=S+2*2,z=G+2*2,X=i.getCanvas("mesh",K,z,!1),at=X.context,ct=at.createImageData(S,G);if(p){const u=ct.data;for(let o=0,E=u.length;o<E;o+=4)u[o]=p[0],u[o+1]=p[1],u[o+2]=p[2],u[o+3]=255}for(const u of this._figures)v(ct,u,rt);return at.putImageData(ct,2,2),{canvas:X.canvas,offsetX:b-2*ht,offsetY:k-2*nt,scaleX:ht,scaleY:nt}}getPattern(c,p,i,a){P(c,this._bbox);let e;if(a===T.SHADING)e=n.Util.singularValueDecompose2dScale((0,g.getCurrentTransform)(c));else if(e=n.Util.singularValueDecompose2dScale(p.baseTransform),this.matrix){const b=n.Util.singularValueDecompose2dScale(this.matrix);e=[e[0]*b[0],e[1]*b[1]]}const s=this._createMeshCanvas(e,a===T.SHADING?null:this._background,p.cachedCanvases);return a!==T.SHADING&&(c.setTransform(...p.baseTransform),this.matrix&&c.transform(...this.matrix)),c.translate(s.offsetX,s.offsetY),c.scale(s.scaleX,s.scaleY),c.createPattern(s.canvas,"no-repeat")}}class y extends D{getPattern(){return"hotpink"}}function A(r){switch(r[0]){case"RadialAxial":return new w(r);case"Mesh":return new I(r);case"Dummy":return new y}throw new Error(`Unknown IR type: ${r[0]}`)}const m={COLORED:1,UNCOLORED:2};class f{static get MAX_PATTERN_SIZE(){return(0,n.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(c,p,i,a,e){this.operatorList=c[2],this.matrix=c[3]||[1,0,0,1,0,0],this.bbox=c[4],this.xstep=c[5],this.ystep=c[6],this.paintType=c[7],this.tilingType=c[8],this.color=p,this.ctx=i,this.canvasGraphicsFactory=a,this.baseTransform=e}createPatternCanvas(c){const p=this.operatorList,i=this.bbox,a=this.xstep,e=this.ystep,s=this.paintType,b=this.tilingType,k=this.color,M=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+b);const q=i[0],S=i[1],G=i[2],ht=i[3],nt=n.Util.singularValueDecompose2dScale(this.matrix),rt=n.Util.singularValueDecompose2dScale(this.baseTransform),K=[nt[0]*rt[0],nt[1]*rt[1]],z=this.getSizeAndScale(a,this.ctx.canvas.width,K[0]),X=this.getSizeAndScale(e,this.ctx.canvas.height,K[1]),at=c.cachedCanvases.getCanvas("pattern",z.size,X.size,!0),ct=at.context,N=M.createCanvasGraphics(ct);N.groupLevel=c.groupLevel,this.setFillAndStrokeStyleToContext(N,s,k);let u=q,o=S,E=G,R=ht;return q<0&&(u=0,E+=Math.abs(q)),S<0&&(o=0,R+=Math.abs(S)),ct.translate(-(z.scale*u),-(X.scale*o)),N.transform(z.scale,0,0,X.scale,0,0),ct.save(),this.clipBbox(N,u,o,E,R),N.baseTransform=(0,g.getCurrentTransform)(N.ctx),N.executeOperatorList(p),N.endDrawing(),{canvas:at.canvas,scaleX:z.scale,scaleY:X.scale,offsetX:u,offsetY:o}}getSizeAndScale(c,p,i){c=Math.abs(c);const a=Math.max(f.MAX_PATTERN_SIZE,p);let e=Math.ceil(c*i);return e>=a?e=a:i=e/c,{scale:i,size:e}}clipBbox(c,p,i,a,e){const s=a-p,b=e-i;c.ctx.rect(p,i,s,b),c.current.updateRectMinMax((0,g.getCurrentTransform)(c.ctx),[p,i,a,e]),c.clip(),c.endPath()}setFillAndStrokeStyleToContext(c,p,i){const a=c.ctx,e=c.current;switch(p){case m.COLORED:const s=this.ctx;a.fillStyle=s.fillStyle,a.strokeStyle=s.strokeStyle,e.fillColor=s.fillStyle,e.strokeColor=s.strokeStyle;break;case m.UNCOLORED:const b=n.Util.makeHexColor(i[0],i[1],i[2]);a.fillStyle=b,a.strokeStyle=b,e.fillColor=b,e.strokeColor=b;break;default:throw new n.FormatError(`Unsupported paint type: ${p}`)}}getPattern(c,p,i,a){let e=i;a!==T.SHADING&&(e=n.Util.transform(e,p.baseTransform),this.matrix&&(e=n.Util.transform(e,this.matrix)));const s=this.createPatternCanvas(p);let b=new DOMMatrix(e);b=b.translate(s.offsetX,s.offsetY),b=b.scale(1/s.scaleX,1/s.scaleY);const k=c.createPattern(s.canvas,"repeat");return k.setTransform(b),k}}t.TilingPattern=f},(L,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applyMaskImageData=g;var n=l(1);function g({src:T,srcPos:P=0,dest:D,destPos:w=0,width:h,height:v,inverseDecode:I=!1}){const y=n.FeatureTest.isLittleEndian?4278190080:255,[A,m]=I?[0,y]:[y,0],f=h>>3,r=h&7,c=T.length;D=new Uint32Array(D.buffer);for(let p=0;p<v;p++){for(const a=P+f;P<a;P++){const e=P<c?T[P]:255;D[w++]=e&128?m:A,D[w++]=e&64?m:A,D[w++]=e&32?m:A,D[w++]=e&16?m:A,D[w++]=e&8?m:A,D[w++]=e&4?m:A,D[w++]=e&2?m:A,D[w++]=e&1?m:A}if(r===0)continue;const i=P<c?T[P++]:255;for(let a=0;a<r;a++)D[w++]=i&1<<7-a?m:A}return{srcPos:P,destPos:w}}},(L,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const l=Object.create(null);t.GlobalWorkerOptions=l,l.workerPort=null,l.workerSrc=""},(L,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var n=l(1);const g={UNKNOWN:0,DATA:1,ERROR:2},T={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function P(w){switch(w instanceof Error||typeof w=="object"&&w!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),w.name){case"AbortException":return new n.AbortException(w.message);case"MissingPDFException":return new n.MissingPDFException(w.message);case"PasswordException":return new n.PasswordException(w.message,w.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(w.message,w.status);case"UnknownErrorException":return new n.UnknownErrorException(w.message,w.details);default:return new n.UnknownErrorException(w.message,w.toString())}}class D{constructor(h,v,I){this.sourceName=h,this.targetName=v,this.comObj=I,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=y=>{const A=y.data;if(A.targetName!==this.sourceName)return;if(A.stream){this._processStreamMessage(A);return}if(A.callback){const f=A.callbackId,r=this.callbackCapabilities[f];if(!r)throw new Error(`Cannot resolve callback ${f}`);if(delete this.callbackCapabilities[f],A.callback===g.DATA)r.resolve(A.data);else if(A.callback===g.ERROR)r.reject(P(A.reason));else throw new Error("Unexpected callback case");return}const m=this.actionHandler[A.action];if(!m)throw new Error(`Unknown action from worker: ${A.action}`);if(A.callbackId){const f=this.sourceName,r=A.sourceName;new Promise(function(c){c(m(A.data))}).then(function(c){I.postMessage({sourceName:f,targetName:r,callback:g.DATA,callbackId:A.callbackId,data:c})},function(c){I.postMessage({sourceName:f,targetName:r,callback:g.ERROR,callbackId:A.callbackId,reason:P(c)})});return}if(A.streamId){this._createStreamSink(A);return}m(A.data)},I.addEventListener("message",this._onComObjOnMessage)}on(h,v){const I=this.actionHandler;if(I[h])throw new Error(`There is already an actionName called "${h}"`);I[h]=v}send(h,v,I){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:h,data:v},I)}sendWithPromise(h,v,I){const y=this.callbackId++,A=(0,n.createPromiseCapability)();this.callbackCapabilities[y]=A;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:h,callbackId:y,data:v},I)}catch(m){A.reject(m)}return A.promise}sendWithStream(h,v,I,y){const A=this.streamId++,m=this.sourceName,f=this.targetName,r=this.comObj;return new ReadableStream({start:c=>{const p=(0,n.createPromiseCapability)();return this.streamControllers[A]={controller:c,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},r.postMessage({sourceName:m,targetName:f,action:h,streamId:A,data:v,desiredSize:c.desiredSize},y),p.promise},pull:c=>{const p=(0,n.createPromiseCapability)();return this.streamControllers[A].pullCall=p,r.postMessage({sourceName:m,targetName:f,stream:T.PULL,streamId:A,desiredSize:c.desiredSize}),p.promise},cancel:c=>{(0,n.assert)(c instanceof Error,"cancel must have a valid reason");const p=(0,n.createPromiseCapability)();return this.streamControllers[A].cancelCall=p,this.streamControllers[A].isClosed=!0,r.postMessage({sourceName:m,targetName:f,stream:T.CANCEL,streamId:A,reason:P(c)}),p.promise}},I)}_createStreamSink(h){const v=h.streamId,I=this.sourceName,y=h.sourceName,A=this.comObj,m=this,f=this.actionHandler[h.action],r={enqueue(c,p=1,i){if(this.isCancelled)return;const a=this.desiredSize;this.desiredSize-=p,a>0&&this.desiredSize<=0&&(this.sinkCapability=(0,n.createPromiseCapability)(),this.ready=this.sinkCapability.promise),A.postMessage({sourceName:I,targetName:y,stream:T.ENQUEUE,streamId:v,chunk:c},i)},close(){this.isCancelled||(this.isCancelled=!0,A.postMessage({sourceName:I,targetName:y,stream:T.CLOSE,streamId:v}),delete m.streamSinks[v])},error(c){(0,n.assert)(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,A.postMessage({sourceName:I,targetName:y,stream:T.ERROR,streamId:v,reason:P(c)}))},sinkCapability:(0,n.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:h.desiredSize,ready:null};r.sinkCapability.resolve(),r.ready=r.sinkCapability.promise,this.streamSinks[v]=r,new Promise(function(c){c(f(h.data,r))}).then(function(){A.postMessage({sourceName:I,targetName:y,stream:T.START_COMPLETE,streamId:v,success:!0})},function(c){A.postMessage({sourceName:I,targetName:y,stream:T.START_COMPLETE,streamId:v,reason:P(c)})})}_processStreamMessage(h){const v=h.streamId,I=this.sourceName,y=h.sourceName,A=this.comObj,m=this.streamControllers[v],f=this.streamSinks[v];switch(h.stream){case T.START_COMPLETE:h.success?m.startCall.resolve():m.startCall.reject(P(h.reason));break;case T.PULL_COMPLETE:h.success?m.pullCall.resolve():m.pullCall.reject(P(h.reason));break;case T.PULL:if(!f){A.postMessage({sourceName:I,targetName:y,stream:T.PULL_COMPLETE,streamId:v,success:!0});break}f.desiredSize<=0&&h.desiredSize>0&&f.sinkCapability.resolve(),f.desiredSize=h.desiredSize,new Promise(function(r){r(f.onPull&&f.onPull())}).then(function(){A.postMessage({sourceName:I,targetName:y,stream:T.PULL_COMPLETE,streamId:v,success:!0})},function(r){A.postMessage({sourceName:I,targetName:y,stream:T.PULL_COMPLETE,streamId:v,reason:P(r)})});break;case T.ENQUEUE:if((0,n.assert)(m,"enqueue should have stream controller"),m.isClosed)break;m.controller.enqueue(h.chunk);break;case T.CLOSE:if((0,n.assert)(m,"close should have stream controller"),m.isClosed)break;m.isClosed=!0,m.controller.close(),this._deleteStreamController(m,v);break;case T.ERROR:(0,n.assert)(m,"error should have stream controller"),m.controller.error(P(h.reason)),this._deleteStreamController(m,v);break;case T.CANCEL_COMPLETE:h.success?m.cancelCall.resolve():m.cancelCall.reject(P(h.reason)),this._deleteStreamController(m,v);break;case T.CANCEL:if(!f)break;new Promise(function(r){r(f.onCancel&&f.onCancel(P(h.reason)))}).then(function(){A.postMessage({sourceName:I,targetName:y,stream:T.CANCEL_COMPLETE,streamId:v,success:!0})},function(r){A.postMessage({sourceName:I,targetName:y,stream:T.CANCEL_COMPLETE,streamId:v,reason:P(r)})}),f.sinkCapability.reject(P(h.reason)),f.isCancelled=!0,delete this.streamSinks[v];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(h,v){await Promise.allSettled([h.startCall&&h.startCall.promise,h.pullCall&&h.pullCall.promise,h.cancelCall&&h.cancelCall.promise]),delete this.streamControllers[v]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}t.MessageHandler=D},(L,t,l)=>{var T,P;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var n=l(1);class g{constructor({parsedData:w,rawData:h}){lt(this,T,void 0);lt(this,P,void 0);vt(this,T,w),vt(this,P,h)}getRaw(){return C(this,P)}get(w){return C(this,T).get(w)??null}getAll(){return(0,n.objectFromMap)(C(this,T))}has(w){return C(this,T).has(w)}}T=new WeakMap,P=new WeakMap,t.Metadata=g},(L,t,l)=>{var w,h,v,I,y,A,fe;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var n=l(1),g=l(8);const T=Symbol("INTERNAL");class P{constructor(r,c){lt(this,w,!0);this.name=r,this.intent=c}get visible(){return C(this,w)}_setVisible(r,c){r!==T&&(0,n.unreachable)("Internal method `_setVisible` called."),vt(this,w,c)}}w=new WeakMap;class D{constructor(r){lt(this,A);lt(this,h,null);lt(this,v,new Map);lt(this,I,null);lt(this,y,null);if(this.name=null,this.creator=null,r!==null){this.name=r.name,this.creator=r.creator,vt(this,y,r.order);for(const c of r.groups)C(this,v).set(c.id,new P(c.name,c.intent));if(r.baseState==="OFF")for(const c of C(this,v).values())c._setVisible(T,!1);for(const c of r.on)C(this,v).get(c)._setVisible(T,!0);for(const c of r.off)C(this,v).get(c)._setVisible(T,!1);vt(this,I,this.getHash())}}isVisible(r){if(C(this,v).size===0)return!0;if(!r)return(0,n.warn)("Optional content group not defined."),!0;if(r.type==="OCG")return C(this,v).has(r.id)?C(this,v).get(r.id).visible:((0,n.warn)(`Optional content group not found: ${r.id}`),!0);if(r.type==="OCMD"){if(r.expression)return ut(this,A,fe).call(this,r.expression);if(!r.policy||r.policy==="AnyOn"){for(const c of r.ids){if(!C(this,v).has(c))return(0,n.warn)(`Optional content group not found: ${c}`),!0;if(C(this,v).get(c).visible)return!0}return!1}else if(r.policy==="AllOn"){for(const c of r.ids){if(!C(this,v).has(c))return(0,n.warn)(`Optional content group not found: ${c}`),!0;if(!C(this,v).get(c).visible)return!1}return!0}else if(r.policy==="AnyOff"){for(const c of r.ids){if(!C(this,v).has(c))return(0,n.warn)(`Optional content group not found: ${c}`),!0;if(!C(this,v).get(c).visible)return!0}return!1}else if(r.policy==="AllOff"){for(const c of r.ids){if(!C(this,v).has(c))return(0,n.warn)(`Optional content group not found: ${c}`),!0;if(C(this,v).get(c).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${r.policy}.`),!0}return(0,n.warn)(`Unknown group type ${r.type}.`),!0}setVisibility(r,c=!0){if(!C(this,v).has(r)){(0,n.warn)(`Optional content group not found: ${r}`);return}C(this,v).get(r)._setVisible(T,!!c),vt(this,h,null)}get hasInitialVisibility(){return this.getHash()===C(this,I)}getOrder(){return C(this,v).size?C(this,y)?C(this,y).slice():[...C(this,v).keys()]:null}getGroups(){return C(this,v).size>0?(0,n.objectFromMap)(C(this,v)):null}getGroup(r){return C(this,v).get(r)||null}getHash(){if(C(this,h)!==null)return C(this,h);const r=new g.MurmurHash3_64;for(const[c,p]of C(this,v))r.update(`${c}:${p.visible}`);return vt(this,h,r.hexdigest())}}h=new WeakMap,v=new WeakMap,I=new WeakMap,y=new WeakMap,A=new WeakSet,fe=function(r){const c=r.length;if(c<2)return!0;const p=r[0];for(let i=1;i<c;i++){const a=r[i];let e;if(Array.isArray(a))e=ut(this,A,fe).call(this,a);else if(C(this,v).has(a))e=C(this,v).get(a).visible;else return(0,n.warn)(`Optional content group not found: ${a}`),!0;switch(p){case"And":if(!e)return!1;break;case"Or":if(e)return!0;break;case"Not":return!e;default:return!0}}return p==="And"},t.OptionalContentConfig=D},(L,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var n=l(1),g=l(6);class T{constructor({length:h,initialData:v,progressiveDone:I=!1,contentDispositionFilename:y=null,disableRange:A=!1,disableStream:m=!1},f){if((0,n.assert)(f,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=I,this._contentDispositionFilename=y,(v==null?void 0:v.length)>0){const r=v instanceof Uint8Array&&v.byteLength===v.buffer.byteLength?v.buffer:new Uint8Array(v).buffer;this._queuedChunks.push(r)}this._pdfDataRangeTransport=f,this._isStreamingSupported=!m,this._isRangeSupported=!A,this._contentLength=h,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((r,c)=>{this._onReceiveData({begin:r,chunk:c})}),this._pdfDataRangeTransport.addProgressListener((r,c)=>{this._onProgress({loaded:r,total:c})}),this._pdfDataRangeTransport.addProgressiveReadListener(r=>{this._onReceiveData({chunk:r})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:h,chunk:v}){const I=v instanceof Uint8Array&&v.byteLength===v.buffer.byteLength?v.buffer:new Uint8Array(v).buffer;if(h===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(I):this._queuedChunks.push(I);else{const y=this._rangeReaders.some(function(A){return A._begin!==h?!1:(A._enqueue(I),!0)});(0,n.assert)(y,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var h;return((h=this._fullRequestReader)==null?void 0:h._loaded)??0}_onProgress(h){var v,I,y,A;h.total===void 0?(I=(v=this._rangeReaders[0])==null?void 0:v.onProgress)==null||I.call(v,{loaded:h.loaded}):(A=(y=this._fullRequestReader)==null?void 0:y.onProgress)==null||A.call(y,{loaded:h.loaded,total:h.total})}_onProgressiveDone(){var h;(h=this._fullRequestReader)==null||h.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(h){const v=this._rangeReaders.indexOf(h);v>=0&&this._rangeReaders.splice(v,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const h=this._queuedChunks;return this._queuedChunks=null,new P(this,h,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(h,v){if(v<=this._progressiveDataLength)return null;const I=new D(this,h,v);return this._pdfDataRangeTransport.requestDataRange(h,v),this._rangeReaders.push(I),I}cancelAllRequests(h){var v;(v=this._fullRequestReader)==null||v.cancel(h);for(const I of this._rangeReaders.slice(0))I.cancel(h);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=T;class P{constructor(h,v,I=!1,y=null){this._stream=h,this._done=I||!1,this._filename=(0,g.isPdfFile)(y)?y:null,this._queuedChunks=v||[],this._loaded=0;for(const A of this._queuedChunks)this._loaded+=A.byteLength;this._requests=[],this._headersReady=Promise.resolve(),h._fullRequestReader=this,this.onProgress=null}_enqueue(h){this._done||(this._requests.length>0?this._requests.shift().resolve({value:h,done:!1}):this._queuedChunks.push(h),this._loaded+=h.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const h=(0,n.createPromiseCapability)();return this._requests.push(h),h.promise}cancel(h){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class D{constructor(h,v,I){this._stream=h,this._begin=v,this._end=I,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(h){if(!this._done){if(this._requests.length===0)this._queuedChunk=h;else{this._requests.shift().resolve({value:h,done:!1});for(const I of this._requests)I.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const v=this._queuedChunk;return this._queuedChunk=null,{value:v,done:!1}}if(this._done)return{value:void 0,done:!0};const h=(0,n.createPromiseCapability)();return this._requests.push(h),h.promise}cancel(h){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(L,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class l{static textContent(g){const T=[],P={items:T,styles:Object.create(null)};function D(w){var I;if(!w)return;let h=null;const v=w.name;if(v==="#text")h=w.value;else if(l.shouldBuildText(v))(I=w==null?void 0:w.attributes)!=null&&I.textContent?h=w.attributes.textContent:w.value&&(h=w.value);else return;if(h!==null&&T.push({str:h}),!!w.children)for(const y of w.children)D(y)}return D(g),P}static shouldBuildText(g){return!(g==="textarea"||g==="input"||g==="option"||g==="select")}}t.XfaText=l},(L,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var n=l(7);const g=function(w){return new Promise((h,v)=>{require$$5.readFile(w,(y,A)=>{if(y||!A){v(new Error(y));return}h(new Uint8Array(A))})})};class T extends n.BaseCanvasFactory{_createCanvas(h,v){return require$$5.createCanvas(h,v)}}t.NodeCanvasFactory=T;class P extends n.BaseCMapReaderFactory{_fetchData(h,v){return g(h).then(I=>({cMapData:I,compressionType:v}))}}t.NodeCMapReaderFactory=P;class D extends n.BaseStandardFontDataFactory{_fetchData(h){return g(h)}}t.NodeStandardFontDataFactory=D},(L,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var n=l(1),g=l(22);const T=require$$5,P=require$$5,D=require$$5,w=require$$5,h=/^file:\/\/\/[a-zA-Z]:\//;function v(i){const a=w.parse(i);return a.protocol==="file:"||a.host?a:/^[a-z]:[/\\]/i.test(i)?w.parse(`file:///${i}`):(a.host||(a.protocol="file:"),a)}class I{constructor(a){this.source=a,this.url=v(a.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&a.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var a;return((a=this._fullRequestReader)==null?void 0:a._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new c(this):new f(this),this._fullRequestReader}getRangeReader(a,e){if(e<=this._progressiveDataLength)return null;const s=this.isFsUrl?new p(this,a,e):new r(this,a,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(a){var e;(e=this._fullRequestReader)==null||e.cancel(a);for(const s of this._rangeRequestReaders.slice(0))s.cancel(a)}}t.PDFNodeStream=I;class y{constructor(a){this._url=a.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=a.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)(),this._headersCapability=(0,n.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const a=this._readableStream.read();return a===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=a.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(a).buffer,done:!1})}cancel(a){if(!this._readableStream){this._error(a);return}this._readableStream.destroy(a)}_error(a){this._storedError=a,this._readCapability.resolve()}_setReadableStream(a){this._readableStream=a,a.on("readable",()=>{this._readCapability.resolve()}),a.on("end",()=>{a.destroy(),this._done=!0,this._readCapability.resolve()}),a.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class A{constructor(a){this._url=a.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)();const e=a.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const a=this._readableStream.read();return a===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=a.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(a).buffer,done:!1})}cancel(a){if(!this._readableStream){this._error(a);return}this._readableStream.destroy(a)}_error(a){this._storedError=a,this._readCapability.resolve()}_setReadableStream(a){this._readableStream=a,a.on("readable",()=>{this._readCapability.resolve()}),a.on("end",()=>{a.destroy(),this._done=!0,this._readCapability.resolve()}),a.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function m(i,a){return{protocol:i.protocol,auth:i.auth,host:i.hostname,port:i.port,path:i.path,method:"GET",headers:a}}class f extends y{constructor(a){super(a);const e=s=>{if(s.statusCode===404){const q=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=q,this._headersCapability.reject(q);return}this._headersCapability.resolve(),this._setReadableStream(s);const b=q=>this._readableStream.headers[q.toLowerCase()],{allowRangeRequests:k,suggestedLength:M}=(0,g.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:a.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=k,this._contentLength=M||this._contentLength,this._filename=(0,g.extractFilenameFromHeader)(b)};this._request=null,this._url.protocol==="http:"?this._request=P.request(m(this._url,a.httpHeaders),e):this._request=D.request(m(this._url,a.httpHeaders),e),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class r extends A{constructor(a,e,s){super(a),this._httpHeaders={};for(const k in a.httpHeaders){const M=a.httpHeaders[k];M!==void 0&&(this._httpHeaders[k]=M)}this._httpHeaders.Range=`bytes=${e}-${s-1}`;const b=k=>{if(k.statusCode===404){const M=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=M;return}this._setReadableStream(k)};this._request=null,this._url.protocol==="http:"?this._request=P.request(m(this._url,this._httpHeaders),b):this._request=D.request(m(this._url,this._httpHeaders),b),this._request.on("error",k=>{this._storedError=k}),this._request.end()}}class c extends y{constructor(a){super(a);let e=decodeURIComponent(this._url.path);h.test(this._url.href)&&(e=e.replace(/^\//,"")),T.lstat(e,(s,b)=>{if(s){s.code==="ENOENT"&&(s=new n.MissingPDFException(`Missing PDF "${e}".`)),this._storedError=s,this._headersCapability.reject(s);return}this._contentLength=b.size,this._setReadableStream(T.createReadStream(e)),this._headersCapability.resolve()})}}class p extends A{constructor(a,e,s){super(a);let b=decodeURIComponent(this._url.path);h.test(this._url.href)&&(b=b.replace(/^\//,"")),this._setReadableStream(T.createReadStream(b,{start:e,end:s-1}))}}},(L,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=w,t.extractFilenameFromHeader=D,t.validateRangeRequestCapabilities=P,t.validateResponseStatus=h;var n=l(1),g=l(23),T=l(6);function P({getResponseHeader:v,isHttp:I,rangeChunkSize:y,disableRange:A}){const m={allowRangeRequests:!1,suggestedLength:void 0},f=parseInt(v("Content-Length"),10);return!Number.isInteger(f)||(m.suggestedLength=f,f<=2*y)||A||!I||v("Accept-Ranges")!=="bytes"||(v("Content-Encoding")||"identity")!=="identity"||(m.allowRangeRequests=!0),m}function D(v){const I=v("Content-Disposition");if(I){let y=(0,g.getFilenameFromContentDispositionHeader)(I);if(y.includes("%"))try{y=decodeURIComponent(y)}catch{}if((0,T.isPdfFile)(y))return y}return null}function w(v,I){return v===404||v===0&&I.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+I+'".'):new n.UnexpectedResponseException(`Unexpected server response (${v}) while retrieving PDF "${I}".`,v)}function h(v){return v===200||v===206}},(L,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=g;var n=l(1);function g(T){let P=!0,D=w("filename\\*","i").exec(T);if(D){D=D[1];let f=y(D);return f=unescape(f),f=A(f),f=m(f),v(f)}if(D=I(T),D){const f=m(D);return v(f)}if(D=w("filename","i").exec(T),D){D=D[1];let f=y(D);return f=m(f),v(f)}function w(f,r){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',r)}function h(f,r){if(f){if(!/^[\x00-\xFF]+$/.test(r))return r;try{const c=new TextDecoder(f,{fatal:!0}),p=(0,n.stringToBytes)(r);r=c.decode(p),P=!1}catch{}}return r}function v(f){return P&&/[\x80-\xff]/.test(f)&&(f=h("utf-8",f),P&&(f=h("iso-8859-1",f))),f}function I(f){const r=[];let c;const p=w("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(c=p.exec(f))!==null;){let[,a,e,s]=c;if(a=parseInt(a,10),a in r){if(a===0)break;continue}r[a]=[e,s]}const i=[];for(let a=0;a<r.length&&a in r;++a){let[e,s]=r[a];s=y(s),e&&(s=unescape(s),a===0&&(s=A(s))),i.push(s)}return i.join("")}function y(f){if(f.startsWith('"')){const r=f.slice(1).split('\\"');for(let c=0;c<r.length;++c){const p=r[c].indexOf('"');p!==-1&&(r[c]=r[c].slice(0,p),r.length=c+1),r[c]=r[c].replace(/\\(.)/g,"$1")}f=r.join('"')}return f}function A(f){const r=f.indexOf("'");if(r===-1)return f;const c=f.slice(0,r),i=f.slice(r+1).replace(/^[^']*'/,"");return h(c,i)}function m(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(r,c,p,i){if(p==="q"||p==="Q")return i=i.replace(/_/g," "),i=i.replace(/=([0-9a-fA-F]{2})/g,function(a,e){return String.fromCharCode(parseInt(e,16))}),h(c,i);try{i=atob(i)}catch{}return h(c,i)})}return""}},(L,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var n=l(1),g=l(22);const T=200,P=206;function D(y){const A=y.response;return typeof A!="string"?A:(0,n.stringToBytes)(A).buffer}class w{constructor(A,m={}){this.url=A,this.isHttp=/^https?:/i.test(A),this.httpHeaders=this.isHttp&&m.httpHeaders||Object.create(null),this.withCredentials=m.withCredentials||!1,this.getXhr=m.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(A,m,f){const r={begin:A,end:m};for(const c in f)r[c]=f[c];return this.request(r)}requestFull(A){return this.request(A)}request(A){const m=this.getXhr(),f=this.currXhrId++,r=this.pendingRequests[f]={xhr:m};m.open("GET",this.url),m.withCredentials=this.withCredentials;for(const c in this.httpHeaders){const p=this.httpHeaders[c];p!==void 0&&m.setRequestHeader(c,p)}return this.isHttp&&"begin"in A&&"end"in A?(m.setRequestHeader("Range",`bytes=${A.begin}-${A.end-1}`),r.expectedStatus=P):r.expectedStatus=T,m.responseType="arraybuffer",A.onError&&(m.onerror=function(c){A.onError(m.status)}),m.onreadystatechange=this.onStateChange.bind(this,f),m.onprogress=this.onProgress.bind(this,f),r.onHeadersReceived=A.onHeadersReceived,r.onDone=A.onDone,r.onError=A.onError,r.onProgress=A.onProgress,m.send(null),f}onProgress(A,m){var r;const f=this.pendingRequests[A];f&&((r=f.onProgress)==null||r.call(f,m))}onStateChange(A,m){var a,e,s;const f=this.pendingRequests[A];if(!f)return;const r=f.xhr;if(r.readyState>=2&&f.onHeadersReceived&&(f.onHeadersReceived(),delete f.onHeadersReceived),r.readyState!==4||!(A in this.pendingRequests))return;if(delete this.pendingRequests[A],r.status===0&&this.isHttp){(a=f.onError)==null||a.call(f,r.status);return}const c=r.status||T;if(!(c===T&&f.expectedStatus===P)&&c!==f.expectedStatus){(e=f.onError)==null||e.call(f,r.status);return}const i=D(r);if(c===P){const b=r.getResponseHeader("Content-Range"),k=/bytes (\d+)-(\d+)\/(\d+)/.exec(b);f.onDone({begin:parseInt(k[1],10),chunk:i})}else i?f.onDone({begin:0,chunk:i}):(s=f.onError)==null||s.call(f,r.status)}getRequestXhr(A){return this.pendingRequests[A].xhr}isPendingRequest(A){return A in this.pendingRequests}abortRequest(A){const m=this.pendingRequests[A].xhr;delete this.pendingRequests[A],m.abort()}}class h{constructor(A){this._source=A,this._manager=new w(A.url,{httpHeaders:A.httpHeaders,withCredentials:A.withCredentials}),this._rangeChunkSize=A.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(A){const m=this._rangeRequestReaders.indexOf(A);m>=0&&this._rangeRequestReaders.splice(m,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new v(this._manager,this._source),this._fullRequestReader}getRangeReader(A,m){const f=new I(this._manager,A,m);return f.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(f),f}cancelAllRequests(A){var m;(m=this._fullRequestReader)==null||m.cancel(A);for(const f of this._rangeRequestReaders.slice(0))f.cancel(A)}}t.PDFNetworkStream=h;class v{constructor(A,m){this._manager=A;const f={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=m.url,this._fullRequestId=A.requestFull(f),this._headersReceivedCapability=(0,n.createPromiseCapability)(),this._disableRange=m.disableRange||!1,this._contentLength=m.length,this._rangeChunkSize=m.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const A=this._fullRequestId,m=this._manager.getRequestXhr(A),f=p=>m.getResponseHeader(p),{allowRangeRequests:r,suggestedLength:c}=(0,g.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=(0,g.extractFilenameFromHeader)(f),this._isRangeSupported&&this._manager.abortRequest(A),this._headersReceivedCapability.resolve()}_onDone(A){if(A&&(this._requests.length>0?this._requests.shift().resolve({value:A.chunk,done:!1}):this._cachedChunks.push(A.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(A){this._storedError=(0,g.createResponseStatusError)(A,this._url),this._headersReceivedCapability.reject(this._storedError);for(const m of this._requests)m.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(A){var m;(m=this.onProgress)==null||m.call(this,{loaded:A.loaded,total:A.lengthComputable?A.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const A=(0,n.createPromiseCapability)();return this._requests.push(A),A.promise}cancel(A){this._done=!0,this._headersReceivedCapability.reject(A);for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class I{constructor(A,m,f){this._manager=A;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=A.url,this._requestId=A.requestRange(m,f,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var A;(A=this.onClosed)==null||A.call(this,this)}_onDone(A){const m=A.chunk;this._requests.length>0?this._requests.shift().resolve({value:m,done:!1}):this._queuedChunk=m,this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(A){this._storedError=(0,g.createResponseStatusError)(A,this._url);for(const m of this._requests)m.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(A){var m;this.isStreamingSupported||(m=this.onProgress)==null||m.call(this,{loaded:A.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const m=this._queuedChunk;return this._queuedChunk=null,{value:m,done:!1}}if(this._done)return{value:void 0,done:!0};const A=(0,n.createPromiseCapability)();return this._requests.push(A),A.promise}cancel(A){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(L,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var n=l(1),g=l(22);function T(I,y,A){return{method:"GET",headers:I,signal:A.signal,mode:"cors",credentials:y?"include":"same-origin",redirect:"follow"}}function P(I){const y=new Headers;for(const A in I){const m=I[A];m!==void 0&&y.append(A,m)}return y}function D(I){return I instanceof Uint8Array?I.buffer:I instanceof ArrayBuffer?I:((0,n.warn)(`getArrayBuffer - unexpected data format: ${I}`),new Uint8Array(I).buffer)}class w{constructor(y){this.source=y,this.isHttp=/^https?:/i.test(y.url),this.httpHeaders=this.isHttp&&y.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var y;return((y=this._fullRequestReader)==null?void 0:y._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new h(this),this._fullRequestReader}getRangeReader(y,A){if(A<=this._progressiveDataLength)return null;const m=new v(this,y,A);return this._rangeRequestReaders.push(m),m}cancelAllRequests(y){var A;(A=this._fullRequestReader)==null||A.cancel(y);for(const m of this._rangeRequestReaders.slice(0))m.cancel(y)}}t.PDFFetchStream=w;class h{constructor(y){this._stream=y,this._reader=null,this._loaded=0,this._filename=null;const A=y.source;this._withCredentials=A.withCredentials||!1,this._contentLength=A.length,this._headersCapability=(0,n.createPromiseCapability)(),this._disableRange=A.disableRange||!1,this._rangeChunkSize=A.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!A.disableStream,this._isRangeSupported=!A.disableRange,this._headers=P(this._stream.httpHeaders);const m=A.url;fetch(m,T(this._headers,this._withCredentials,this._abortController)).then(f=>{if(!(0,g.validateResponseStatus)(f.status))throw(0,g.createResponseStatusError)(f.status,m);this._reader=f.body.getReader(),this._headersCapability.resolve();const r=i=>f.headers.get(i),{allowRangeRequests:c,suggestedLength:p}=(0,g.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=p||this._contentLength,this._filename=(0,g.extractFilenameFromHeader)(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var m;await this._headersCapability.promise;const{value:y,done:A}=await this._reader.read();return A?{value:y,done:A}:(this._loaded+=y.byteLength,(m=this.onProgress)==null||m.call(this,{loaded:this._loaded,total:this._contentLength}),{value:D(y),done:!1})}cancel(y){var A;(A=this._reader)==null||A.cancel(y),this._abortController.abort()}}class v{constructor(y,A,m){this._stream=y,this._reader=null,this._loaded=0;const f=y.source;this._withCredentials=f.withCredentials||!1,this._readCapability=(0,n.createPromiseCapability)(),this._isStreamingSupported=!f.disableStream,this._abortController=new AbortController,this._headers=P(this._stream.httpHeaders),this._headers.append("Range",`bytes=${A}-${m-1}`);const r=f.url;fetch(r,T(this._headers,this._withCredentials,this._abortController)).then(c=>{if(!(0,g.validateResponseStatus)(c.status))throw(0,g.createResponseStatusError)(c.status,r);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var m;await this._readCapability.promise;const{value:y,done:A}=await this._reader.read();return A?{value:y,done:A}:(this._loaded+=y.byteLength,(m=this.onProgress)==null||m.call(this,{loaded:this._loaded}),{value:D(y),done:!1})}cancel(y){var A;(A=this._reader)==null||A.cancel(y),this._abortController.abort()}}},(L,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=f,t.updateTextLayer=r;var n=l(1),g=l(6);const T=1e5,P=30,D=.8,w=new Map;function h(c,p){let i;if(p&&n.FeatureTest.isOffscreenCanvasSupported)i=new OffscreenCanvas(c,c).getContext("2d",{alpha:!1});else{const a=document.createElement("canvas");a.width=a.height=c,i=a.getContext("2d",{alpha:!1})}return i}function v(c,p){const i=w.get(c);if(i)return i;const a=h(P,p);a.font=`${P}px ${c}`;const e=a.measureText("");let s=e.fontBoundingBoxAscent,b=Math.abs(e.fontBoundingBoxDescent);if(s){const M=s/(s+b);return w.set(c,M),a.canvas.width=a.canvas.height=0,M}a.strokeStyle="red",a.clearRect(0,0,P,P),a.strokeText("g",0,0);let k=a.getImageData(0,0,P,P).data;b=0;for(let M=k.length-1-3;M>=0;M-=4)if(k[M]>0){b=Math.ceil(M/4/P);break}a.clearRect(0,0,P,P),a.strokeText("A",0,P),k=a.getImageData(0,0,P,P).data,s=0;for(let M=0,q=k.length;M<q;M+=4)if(k[M]>0){s=P-Math.floor(M/4/P);break}if(a.canvas.width=a.canvas.height=0,s){const M=s/(s+b);return w.set(c,M),M}return w.set(c,D),D}function I(c,p,i){const a=document.createElement("span"),e={angle:0,canvasWidth:0,hasText:p.str!=="",hasEOL:p.hasEOL,fontSize:0};c._textDivs.push(a);const s=n.Util.transform(c._transform,p.transform);let b=Math.atan2(s[1],s[0]);const k=i[p.fontName];k.vertical&&(b+=Math.PI/2);const M=Math.hypot(s[2],s[3]),q=M*v(k.fontFamily,c._isOffscreenCanvasSupported);let S,G;b===0?(S=s[4],G=s[5]-q):(S=s[4]+q*Math.sin(b),G=s[5]-q*Math.cos(b));const ht="calc(var(--scale-factor)*",nt=a.style;c._container===c._rootContainer?(nt.left=`${(100*S/c._pageWidth).toFixed(2)}%`,nt.top=`${(100*G/c._pageHeight).toFixed(2)}%`):(nt.left=`${ht}${S.toFixed(2)}px)`,nt.top=`${ht}${G.toFixed(2)}px)`),nt.fontSize=`${ht}${M.toFixed(2)}px)`,nt.fontFamily=k.fontFamily,e.fontSize=M,a.setAttribute("role","presentation"),a.textContent=p.str,a.dir=p.dir,c._fontInspectorEnabled&&(a.dataset.fontName=p.fontName),b!==0&&(e.angle=b*(180/Math.PI));let rt=!1;if(p.str.length>1)rt=!0;else if(p.str!==" "&&p.transform[0]!==p.transform[3]){const K=Math.abs(p.transform[0]),z=Math.abs(p.transform[3]);K!==z&&Math.max(K,z)/Math.min(K,z)>1.5&&(rt=!0)}rt&&(e.canvasWidth=k.vertical?p.height:p.width),c._textDivProperties.set(a,e),c._isReadableStream&&c._layoutText(a)}function y(c){const{div:p,scale:i,properties:a,ctx:e,prevFontSize:s,prevFontFamily:b}=c,{style:k}=p;let M="";if(a.canvasWidth!==0&&a.hasText){const{fontFamily:q}=k,{canvasWidth:S,fontSize:G}=a;(s!==G||b!==q)&&(e.font=`${G*i}px ${q}`,c.prevFontSize=G,c.prevFontFamily=q);const{width:ht}=e.measureText(p.textContent);ht>0&&(M=`scaleX(${S*i/ht})`)}a.angle!==0&&(M=`rotate(${a.angle}deg) ${M}`),M.length>0&&(k.transform=M)}function A(c){if(c._canceled)return;const p=c._textDivs,i=c._capability;if(p.length>T){i.resolve();return}if(!c._isReadableStream)for(const e of p)c._layoutText(e);i.resolve()}class m{constructor({textContentSource:p,container:i,viewport:a,textDivs:e,textDivProperties:s,textContentItemsStr:b,isOffscreenCanvasSupported:k}){var ht;this._textContentSource=p,this._isReadableStream=p instanceof ReadableStream,this._container=this._rootContainer=i,this._textDivs=e||[],this._textContentItemsStr=b||[],this._isOffscreenCanvasSupported=k,this._fontInspectorEnabled=!!((ht=globalThis.FontInspector)!=null&&ht.enabled),this._reader=null,this._textDivProperties=s||new WeakMap,this._canceled=!1,this._capability=(0,n.createPromiseCapability)(),this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:a.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:h(0,k)};const{pageWidth:M,pageHeight:q,pageX:S,pageY:G}=a.rawDims;this._transform=[1,0,0,-1,-S,G+q],this._pageWidth=M,this._pageHeight=q,(0,g.setLayerDimensions)(i,a),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(p,i){for(const a of p){if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const e=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),a.id!==null&&this._container.setAttribute("id",`${a.id}`),e.append(this._container)}else a.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(a.str),I(this,a,i)}}_layoutText(p){const i=this._layoutTextParams.properties=this._textDivProperties.get(p);if(this._layoutTextParams.div=p,y(this._layoutTextParams),i.hasText&&this._container.append(p),i.hasEOL){const a=document.createElement("br");a.setAttribute("role","presentation"),this._container.append(a)}}_render(){const p=(0,n.createPromiseCapability)();let i=Object.create(null);if(this._isReadableStream){const a=()=>{this._reader.read().then(({value:e,done:s})=>{if(s){p.resolve();return}Object.assign(i,e.styles),this._processItems(e.items,i),a()},p.reject)};this._reader=this._textContentSource.getReader(),a()}else if(this._textContentSource){const{items:a,styles:e}=this._textContentSource;this._processItems(a,e),p.resolve()}else throw new Error('No "textContentSource" parameter specified.');p.promise.then(()=>{i=null,A(this)},this._capability.reject)}}t.TextLayerRenderTask=m;function f(c){!c.textContentSource&&(c.textContent||c.textContentStream)&&((0,g.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),c.textContentSource=c.textContent||c.textContentStream);const p=new m(c);return p._render(),p}function r({container:c,viewport:p,textDivs:i,textDivProperties:a,isOffscreenCanvasSupported:e,mustRotate:s=!0,mustRescale:b=!0}){if(s&&(0,g.setLayerDimensions)(c,{rotation:p.rotation}),b){const k=h(0,e),q={prevFontSize:null,prevFontFamily:null,div:null,scale:p.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:k};for(const S of i)q.properties=a.get(S),q.div=S,y(q)}}},(L,t,l)=>{var h,v,I,y,A,m,f,r,c,pe,i,Ie,e,ge,b,me;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var n=l(1),g=l(5),T=l(28),P=l(29),D=l(6);const M=class{constructor(S){lt(this,c);lt(this,i);lt(this,e);lt(this,b);lt(this,h,void 0);lt(this,v,!1);lt(this,I,this.pointerup.bind(this));lt(this,y,this.pointerdown.bind(this));lt(this,A,new Map);lt(this,m,!1);lt(this,f,!1);lt(this,r,void 0);M._initialized||(M._initialized=!0,T.FreeTextEditor.initialize(S.l10n),P.InkEditor.initialize(S.l10n)),S.uiManager.registerEditorTypes([T.FreeTextEditor,P.InkEditor]),vt(this,r,S.uiManager),this.pageIndex=S.pageIndex,this.div=S.div,vt(this,h,S.accessibilityManager),C(this,r).addLayer(this)}get isEmpty(){return C(this,A).size===0}updateToolbar(S){C(this,r).updateToolbar(S)}updateMode(S=C(this,r).getMode()){ut(this,b,me).call(this),S===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),C(this,r).unselectAll(),S!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",S===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",S===n.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(S){if(!S&&C(this,r).getMode()!==n.AnnotationEditorType.INK)return;if(!S){for(const ht of C(this,A).values())if(ht.isEmpty()){ht.setInBackground();return}}ut(this,e,ge).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(S){C(this,r).setEditingState(S)}addCommands(S){C(this,r).addCommands(S)}enable(){this.div.style.pointerEvents="auto";for(const S of C(this,A).values())S.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const S of C(this,A).values())S.disableEditing();ut(this,b,me).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(S){C(this,r).getActive()!==S&&C(this,r).setActiveEditor(S)}enableClick(){this.div.addEventListener("pointerdown",C(this,y)),this.div.addEventListener("pointerup",C(this,I))}disableClick(){this.div.removeEventListener("pointerdown",C(this,y)),this.div.removeEventListener("pointerup",C(this,I))}attach(S){C(this,A).set(S.id,S)}detach(S){var G;C(this,A).delete(S.id),(G=C(this,h))==null||G.removePointerInTextLayer(S.contentDiv)}remove(S){C(this,r).removeEditor(S),this.detach(S),S.div.style.display="none",setTimeout(()=>{S.div.style.display="",S.div.remove(),S.isAttachedToDOM=!1,document.activeElement===document.body&&C(this,r).focusMainContainer()},0),C(this,f)||this.addInkEditorIfNeeded(!1)}add(S){if(ut(this,c,pe).call(this,S),C(this,r).addEditor(S),this.attach(S),!S.isAttachedToDOM){const G=S.render();this.div.append(G),S.isAttachedToDOM=!0}this.moveEditorInDOM(S),S.onceAdded(),C(this,r).addToAnnotationStorage(S)}moveEditorInDOM(S){var G;(G=C(this,h))==null||G.moveElementInDOM(this.div,S.div,S.contentDiv,!0)}addOrRebuild(S){S.needsToBeRebuilt()?S.rebuild():this.add(S)}addANewEditor(S){const G=()=>{this.addOrRebuild(S)},ht=()=>{S.remove()};this.addCommands({cmd:G,undo:ht,mustExec:!0})}addUndoableEditor(S){const G=()=>{this.addOrRebuild(S)},ht=()=>{S.remove()};this.addCommands({cmd:G,undo:ht,mustExec:!1})}getNextId(){return C(this,r).getId()}deserialize(S){switch(S.annotationType){case n.AnnotationEditorType.FREETEXT:return T.FreeTextEditor.deserialize(S,this,C(this,r));case n.AnnotationEditorType.INK:return P.InkEditor.deserialize(S,this,C(this,r))}return null}setSelected(S){C(this,r).setSelected(S)}toggleSelected(S){C(this,r).toggleSelected(S)}isSelected(S){return C(this,r).isSelected(S)}unselect(S){C(this,r).unselect(S)}pointerup(S){const{isMac:G}=n.FeatureTest.platform;if(!(S.button!==0||S.ctrlKey&&G)&&S.target===this.div&&C(this,m)){if(vt(this,m,!1),!C(this,v)){vt(this,v,!0);return}ut(this,e,ge).call(this,S)}}pointerdown(S){const{isMac:G}=n.FeatureTest.platform;if(S.button!==0||S.ctrlKey&&G||S.target!==this.div)return;vt(this,m,!0);const ht=C(this,r).getActive();vt(this,v,!ht||ht.isEmpty())}drop(S){const G=S.dataTransfer.getData("text/plain"),ht=C(this,r).getEditor(G);if(!ht)return;S.preventDefault(),S.dataTransfer.dropEffect="move",ut(this,c,pe).call(this,ht);const nt=this.div.getBoundingClientRect(),rt=S.clientX-nt.x,K=S.clientY-nt.y;ht.translate(rt-ht.startX,K-ht.startY),this.moveEditorInDOM(ht),ht.div.focus()}dragover(S){S.preventDefault()}destroy(){var S,G;((S=C(this,r).getActive())==null?void 0:S.parent)===this&&C(this,r).setActiveEditor(null);for(const ht of C(this,A).values())(G=C(this,h))==null||G.removePointerInTextLayer(ht.contentDiv),ht.setParent(null),ht.isAttachedToDOM=!1,ht.div.remove();this.div=null,C(this,A).clear(),C(this,r).removeLayer(this)}render({viewport:S}){this.viewport=S,(0,D.setLayerDimensions)(this.div,S),(0,g.bindEvents)(this,this.div,["dragover","drop"]);for(const G of C(this,r).getEditors(this.pageIndex))this.add(G);this.updateMode()}update({viewport:S}){C(this,r).commitOrRemove(),this.viewport=S,(0,D.setLayerDimensions)(this.div,{rotation:S.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:S,pageHeight:G}=this.viewport.rawDims;return[S,G]}};let w=M;h=new WeakMap,v=new WeakMap,I=new WeakMap,y=new WeakMap,A=new WeakMap,m=new WeakMap,f=new WeakMap,r=new WeakMap,c=new WeakSet,pe=function(S){var G;S.parent!==this&&(this.attach(S),(G=S.parent)==null||G.detach(S),S.setParent(this),S.div&&S.isAttachedToDOM&&(S.div.remove(),this.div.append(S.div)))},i=new WeakSet,Ie=function(S){switch(C(this,r).getMode()){case n.AnnotationEditorType.FREETEXT:return new T.FreeTextEditor(S);case n.AnnotationEditorType.INK:return new P.InkEditor(S)}return null},e=new WeakSet,ge=function(S){const G=this.getNextId(),ht=ut(this,i,Ie).call(this,{parent:this,id:G,x:S.offsetX,y:S.offsetY,uiManager:C(this,r)});return ht&&this.add(ht),ht},b=new WeakSet,me=function(){vt(this,f,!0);for(const S of C(this,A).values())S.isEmpty()&&S.remove();vt(this,f,!1)},Ot(w,"_initialized",!1),t.AnnotationEditorLayer=w},(L,t,l)=>{var D,w,h,v,I,y,A,m,f,r,Le,p,Ne,a,je,s,_e;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var n=l(1),g=l(5),T=l(4);const k=class extends T.AnnotationEditor{constructor(S){super({...S,name:"freeTextEditor"});lt(this,r);lt(this,p);lt(this,a);lt(this,s);lt(this,D,this.editorDivBlur.bind(this));lt(this,w,this.editorDivFocus.bind(this));lt(this,h,this.editorDivInput.bind(this));lt(this,v,this.editorDivKeydown.bind(this));lt(this,I,void 0);lt(this,y,"");lt(this,A,`${this.id}-editor`);lt(this,m,!1);lt(this,f,void 0);vt(this,I,S.color||k._defaultColor||T.AnnotationEditor._defaultLineColor),vt(this,f,S.fontSize||k._defaultFontSize)}static initialize(S){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(ht=>[ht,S.get(ht)]));const G=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(G.getPropertyValue("--freetext-padding"))}static updateDefaultParams(S,G){switch(S){case n.AnnotationEditorParamsType.FREETEXT_SIZE:k._defaultFontSize=G;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:k._defaultColor=G;break}}updateParams(S,G){switch(S){case n.AnnotationEditorParamsType.FREETEXT_SIZE:ut(this,r,Le).call(this,G);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:ut(this,p,Ne).call(this,G);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,k._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,k._defaultColor||T.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,C(this,f)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,C(this,I)]]}getInitialTranslation(){const S=this.parentScale;return[-k._internalPadding*S,-(k._internalPadding+C(this,f))*S]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",C(this,v)),this.editorDiv.addEventListener("focus",C(this,w)),this.editorDiv.addEventListener("blur",C(this,D)),this.editorDiv.addEventListener("input",C(this,h)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",C(this,A)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",C(this,v)),this.editorDiv.removeEventListener("focus",C(this,w)),this.editorDiv.removeEventListener("blur",C(this,D)),this.editorDiv.removeEventListener("input",C(this,h)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(S){super.focusin(S),S.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),C(this,m)||(vt(this,m,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),vt(this,y,ut(this,a,je).call(this).trimEnd()),ut(this,s,_e).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(S){this.enableEditMode(),this.editorDiv.focus()}keydown(S){S.target===this.div&&S.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(S){k._keyboardManager.exec(this,S)}editorDivFocus(S){this.isEditing=!0}editorDivBlur(S){this.isEditing=!1}editorDivInput(S){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let S,G;this.width&&(S=this.x,G=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",C(this,A)),this.enableEditing(),k._l10nPromise.get("editor_free_text2_aria_label").then(nt=>{var rt;return(rt=this.editorDiv)==null?void 0:rt.setAttribute("aria-label",nt)}),k._l10nPromise.get("free_text2_default_content").then(nt=>{var rt;return(rt=this.editorDiv)==null?void 0:rt.setAttribute("default-content",nt)}),this.editorDiv.contentEditable=!0;const{style:ht}=this.editorDiv;if(ht.fontSize=`calc(${C(this,f)}px * var(--scale-factor))`,ht.color=C(this,I),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,g.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[nt,rt]=this.parentDimensions;this.setAt(S*nt,G*rt,this.width*nt,this.height*rt);for(const K of C(this,y).split(`
`)){const z=document.createElement("div");z.append(K?document.createTextNode(K):document.createElement("br")),this.editorDiv.append(z)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(S,G,ht){const nt=super.deserialize(S,G,ht);return vt(nt,f,S.fontSize),vt(nt,I,n.Util.makeHexColor(...S.color)),vt(nt,y,S.value),nt}serialize(){if(this.isEmpty())return null;const S=k._internalPadding*this.parentScale,G=this.getRect(S,S),ht=T.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:C(this,I));return{annotationType:n.AnnotationEditorType.FREETEXT,color:ht,fontSize:C(this,f),value:C(this,y),pageIndex:this.pageIndex,rect:G,rotation:this.rotation}}};let P=k;D=new WeakMap,w=new WeakMap,h=new WeakMap,v=new WeakMap,I=new WeakMap,y=new WeakMap,A=new WeakMap,m=new WeakMap,f=new WeakMap,r=new WeakSet,Le=function(S){const G=nt=>{this.editorDiv.style.fontSize=`calc(${nt}px * var(--scale-factor))`,this.translate(0,-(nt-C(this,f))*this.parentScale),vt(this,f,nt),ut(this,s,_e).call(this)},ht=C(this,f);this.addCommands({cmd:()=>{G(S)},undo:()=>{G(ht)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},p=new WeakSet,Ne=function(S){const G=C(this,I);this.addCommands({cmd:()=>{vt(this,I,this.editorDiv.style.color=S)},undo:()=>{vt(this,I,this.editorDiv.style.color=G)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},a=new WeakSet,je=function(){const S=this.editorDiv.getElementsByTagName("div");if(S.length===0)return this.editorDiv.innerText;const G=[];for(const ht of S)G.push(ht.innerText.replace(/\r\n?|\n/,""));return G.join(`
`)},s=new WeakSet,_e=function(){const[S,G]=this.parentDimensions;let ht;if(this.isAttachedToDOM)ht=this.div.getBoundingClientRect();else{const{currentLayer:nt,div:rt}=this,K=rt.style.display;rt.style.display="hidden",nt.div.append(this.div),ht=rt.getBoundingClientRect(),rt.remove(),rt.style.display=K}this.width=ht.width/S,this.height=ht.height/G},Ot(P,"_freeTextDefaultContent",""),Ot(P,"_l10nPromise"),Ot(P,"_internalPadding",0),Ot(P,"_defaultColor",null),Ot(P,"_defaultFontSize",10),Ot(P,"_keyboardManager",new g.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],k.prototype.commitOrRemove]])),Ot(P,"_type","freetext"),t.FreeTextEditor=P},(L,t,l)=>{var v,I,y,A,m,f,r,c,p,i,a,e,s,b,k,Ue,q,Be,G,He,nt,We,K,be,X,qe,ct,Ve,u,Ge,E,qt,O,ve,W,ee,Q,ne,st,zt,d,Ae,x,se,F,ye,ot,ze,ft,Xe,_t,$e,mt,Se,St,ie,Et,Xt,H,Ee;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0,Object.defineProperty(t,"fitCurve",{enumerable:!0,get:function(){return T.fitCurve}});var n=l(1),g=l(4),T=l(30),P=l(5);const D=16,w=100,gt=class extends g.AnnotationEditor{constructor(tt){super({...tt,name:"inkEditor"});lt(this,k);lt(this,q);lt(this,G);lt(this,nt);lt(this,K);lt(this,X);lt(this,ct);lt(this,u);lt(this,E);lt(this,O);lt(this,W);lt(this,Q);lt(this,st);lt(this,d);lt(this,x);lt(this,ot);lt(this,ft);lt(this,_t);lt(this,mt);lt(this,St);lt(this,Et);lt(this,H);lt(this,v,0);lt(this,I,0);lt(this,y,0);lt(this,A,this.canvasPointermove.bind(this));lt(this,m,this.canvasPointerleave.bind(this));lt(this,f,this.canvasPointerup.bind(this));lt(this,r,this.canvasPointerdown.bind(this));lt(this,c,!1);lt(this,p,!1);lt(this,i,null);lt(this,a,null);lt(this,e,0);lt(this,s,0);lt(this,b,null);this.color=tt.color||null,this.thickness=tt.thickness||null,this.opacity=tt.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(tt){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(pt=>[pt,tt.get(pt)]))}static updateDefaultParams(tt,pt){switch(tt){case n.AnnotationEditorParamsType.INK_THICKNESS:gt._defaultThickness=pt;break;case n.AnnotationEditorParamsType.INK_COLOR:gt._defaultColor=pt;break;case n.AnnotationEditorParamsType.INK_OPACITY:gt._defaultOpacity=pt/100;break}}updateParams(tt,pt){switch(tt){case n.AnnotationEditorParamsType.INK_THICKNESS:ut(this,k,Ue).call(this,pt);break;case n.AnnotationEditorParamsType.INK_COLOR:ut(this,q,Be).call(this,pt);break;case n.AnnotationEditorParamsType.INK_OPACITY:ut(this,G,He).call(this,pt);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,gt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,gt._defaultColor||g.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(gt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||gt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||gt._defaultColor||g.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??gt._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(ut(this,W,ee).call(this),ut(this,Q,ne).call(this)),this.isAttachedToDOM||(this.parent.add(this),ut(this,st,zt).call(this)),ut(this,Et,Xt).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,C(this,a).disconnect(),vt(this,a,null),super.remove())}setParent(tt){!this.parent&&tt?this._uiManager.removeShouldRescale(this):this.parent&&tt===null&&this._uiManager.addShouldRescale(this),super.setParent(tt)}onScaleChanging(){const[tt,pt]=this.parentDimensions,At=this.width*tt,yt=this.height*pt;this.setDimensions(At,yt)}enableEditMode(){C(this,c)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",C(this,r)),this.canvas.addEventListener("pointerup",C(this,f)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",C(this,r)),this.canvas.removeEventListener("pointerup",C(this,f)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){C(this,c)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),vt(this,c,!0),this.div.classList.add("disabled"),ut(this,Et,Xt).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(tt){super.focusin(tt),this.enableEditMode()}canvasPointerdown(tt){tt.button!==0||!this.isInEditMode()||C(this,c)||(this.setInForeground(),tt.type!=="mouse"&&this.div.focus(),tt.stopPropagation(),this.canvas.addEventListener("pointerleave",C(this,m)),this.canvas.addEventListener("pointermove",C(this,A)),ut(this,X,qe).call(this,tt.offsetX,tt.offsetY))}canvasPointermove(tt){tt.stopPropagation(),ut(this,ct,Ve).call(this,tt.offsetX,tt.offsetY)}canvasPointerup(tt){tt.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(tt.stopPropagation(),ut(this,O,ve).call(this,tt),this.setInBackground())}canvasPointerleave(tt){ut(this,O,ve).call(this,tt),this.setInBackground()}render(){if(this.div)return this.div;let tt,pt;this.width&&(tt=this.x,pt=this.y),super.render(),gt._l10nPromise.get("editor_ink2_aria_label").then(Pt=>{var xt;return(xt=this.div)==null?void 0:xt.setAttribute("aria-label",Pt)});const[At,yt,Tt,Ft]=ut(this,nt,We).call(this);if(this.setAt(At,yt,0,0),this.setDims(Tt,Ft),ut(this,W,ee).call(this),this.width){const[Pt,xt]=this.parentDimensions;this.setAt(tt*Pt,pt*xt,this.width*Pt,this.height*xt),vt(this,p,!0),ut(this,st,zt).call(this),this.setDims(this.width*Pt,this.height*xt),ut(this,E,qt).call(this),ut(this,H,Ee).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ut(this,Q,ne).call(this),this.div}setDimensions(tt,pt){const At=Math.round(tt),yt=Math.round(pt);if(C(this,e)===At&&C(this,s)===yt)return;vt(this,e,At),vt(this,s,yt),this.canvas.style.visibility="hidden",C(this,v)&&Math.abs(C(this,v)-tt/pt)>.01&&(pt=Math.ceil(tt/C(this,v)),this.setDims(tt,pt));const[Tt,Ft]=this.parentDimensions;this.width=tt/Tt,this.height=pt/Ft,C(this,c)&&ut(this,d,Ae).call(this,tt,pt),ut(this,st,zt).call(this),ut(this,E,qt).call(this),this.canvas.style.visibility="visible"}static deserialize(tt,pt,At){var It,Lt;const yt=super.deserialize(tt,pt,At);yt.thickness=tt.thickness,yt.color=n.Util.makeHexColor(...tt.color),yt.opacity=tt.opacity;const[Tt,Ft]=yt.pageDimensions,Pt=yt.width*Tt,xt=yt.height*Ft,kt=yt.parentScale,Rt=tt.thickness/2;vt(yt,v,Pt/xt),vt(yt,c,!0),vt(yt,e,Math.round(Pt)),vt(yt,s,Math.round(xt));for(const{bezier:Nt}of tt.paths){const Dt=[];yt.paths.push(Dt);let Ut=kt*(Nt[0]-Rt),Bt=kt*(xt-Nt[1]-Rt);for(let Ht=2,Kt=Nt.length;Ht<Kt;Ht+=6){const Jt=kt*(Nt[Ht]-Rt),Qt=kt*(xt-Nt[Ht+1]-Rt),Zt=kt*(Nt[Ht+2]-Rt),te=kt*(xt-Nt[Ht+3]-Rt),Te=kt*(Nt[Ht+4]-Rt),Pe=kt*(xt-Nt[Ht+5]-Rt);Dt.push([[Ut,Bt],[Jt,Qt],[Zt,te],[Te,Pe]]),Ut=Te,Bt=Pe}const Vt=ut(this,F,ye).call(this,Dt);yt.bezierPath2D.push(Vt)}const jt=ut(It=yt,mt,Se).call(It);return vt(yt,y,Math.max(D,jt[2]-jt[0])),vt(yt,I,Math.max(D,jt[3]-jt[1])),ut(Lt=yt,d,Ae).call(Lt,Pt,xt),yt}serialize(){if(this.isEmpty())return null;const tt=this.getRect(0,0),pt=this.rotation%180===0?tt[3]-tt[1]:tt[2]-tt[0],At=g.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:At,thickness:this.thickness,opacity:this.opacity,paths:ut(this,ot,ze).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,pt),pageIndex:this.pageIndex,rect:tt,rotation:this.rotation}}};let h=gt;v=new WeakMap,I=new WeakMap,y=new WeakMap,A=new WeakMap,m=new WeakMap,f=new WeakMap,r=new WeakMap,c=new WeakMap,p=new WeakMap,i=new WeakMap,a=new WeakMap,e=new WeakMap,s=new WeakMap,b=new WeakMap,k=new WeakSet,Ue=function(tt){const pt=this.thickness;this.addCommands({cmd:()=>{this.thickness=tt,ut(this,Et,Xt).call(this)},undo:()=>{this.thickness=pt,ut(this,Et,Xt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},q=new WeakSet,Be=function(tt){const pt=this.color;this.addCommands({cmd:()=>{this.color=tt,ut(this,E,qt).call(this)},undo:()=>{this.color=pt,ut(this,E,qt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},G=new WeakSet,He=function(tt){tt/=100;const pt=this.opacity;this.addCommands({cmd:()=>{this.opacity=tt,ut(this,E,qt).call(this)},undo:()=>{this.opacity=pt,ut(this,E,qt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},nt=new WeakSet,We=function(){const{parentRotation:tt,parentDimensions:[pt,At]}=this;switch(tt){case 90:return[0,At,At,pt];case 180:return[pt,At,pt,At];case 270:return[pt,0,At,pt];default:return[0,0,pt,At]}},K=new WeakSet,be=function(){const{ctx:tt,color:pt,opacity:At,thickness:yt,parentScale:Tt,scaleFactor:Ft}=this;tt.lineWidth=yt*Tt/Ft,tt.lineCap="round",tt.lineJoin="round",tt.miterLimit=10,tt.strokeStyle=`${pt}${(0,P.opacityToHex)(At)}`},X=new WeakSet,qe=function(tt,pt){this.isEditing=!0,C(this,p)||(vt(this,p,!0),ut(this,st,zt).call(this),this.thickness||(this.thickness=gt._defaultThickness),this.color||(this.color=gt._defaultColor||g.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=gt._defaultOpacity)),this.currentPath.push([tt,pt]),vt(this,i,null),ut(this,K,be).call(this),this.ctx.beginPath(),this.ctx.moveTo(tt,pt),vt(this,b,()=>{C(this,b)&&(C(this,i)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):ut(this,E,qt).call(this),this.ctx.lineTo(...C(this,i)),vt(this,i,null),this.ctx.stroke()),window.requestAnimationFrame(C(this,b)))}),window.requestAnimationFrame(C(this,b))},ct=new WeakSet,Ve=function(tt,pt){const[At,yt]=this.currentPath.at(-1);tt===At&&pt===yt||(this.currentPath.push([tt,pt]),vt(this,i,[tt,pt]))},u=new WeakSet,Ge=function(tt,pt){var kt;this.ctx.closePath(),vt(this,b,null),tt=Math.min(Math.max(tt,0),this.canvas.width),pt=Math.min(Math.max(pt,0),this.canvas.height);const[At,yt]=this.currentPath.at(-1);(tt!==At||pt!==yt)&&this.currentPath.push([tt,pt]);let Tt;if(this.currentPath.length!==1)Tt=(0,T.fitCurve)(this.currentPath,30,null);else{const Rt=[tt,pt];Tt=[[Rt,Rt.slice(),Rt.slice(),Rt]]}const Ft=ut(kt=gt,F,ye).call(kt,Tt);this.currentPath.length=0;const Pt=()=>{this.paths.push(Tt),this.bezierPath2D.push(Ft),this.rebuild()},xt=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ut(this,W,ee).call(this),ut(this,Q,ne).call(this)),ut(this,Et,Xt).call(this))};this.addCommands({cmd:Pt,undo:xt,mustExec:!0})},E=new WeakSet,qt=function(){if(this.isEmpty()){ut(this,x,se).call(this);return}ut(this,K,be).call(this);const{canvas:tt,ctx:pt}=this;pt.setTransform(1,0,0,1,0,0),pt.clearRect(0,0,tt.width,tt.height),ut(this,x,se).call(this);for(const At of this.bezierPath2D)pt.stroke(At)},O=new WeakSet,ve=function(tt){ut(this,u,Ge).call(this,tt.offsetX,tt.offsetY),this.canvas.removeEventListener("pointerleave",C(this,m)),this.canvas.removeEventListener("pointermove",C(this,A)),this.addToAnnotationStorage()},W=new WeakSet,ee=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",gt._l10nPromise.get("editor_ink_canvas_aria_label").then(tt=>{var pt;return(pt=this.canvas)==null?void 0:pt.setAttribute("aria-label",tt)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Q=new WeakSet,ne=function(){let tt=null;vt(this,a,new ResizeObserver(pt=>{const At=pt[0].contentRect;At.width&&At.height&&(tt!==null&&clearTimeout(tt),tt=setTimeout(()=>{this.fixDims(),tt=null},w),this.setDimensions(At.width,At.height))})),C(this,a).observe(this.div)},st=new WeakSet,zt=function(){if(!C(this,p))return;const[tt,pt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*tt),this.canvas.height=Math.ceil(this.height*pt),ut(this,x,se).call(this)},d=new WeakSet,Ae=function(tt,pt){const At=ut(this,St,ie).call(this),yt=(tt-At)/C(this,y),Tt=(pt-At)/C(this,I);this.scaleFactor=Math.min(yt,Tt)},x=new WeakSet,se=function(){const tt=ut(this,St,ie).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+tt,this.translationY*this.scaleFactor+tt)},F=new WeakSet,ye=function(tt){const pt=new Path2D;for(let At=0,yt=tt.length;At<yt;At++){const[Tt,Ft,Pt,xt]=tt[At];At===0&&pt.moveTo(...Tt),pt.bezierCurveTo(Ft[0],Ft[1],Pt[0],Pt[1],xt[0],xt[1])}return pt},ot=new WeakSet,ze=function(tt,pt,At,yt){const Ft=[],Pt=this.thickness/2;let xt,kt;for(const Rt of this.paths){xt=[],kt=[];for(let jt=0,It=Rt.length;jt<It;jt++){const[Lt,Nt,Dt,Ut]=Rt[jt],Bt=tt*(Lt[0]+pt)+Pt,Vt=yt-tt*(Lt[1]+At)-Pt,Ht=tt*(Nt[0]+pt)+Pt,Kt=yt-tt*(Nt[1]+At)-Pt,Jt=tt*(Dt[0]+pt)+Pt,Qt=yt-tt*(Dt[1]+At)-Pt,Zt=tt*(Ut[0]+pt)+Pt,te=yt-tt*(Ut[1]+At)-Pt;jt===0&&(xt.push(Bt,Vt),kt.push(Bt,Vt)),xt.push(Ht,Kt,Jt,Qt,Zt,te),ut(this,ft,Xe).call(this,Bt,Vt,Ht,Kt,Jt,Qt,Zt,te,4,kt)}Ft.push({bezier:xt,points:kt})}return Ft},ft=new WeakSet,Xe=function(tt,pt,At,yt,Tt,Ft,Pt,xt,kt,Rt){if(ut(this,_t,$e).call(this,tt,pt,At,yt,Tt,Ft,Pt,xt)){Rt.push(Pt,xt);return}for(let jt=1;jt<kt-1;jt++){const It=jt/kt,Lt=1-It;let Nt=It*tt+Lt*At,Dt=It*pt+Lt*yt,Ut=It*At+Lt*Tt,Bt=It*yt+Lt*Ft;const Vt=It*Tt+Lt*Pt,Ht=It*Ft+Lt*xt;Nt=It*Nt+Lt*Ut,Dt=It*Dt+Lt*Bt,Ut=It*Ut+Lt*Vt,Bt=It*Bt+Lt*Ht,Nt=It*Nt+Lt*Ut,Dt=It*Dt+Lt*Bt,Rt.push(Nt,Dt)}Rt.push(Pt,xt)},_t=new WeakSet,$e=function(tt,pt,At,yt,Tt,Ft,Pt,xt){const Rt=(3*At-2*tt-Pt)**2,jt=(3*yt-2*pt-xt)**2,It=(3*Tt-tt-2*Pt)**2,Lt=(3*Ft-pt-2*xt)**2;return Math.max(Rt,It)+Math.max(jt,Lt)<=10},mt=new WeakSet,Se=function(){let tt=1/0,pt=-1/0,At=1/0,yt=-1/0;for(const Tt of this.paths)for(const[Ft,Pt,xt,kt]of Tt){const Rt=n.Util.bezierBoundingBox(...Ft,...Pt,...xt,...kt);tt=Math.min(tt,Rt[0]),At=Math.min(At,Rt[1]),pt=Math.max(pt,Rt[2]),yt=Math.max(yt,Rt[3])}return[tt,At,pt,yt]},St=new WeakSet,ie=function(){return C(this,c)?Math.ceil(this.thickness*this.parentScale):0},Et=new WeakSet,Xt=function(tt=!1){if(this.isEmpty())return;if(!C(this,c)){ut(this,E,qt).call(this);return}const pt=ut(this,mt,Se).call(this),At=ut(this,St,ie).call(this);vt(this,y,Math.max(D,pt[2]-pt[0])),vt(this,I,Math.max(D,pt[3]-pt[1]));const yt=Math.ceil(At+C(this,y)*this.scaleFactor),Tt=Math.ceil(At+C(this,I)*this.scaleFactor),[Ft,Pt]=this.parentDimensions;this.width=yt/Ft,this.height=Tt/Pt,vt(this,v,yt/Tt),ut(this,H,Ee).call(this);const xt=this.translationX,kt=this.translationY;this.translationX=-pt[0],this.translationY=-pt[1],ut(this,st,zt).call(this),ut(this,E,qt).call(this),vt(this,e,yt),vt(this,s,Tt),this.setDims(yt,Tt);const Rt=tt?At/this.scaleFactor/2:0;this.translate(xt-this.translationX-Rt,kt-this.translationY-Rt)},H=new WeakSet,Ee=function(){const{style:tt}=this.div;C(this,v)>=1?(tt.minHeight=`${D}px`,tt.minWidth=`${Math.round(C(this,v)*D)}px`):(tt.minWidth=`${D}px`,tt.minHeight=`${Math.round(D/C(this,v))}px`)},lt(h,F),Ot(h,"_defaultColor",null),Ot(h,"_defaultOpacity",1),Ot(h,"_defaultThickness",1),Ot(h,"_l10nPromise"),Ot(h,"_type","ink"),t.InkEditor=h},(L,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fitCurve=void 0;const n=l(31);t.fitCurve=n},L=>{function t(m,f,r){if(!Array.isArray(m))throw new TypeError("First argument should be an array");if(m.forEach(a=>{if(!Array.isArray(a)||a.some(e=>typeof e!="number")||a.length!==m[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),m=m.filter((a,e)=>e===0||!a.every((s,b)=>s===m[e-1][b])),m.length<2)return[];const c=m.length,p=I(m[1],m[0]),i=I(m[c-2],m[c-1]);return l(m,p,i,f,r)}function l(m,f,r,c,p){var a,e,s,b,k,M,q,S,G,ht,nt,rt,K;if(m.length===2)return rt=y.vectorLen(y.subtract(m[0],m[1]))/3,a=[m[0],y.addArrays(m[0],y.mulItems(f,rt)),y.addArrays(m[1],y.mulItems(r,rt)),m[1]],[a];if(e=D(m),[a,b,M]=n(m,e,e,f,r,p),b===0||b<c)return[a];if(b<c*c)for(s=e,k=b,q=M,K=0;K<20;K++){if(s=T(a,m,s),[a,b,M]=n(m,e,s,f,r,p),b<c)return[a];if(M===q){let z=b/k;if(z>.9999&&z<1.0001)break}k=b,q=M}return nt=[],S=y.subtract(m[M-1],m[M+1]),S.every(z=>z===0)&&(S=y.subtract(m[M-1],m[M]),[S[0],S[1]]=[-S[1],S[0]]),G=y.normalize(S),ht=y.mulItems(G,-1),nt=nt.concat(l(m.slice(0,M+1),f,G,c,p)),nt=nt.concat(l(m.slice(M),ht,r,c,p)),nt}function n(m,f,r,c,p,i){var a,e,s;return a=g(m,r,c,p),[e,s]=w(m,a,f),i&&i({bez:a,points:m,params:f,maxErr:e,maxPoint:s}),[a,e,s]}function g(m,f,r,c){var p,i,a,e,s,b,k,M,q,S,G,ht,nt,rt,K,z,X,at=m[0],ct=m[m.length-1];for(p=[at,null,null,ct],i=y.zeros_Xx2x2(f.length),nt=0,rt=f.length;nt<rt;nt++)z=f[nt],X=1-z,a=i[nt],a[0]=y.mulItems(r,3*z*(X*X)),a[1]=y.mulItems(c,3*X*(z*z));for(e=[[0,0],[0,0]],s=[0,0],nt=0,rt=m.length;nt<rt;nt++)z=f[nt],a=i[nt],e[0][0]+=y.dot(a[0],a[0]),e[0][1]+=y.dot(a[0],a[1]),e[1][0]+=y.dot(a[0],a[1]),e[1][1]+=y.dot(a[1],a[1]),K=y.subtract(m[nt],A.q([at,at,ct,ct],z)),s[0]+=y.dot(a[0],K),s[1]+=y.dot(a[1],K);return b=e[0][0]*e[1][1]-e[1][0]*e[0][1],k=e[0][0]*s[1]-e[1][0]*s[0],M=s[0]*e[1][1]-s[1]*e[0][1],q=b===0?0:M/b,S=b===0?0:k/b,ht=y.vectorLen(y.subtract(at,ct)),G=1e-6*ht,q<G||S<G?(p[1]=y.addArrays(at,y.mulItems(r,ht/3)),p[2]=y.addArrays(ct,y.mulItems(c,ht/3))):(p[1]=y.addArrays(at,y.mulItems(r,q)),p[2]=y.addArrays(ct,y.mulItems(c,S))),p}function T(m,f,r){return r.map((c,p)=>P(m,f[p],c))}function P(m,f,r){var c=y.subtract(A.q(m,r),f),p=A.qprime(m,r),i=y.mulMatrix(c,p),a=y.sum(y.squareItems(p))+2*y.mulMatrix(c,A.qprimeprime(m,r));return a===0?r:r-i/a}function D(m){var f=[],r,c,p;return m.forEach((i,a)=>{r=a?c+y.vectorLen(y.subtract(i,p)):0,f.push(r),c=r,p=i}),f=f.map(i=>i/c),f}function w(m,f,r){var c,p,i,a,e,s,b,k;p=0,i=Math.floor(m.length/2);const M=h(f,10);for(e=0,s=m.length;e<s;e++)b=m[e],k=v(f,r[e],M,10),a=y.subtract(A.q(f,k),b),c=a[0]*a[0]+a[1]*a[1],c>p&&(p=c,i=e);return[p,i]}var h=function(m,f){for(var r,c=[0],p=m[0],i=0,a=1;a<=f;a++)r=A.q(m,a/f),i+=y.vectorLen(y.subtract(r,p)),c.push(i),p=r;return c=c.map(e=>e/i),c};function v(m,f,r,c){if(f<0)return 0;if(f>1)return 1;for(var p,i,a,e,s,b=1;b<=c;b++)if(f<=r[b]){e=(b-1)/c,a=b/c,i=r[b-1],p=r[b],s=(f-i)/(p-i)*(a-e)+e;break}return s}function I(m,f){return y.normalize(y.subtract(m,f))}class y{static zeros_Xx2x2(f){for(var r=[];f--;)r.push([0,0]);return r}static mulItems(f,r){return f.map(c=>c*r)}static mulMatrix(f,r){return f.reduce((c,p,i)=>c+p*r[i],0)}static subtract(f,r){return f.map((c,p)=>c-r[p])}static addArrays(f,r){return f.map((c,p)=>c+r[p])}static addItems(f,r){return f.map(c=>c+r)}static sum(f){return f.reduce((r,c)=>r+c)}static dot(f,r){return y.mulMatrix(f,r)}static vectorLen(f){return Math.hypot(...f)}static divItems(f,r){return f.map(c=>c/r)}static squareItems(f){return f.map(r=>r*r)}static normalize(f){return this.divItems(f,this.vectorLen(f))}}class A{static q(f,r){var c=1-r,p=y.mulItems(f[0],c*c*c),i=y.mulItems(f[1],3*c*c*r),a=y.mulItems(f[2],3*c*r*r),e=y.mulItems(f[3],r*r*r);return y.addArrays(y.addArrays(p,i),y.addArrays(a,e))}static qprime(f,r){var c=1-r,p=y.mulItems(y.subtract(f[1],f[0]),3*c*c),i=y.mulItems(y.subtract(f[2],f[1]),6*c*r),a=y.mulItems(y.subtract(f[3],f[2]),3*r*r);return y.addArrays(y.addArrays(p,i),a)}static qprimeprime(f,r){return y.addArrays(y.mulItems(y.addArrays(y.subtract(f[2],y.mulItems(f[1],2)),f[0]),6*(1-r)),y.mulItems(y.addArrays(y.subtract(f[3],y.mulItems(f[2],2)),f[1]),6*r))}}L.exports=t,L.exports.fitCubic=l,L.exports.createTangent=I},(L,t,l)=>{var o,Gt,R,Ye,W,Ce,Q,we;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var n=l(1),g=l(6),T=l(3),P=l(33),D=l(34);const w=1e3,h=9,v=new WeakSet;function I(Z){return{width:Z[2]-Z[0],height:Z[3]-Z[1]}}class y{static create(d){switch(d.data.annotationType){case n.AnnotationType.LINK:return new m(d);case n.AnnotationType.TEXT:return new f(d);case n.AnnotationType.WIDGET:switch(d.data.fieldType){case"Tx":return new c(d);case"Btn":return d.data.radioButton?new i(d):d.data.checkBox?new p(d):new a(d);case"Ch":return new e(d)}return new r(d);case n.AnnotationType.POPUP:return new s(d);case n.AnnotationType.FREETEXT:return new k(d);case n.AnnotationType.LINE:return new M(d);case n.AnnotationType.SQUARE:return new q(d);case n.AnnotationType.CIRCLE:return new S(d);case n.AnnotationType.POLYLINE:return new G(d);case n.AnnotationType.CARET:return new nt(d);case n.AnnotationType.INK:return new rt(d);case n.AnnotationType.POLYGON:return new ht(d);case n.AnnotationType.HIGHLIGHT:return new K(d);case n.AnnotationType.UNDERLINE:return new z(d);case n.AnnotationType.SQUIGGLY:return new X(d);case n.AnnotationType.STRIKEOUT:return new at(d);case n.AnnotationType.STAMP:return new ct(d);case n.AnnotationType.FILEATTACHMENT:return new N(d);default:return new A(d)}}}class A{constructor(d,{isRenderable:_=!1,ignoreBorder:x=!1,createQuadrilaterals:j=!1}={}){this.isRenderable=_,this.data=d.data,this.layer=d.layer,this.page=d.page,this.viewport=d.viewport,this.linkService=d.linkService,this.downloadManager=d.downloadManager,this.imageResourcesPath=d.imageResourcesPath,this.renderForms=d.renderForms,this.svgFactory=d.svgFactory,this.annotationStorage=d.annotationStorage,this.enableScripting=d.enableScripting,this.hasJSActions=d.hasJSActions,this._fieldObjects=d.fieldObjects,_&&(this.container=this._createContainer(x)),j&&(this.quadrilaterals=this._createQuadrilaterals(x))}_createContainer(d=!1){const{data:_,page:x,viewport:j}=this,F=document.createElement("section");F.setAttribute("data-annotation-id",_.id);const{pageWidth:$,pageHeight:ot,pageX:dt,pageY:ft}=j.rawDims,{width:et,height:_t}=I(_.rect),it=n.Util.normalizeRect([_.rect[0],x.view[3]-_.rect[1]+x.view[1],_.rect[2],x.view[3]-_.rect[3]+x.view[1]]);if(!d&&_.borderStyle.width>0){F.style.borderWidth=`${_.borderStyle.width}px`;const bt=_.borderStyle.horizontalCornerRadius,St=_.borderStyle.verticalCornerRadius;if(bt>0||St>0){const Et=`calc(${bt}px * var(--scale-factor)) / calc(${St}px * var(--scale-factor))`;F.style.borderRadius=Et}else if(this instanceof i){const Et=`calc(${et}px * var(--scale-factor)) / calc(${_t}px * var(--scale-factor))`;F.style.borderRadius=Et}switch(_.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:F.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:F.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:F.style.borderBottomStyle="solid";break}const wt=_.borderColor||null;wt?F.style.borderColor=n.Util.makeHexColor(wt[0]|0,wt[1]|0,wt[2]|0):F.style.borderWidth=0}F.style.left=`${100*(it[0]-dt)/$}%`,F.style.top=`${100*(it[1]-ft)/ot}%`;const{rotation:mt}=_;return _.hasOwnCanvas||mt===0?(F.style.width=`${100*et/$}%`,F.style.height=`${100*_t/ot}%`):this.setRotation(mt,F),F}setRotation(d,_=this.container){const{pageWidth:x,pageHeight:j}=this.viewport.rawDims,{width:F,height:$}=I(this.data.rect);let ot,dt;d%180===0?(ot=100*F/x,dt=100*$/j):(ot=100*$/x,dt=100*F/j),_.style.width=`${ot}%`,_.style.height=`${dt}%`,_.setAttribute("data-main-rotation",(360-d)%360)}get _commonActions(){const d=(_,x,j)=>{const F=j.detail[_];j.target.style[x]=P.ColorConverters[`${F[0]}_HTML`](F.slice(1))};return(0,n.shadow)(this,"_commonActions",{display:_=>{const x=_.detail.display%2===1;this.container.style.visibility=x?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:x,print:_.detail.display===0||_.detail.display===3})},print:_=>{this.annotationStorage.setValue(this.data.id,{print:_.detail.print})},hidden:_=>{this.container.style.visibility=_.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:_.detail.hidden})},focus:_=>{setTimeout(()=>_.target.focus({preventScroll:!1}),0)},userName:_=>{_.target.title=_.detail.userName},readonly:_=>{_.detail.readonly?_.target.setAttribute("readonly",""):_.target.removeAttribute("readonly")},required:_=>{this._setRequired(_.target,_.detail.required)},bgColor:_=>{d("bgColor","backgroundColor",_)},fillColor:_=>{d("fillColor","backgroundColor",_)},fgColor:_=>{d("fgColor","color",_)},textColor:_=>{d("textColor","color",_)},borderColor:_=>{d("borderColor","borderColor",_)},strokeColor:_=>{d("strokeColor","borderColor",_)},rotation:_=>{const x=_.detail.rotation;this.setRotation(x),this.annotationStorage.setValue(this.data.id,{rotation:x})}})}_dispatchEventFromSandbox(d,_){const x=this._commonActions;for(const j of Object.keys(_.detail)){const F=d[j]||x[j];F==null||F(_)}}_setDefaultPropertiesFromJS(d){if(!this.enableScripting)return;const _=this.annotationStorage.getRawValue(this.data.id);if(!_)return;const x=this._commonActions;for(const[j,F]of Object.entries(_)){const $=x[j];if($){const ot={detail:{[j]:F},target:d};$(ot),delete _[j]}}}_createQuadrilaterals(d=!1){if(!this.data.quadPoints)return null;const _=[],x=this.data.rect;for(const j of this.data.quadPoints)this.data.rect=[j[2].x,j[2].y,j[1].x,j[1].y],_.push(this._createContainer(d));return this.data.rect=x,_}_createPopup(d,_){let x=this.container;this.quadrilaterals&&(d=d||this.quadrilaterals,x=this.quadrilaterals[0]),d||(d=document.createElement("div"),d.className="popupTriggerArea",x.append(d));const F=new b({container:x,trigger:d,color:_.color,titleObj:_.titleObj,modificationDate:_.modificationDate,contentsObj:_.contentsObj,richText:_.richText,hideWrapper:!0}).render();F.style.left="100%",x.append(F)}_renderQuadrilaterals(d){for(const _ of this.quadrilaterals)_.className=d;return this.quadrilaterals}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(d,_=null){const x=[];if(this._fieldObjects){const j=this._fieldObjects[d];if(j)for(const{page:F,id:$,exportValues:ot}of j){if(F===-1||$===_)continue;const dt=typeof ot=="string"?ot:null,ft=document.querySelector(`[data-element-id="${$}"]`);if(ft&&!v.has(ft)){(0,n.warn)(`_getElementsByName - element not allowed: ${$}`);continue}x.push({id:$,exportValue:dt,domElement:ft})}return x}for(const j of document.getElementsByName(d)){const{exportValue:F}=j,$=j.getAttribute("data-element-id");$!==_&&v.has(j)&&x.push({id:$,exportValue:F,domElement:j})}return x}}class m extends A{constructor(_,x=null){super(_,{isRenderable:!0,ignoreBorder:!!(x!=null&&x.ignoreBorder),createQuadrilaterals:!0});lt(this,o);lt(this,R);this.isTooltipOnly=_.data.isTooltipOnly}render(){const{data:_,linkService:x}=this,j=document.createElement("a");j.setAttribute("data-element-id",_.id);let F=!1;return _.url?(x.addLinkAttributes(j,_.url,_.newWindow),F=!0):_.action?(this._bindNamedAction(j,_.action),F=!0):_.attachment?(this._bindAttachment(j,_.attachment),F=!0):_.setOCGState?(ut(this,R,Ye).call(this,j,_.setOCGState),F=!0):_.dest?(this._bindLink(j,_.dest),F=!0):(_.actions&&(_.actions.Action||_.actions["Mouse Up"]||_.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(j,_),F=!0),_.resetForm?(this._bindResetFormAction(j,_.resetForm),F=!0):this.isTooltipOnly&&!F&&(this._bindLink(j,""),F=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map(($,ot)=>{const dt=ot===0?j:j.cloneNode();return $.append(dt),$}):(this.container.className="linkAnnotation",F&&this.container.append(j),this.container)}_bindLink(_,x){_.href=this.linkService.getDestinationHash(x),_.onclick=()=>(x&&this.linkService.goToDestination(x),!1),(x||x==="")&&ut(this,o,Gt).call(this)}_bindNamedAction(_,x){_.href=this.linkService.getAnchorUrl(""),_.onclick=()=>(this.linkService.executeNamedAction(x),!1),ut(this,o,Gt).call(this)}_bindAttachment(_,x){_.href=this.linkService.getAnchorUrl(""),_.onclick=()=>{var j;return(j=this.downloadManager)==null||j.openOrDownloadData(this.container,x.content,x.filename),!1},ut(this,o,Gt).call(this)}_bindJSAction(_,x){_.href=this.linkService.getAnchorUrl("");const j=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const F of Object.keys(x.actions)){const $=j.get(F);$&&(_[$]=()=>{var ot;return(ot=this.linkService.eventBus)==null||ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x.id,name:F}}),!1})}_.onclick||(_.onclick=()=>!1),ut(this,o,Gt).call(this)}_bindResetFormAction(_,x){const j=_.onclick;if(j||(_.href=this.linkService.getAnchorUrl("")),ut(this,o,Gt).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),j||(_.onclick=()=>!1);return}_.onclick=()=>{var _t;j==null||j();const{fields:F,refs:$,include:ot}=x,dt=[];if(F.length!==0||$.length!==0){const it=new Set($);for(const mt of F){const bt=this._fieldObjects[mt]||[];for(const{id:St}of bt)it.add(St)}for(const mt of Object.values(this._fieldObjects))for(const bt of mt)it.has(bt.id)===ot&&dt.push(bt)}else for(const it of Object.values(this._fieldObjects))dt.push(...it);const ft=this.annotationStorage,et=[];for(const it of dt){const{id:mt}=it;switch(et.push(mt),it.type){case"text":{const St=it.defaultValue||"";ft.setValue(mt,{value:St});break}case"checkbox":case"radiobutton":{const St=it.defaultValue===it.exportValues;ft.setValue(mt,{value:St});break}case"combobox":case"listbox":{const St=it.defaultValue||"";ft.setValue(mt,{value:St});break}default:continue}const bt=document.querySelector(`[data-element-id="${mt}"]`);if(bt){if(!v.has(bt)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${mt}`);continue}}else continue;bt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:et,name:"ResetForm"}})),!1}}}o=new WeakSet,Gt=function(){this.container.setAttribute("data-internal-link","")},R=new WeakSet,Ye=function(_,x){_.href=this.linkService.getAnchorUrl(""),_.onclick=()=>(this.linkService.executeSetOCGState(x),!1),ut(this,o,Gt).call(this)};class f extends A{constructor(d){var x,j,F;const _=!!(d.data.hasPopup||(x=d.data.titleObj)!=null&&x.str||(j=d.data.contentsObj)!=null&&j.str||(F=d.data.richText)!=null&&F.str);super(d,{isRenderable:_})}render(){this.container.className="textAnnotation";const d=document.createElement("img");return d.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",d.alt="[{{type}} Annotation]",d.dataset.l10nId="text_annotation_type",d.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(d,this.data),this.container.append(d),this.container}}class r extends A{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(d){const{isWin:_,isMac:x}=n.FeatureTest.platform;return _&&d.ctrlKey||x&&d.metaKey}_setEventListener(d,_,x,j){_.includes("mouse")?d.addEventListener(_,F=>{var $;($=this.linkService.eventBus)==null||$.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:x,value:j(F),shift:F.shiftKey,modifier:this._getKeyModifier(F)}})}):d.addEventListener(_,F=>{var $;($=this.linkService.eventBus)==null||$.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:x,value:j(F)}})})}_setEventListeners(d,_,x){var j;for(const[F,$]of _)($==="Action"||(j=this.data.actions)!=null&&j[$])&&this._setEventListener(d,F,$,x)}_setBackgroundColor(d){const _=this.data.backgroundColor||null;d.style.backgroundColor=_===null?"transparent":n.Util.makeHexColor(_[0],_[1],_[2])}_setTextStyle(d){const _=["left","center","right"],{fontColor:x}=this.data.defaultAppearanceData,j=this.data.defaultAppearanceData.fontSize||h,F=d.style;let $;const ot=2,dt=ft=>Math.round(10*ft)/10;if(this.data.multiLine){const ft=Math.abs(this.data.rect[3]-this.data.rect[1]-ot),et=Math.round(ft/(n.LINE_FACTOR*j))||1,_t=ft/et;$=Math.min(j,dt(_t/n.LINE_FACTOR))}else{const ft=Math.abs(this.data.rect[3]-this.data.rect[1]-ot);$=Math.min(j,dt(ft/n.LINE_FACTOR))}F.fontSize=`calc(${$}px * var(--scale-factor))`,F.color=n.Util.makeHexColor(x[0],x[1],x[2]),this.data.textAlignment!==null&&(F.textAlign=_[this.data.textAlignment])}_setRequired(d,_){_?d.setAttribute("required",!0):d.removeAttribute("required"),d.setAttribute("aria-required",_)}}class c extends r{constructor(d){const _=d.renderForms||!d.data.hasAppearance&&!!d.data.fieldValue;super(d,{isRenderable:_})}setPropertyOnSiblings(d,_,x,j){const F=this.annotationStorage;for(const $ of this._getElementsByName(d.name,d.id))$.domElement&&($.domElement[_]=x),F.setValue($.id,{[j]:x})}render(){var j;const d=this.annotationStorage,_=this.data.id;this.container.className="textWidgetAnnotation";let x=null;if(this.renderForms){const F=d.getValue(_,{value:this.data.fieldValue});let $=F.formattedValue||F.value||"";const ot=d.getValue(_,{charLimit:this.data.maxLen}).charLimit;ot&&$.length>ot&&($=$.slice(0,ot));const dt={userValue:$,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(x=document.createElement("textarea"),x.textContent=$,this.data.doNotScroll&&(x.style.overflowY="hidden")):(x=document.createElement("input"),x.type="text",x.setAttribute("value",$),this.data.doNotScroll&&(x.style.overflowX="hidden")),v.add(x),x.setAttribute("data-element-id",_),x.disabled=this.data.readOnly,x.name=this.data.fieldName,x.tabIndex=w,this._setRequired(x,this.data.required),ot&&(x.maxLength=ot),x.addEventListener("input",et=>{d.setValue(_,{value:et.target.value}),this.setPropertyOnSiblings(x,"value",et.target.value,"value")}),x.addEventListener("resetform",et=>{const _t=this.data.defaultFieldValue??"";x.value=dt.userValue=_t,dt.formattedValue=null});let ft=et=>{const{formattedValue:_t}=dt;_t!=null&&(et.target.value=_t),et.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){x.addEventListener("focus",_t=>{const{target:it}=_t;dt.userValue&&(it.value=dt.userValue),dt.lastCommittedValue=it.value,dt.commitKey=1}),x.addEventListener("updatefromsandbox",_t=>{const it={value(mt){dt.userValue=mt.detail.value??"",d.setValue(_,{value:dt.userValue.toString()}),mt.target.value=dt.userValue},formattedValue(mt){const{formattedValue:bt}=mt.detail;dt.formattedValue=bt,bt!=null&&mt.target!==document.activeElement&&(mt.target.value=bt),d.setValue(_,{formattedValue:bt})},selRange(mt){mt.target.setSelectionRange(...mt.detail.selRange)},charLimit:mt=>{var Et;const{charLimit:bt}=mt.detail,{target:St}=mt;if(bt===0){St.removeAttribute("maxLength");return}St.setAttribute("maxLength",bt);let wt=dt.userValue;!wt||wt.length<=bt||(wt=wt.slice(0,bt),St.value=dt.userValue=wt,d.setValue(_,{value:wt}),(Et=this.linkService.eventBus)==null||Et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:wt,willCommit:!0,commitKey:1,selStart:St.selectionStart,selEnd:St.selectionEnd}}))}};this._dispatchEventFromSandbox(it,_t)}),x.addEventListener("keydown",_t=>{var bt;dt.commitKey=1;let it=-1;if(_t.key==="Escape"?it=0:_t.key==="Enter"&&!this.data.multiLine?it=2:_t.key==="Tab"&&(dt.commitKey=3),it===-1)return;const{value:mt}=_t.target;dt.lastCommittedValue!==mt&&(dt.lastCommittedValue=mt,dt.userValue=mt,(bt=this.linkService.eventBus)==null||bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:mt,willCommit:!0,commitKey:it,selStart:_t.target.selectionStart,selEnd:_t.target.selectionEnd}}))});const et=ft;ft=null,x.addEventListener("blur",_t=>{var mt;if(!_t.relatedTarget)return;const{value:it}=_t.target;dt.userValue=it,dt.lastCommittedValue!==it&&((mt=this.linkService.eventBus)==null||mt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:it,willCommit:!0,commitKey:dt.commitKey,selStart:_t.target.selectionStart,selEnd:_t.target.selectionEnd}})),et(_t)}),(j=this.data.actions)!=null&&j.Keystroke&&x.addEventListener("beforeinput",_t=>{var H;dt.lastCommittedValue=null;const{data:it,target:mt}=_t,{value:bt,selectionStart:St,selectionEnd:wt}=mt;let Et=St,U=wt;switch(_t.inputType){case"deleteWordBackward":{const V=bt.substring(0,St).match(/\w*[^\w]*$/);V&&(Et-=V[0].length);break}case"deleteWordForward":{const V=bt.substring(St).match(/^[^\w]*\w*/);V&&(U+=V[0].length);break}case"deleteContentBackward":St===wt&&(Et-=1);break;case"deleteContentForward":St===wt&&(U+=1);break}_t.preventDefault(),(H=this.linkService.eventBus)==null||H.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:bt,change:it||"",willCommit:!1,selStart:Et,selEnd:U}})}),this._setEventListeners(x,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_t=>_t.target.value)}if(ft&&x.addEventListener("blur",ft),this.data.comb){const _t=(this.data.rect[2]-this.data.rect[0])/ot;x.classList.add("comb"),x.style.letterSpacing=`calc(${_t}px * var(--scale-factor) - 1ch)`}}else x=document.createElement("div"),x.textContent=this.data.fieldValue,x.style.verticalAlign="middle",x.style.display="table-cell";return this._setTextStyle(x),this._setBackgroundColor(x),this._setDefaultPropertiesFromJS(x),this.container.append(x),this.container}}class p extends r{constructor(d){super(d,{isRenderable:d.renderForms})}render(){const d=this.annotationStorage,_=this.data,x=_.id;let j=d.getValue(x,{value:_.exportValue===_.fieldValue}).value;typeof j=="string"&&(j=j!=="Off",d.setValue(x,{value:j})),this.container.className="buttonWidgetAnnotation checkBox";const F=document.createElement("input");return v.add(F),F.setAttribute("data-element-id",x),F.disabled=_.readOnly,this._setRequired(F,this.data.required),F.type="checkbox",F.name=_.fieldName,j&&F.setAttribute("checked",!0),F.setAttribute("exportValue",_.exportValue),F.tabIndex=w,F.addEventListener("change",$=>{const{name:ot,checked:dt}=$.target;for(const ft of this._getElementsByName(ot,x)){const et=dt&&ft.exportValue===_.exportValue;ft.domElement&&(ft.domElement.checked=et),d.setValue(ft.id,{value:et})}d.setValue(x,{value:dt})}),F.addEventListener("resetform",$=>{const ot=_.defaultFieldValue||"Off";$.target.checked=ot===_.exportValue}),this.enableScripting&&this.hasJSActions&&(F.addEventListener("updatefromsandbox",$=>{const ot={value(dt){dt.target.checked=dt.detail.value!=="Off",d.setValue(x,{value:dt.target.checked})}};this._dispatchEventFromSandbox(ot,$)}),this._setEventListeners(F,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],$=>$.target.checked)),this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class i extends r{constructor(d){super(d,{isRenderable:d.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const d=this.annotationStorage,_=this.data,x=_.id;let j=d.getValue(x,{value:_.fieldValue===_.buttonValue}).value;typeof j=="string"&&(j=j!==_.buttonValue,d.setValue(x,{value:j}));const F=document.createElement("input");if(v.add(F),F.setAttribute("data-element-id",x),F.disabled=_.readOnly,this._setRequired(F,this.data.required),F.type="radio",F.name=_.fieldName,j&&F.setAttribute("checked",!0),F.tabIndex=w,F.addEventListener("change",$=>{const{name:ot,checked:dt}=$.target;for(const ft of this._getElementsByName(ot,x))d.setValue(ft.id,{value:!1});d.setValue(x,{value:dt})}),F.addEventListener("resetform",$=>{const ot=_.defaultFieldValue;$.target.checked=ot!=null&&ot===_.buttonValue}),this.enableScripting&&this.hasJSActions){const $=_.buttonValue;F.addEventListener("updatefromsandbox",ot=>{const dt={value:ft=>{const et=$===ft.detail.value;for(const _t of this._getElementsByName(ft.target.name)){const it=et&&_t.id===x;_t.domElement&&(_t.domElement.checked=it),d.setValue(_t.id,{value:it})}}};this._dispatchEventFromSandbox(dt,ot)}),this._setEventListeners(F,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ot=>ot.target.checked)}return this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class a extends m{constructor(d){super(d,{ignoreBorder:d.data.hasAppearance})}render(){const d=super.render();d.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(d.title=this.data.alternativeText);const _=d.lastChild;return this.enableScripting&&this.hasJSActions&&_&&(this._setDefaultPropertiesFromJS(_),_.addEventListener("updatefromsandbox",x=>{this._dispatchEventFromSandbox({},x)})),d}}class e extends r{constructor(d){super(d,{isRenderable:d.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const d=this.annotationStorage,_=this.data.id,x=d.getValue(_,{value:this.data.fieldValue}),j=document.createElement("select");v.add(j),j.setAttribute("data-element-id",_),j.disabled=this.data.readOnly,this._setRequired(j,this.data.required),j.name=this.data.fieldName,j.tabIndex=w;let F=this.data.combo&&this.data.options.length>0;this.data.combo||(j.size=this.data.options.length,this.data.multiSelect&&(j.multiple=!0)),j.addEventListener("resetform",et=>{const _t=this.data.defaultFieldValue;for(const it of j.options)it.selected=it.value===_t});for(const et of this.data.options){const _t=document.createElement("option");_t.textContent=et.displayValue,_t.value=et.exportValue,x.value.includes(et.exportValue)&&(_t.setAttribute("selected",!0),F=!1),j.append(_t)}let $=null;if(F){const et=document.createElement("option");et.value=" ",et.setAttribute("hidden",!0),et.setAttribute("selected",!0),j.prepend(et),$=()=>{et.remove(),j.removeEventListener("input",$),$=null},j.addEventListener("input",$)}const ot=et=>{const _t=et?"value":"textContent",{options:it,multiple:mt}=j;return mt?Array.prototype.filter.call(it,bt=>bt.selected).map(bt=>bt[_t]):it.selectedIndex===-1?null:it[it.selectedIndex][_t]};let dt=ot(!1);const ft=et=>{const _t=et.target.options;return Array.prototype.map.call(_t,it=>({displayValue:it.textContent,exportValue:it.value}))};return this.enableScripting&&this.hasJSActions?(j.addEventListener("updatefromsandbox",et=>{const _t={value(it){$==null||$();const mt=it.detail.value,bt=new Set(Array.isArray(mt)?mt:[mt]);for(const St of j.options)St.selected=bt.has(St.value);d.setValue(_,{value:ot(!0)}),dt=ot(!1)},multipleSelection(it){j.multiple=!0},remove(it){const mt=j.options,bt=it.detail.remove;mt[bt].selected=!1,j.remove(bt),mt.length>0&&Array.prototype.findIndex.call(mt,wt=>wt.selected)===-1&&(mt[0].selected=!0),d.setValue(_,{value:ot(!0),items:ft(it)}),dt=ot(!1)},clear(it){for(;j.length!==0;)j.remove(0);d.setValue(_,{value:null,items:[]}),dt=ot(!1)},insert(it){const{index:mt,displayValue:bt,exportValue:St}=it.detail.insert,wt=j.children[mt],Et=document.createElement("option");Et.textContent=bt,Et.value=St,wt?wt.before(Et):j.append(Et),d.setValue(_,{value:ot(!0),items:ft(it)}),dt=ot(!1)},items(it){const{items:mt}=it.detail;for(;j.length!==0;)j.remove(0);for(const bt of mt){const{displayValue:St,exportValue:wt}=bt,Et=document.createElement("option");Et.textContent=St,Et.value=wt,j.append(Et)}j.options.length>0&&(j.options[0].selected=!0),d.setValue(_,{value:ot(!0),items:ft(it)}),dt=ot(!1)},indices(it){const mt=new Set(it.detail.indices);for(const bt of it.target.options)bt.selected=mt.has(bt.index);d.setValue(_,{value:ot(!0)}),dt=ot(!1)},editable(it){it.target.disabled=!it.detail.editable}};this._dispatchEventFromSandbox(_t,et)}),j.addEventListener("input",et=>{var it;const _t=ot(!0);d.setValue(_,{value:_t}),et.preventDefault(),(it=this.linkService.eventBus)==null||it.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:dt,changeEx:_t,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(j,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],et=>et.target.value)):j.addEventListener("input",function(et){d.setValue(_,{value:ot(!0)})}),this.data.combo&&this._setTextStyle(j),this._setBackgroundColor(j),this._setDefaultPropertiesFromJS(j),this.container.append(j),this.container}}const B=class extends A{constructor(d){var j,F,$;const{data:_}=d,x=!B.IGNORE_TYPES.has(_.parentType)&&!!((j=_.titleObj)!=null&&j.str||(F=_.contentsObj)!=null&&F.str||($=_.richText)!=null&&$.str);super(d,{isRenderable:x})}render(){this.container.className="popupAnnotation";const d=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(d.length===0)return this.container;const _=new b({container:this.container,trigger:Array.from(d),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),x=this.page,j=n.Util.normalizeRect([this.data.parentRect[0],x.view[3]-this.data.parentRect[1]+x.view[1],this.data.parentRect[2],x.view[3]-this.data.parentRect[3]+x.view[1]]),F=j[0]+this.data.parentRect[2]-this.data.parentRect[0],$=j[1],{pageWidth:ot,pageHeight:dt,pageX:ft,pageY:et}=this.viewport.rawDims;return this.container.style.left=`${100*(F-ft)/ot}%`,this.container.style.top=`${100*($-et)/dt}%`,this.container.append(_.render()),this.container}};let s=B;Ot(s,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class b{constructor(d){this.container=d.container,this.trigger=d.trigger,this.color=d.color,this.titleObj=d.titleObj,this.modificationDate=d.modificationDate,this.contentsObj=d.contentsObj,this.richText=d.richText,this.hideWrapper=d.hideWrapper||!1,this.pinned=!1}render(){var ot,dt;const _=document.createElement("div");_.className="popupWrapper",this.hideElement=this.hideWrapper?_:this.container,this.hideElement.hidden=!0;const x=document.createElement("div");x.className="popup";const j=this.color;if(j){const ft=.7*(255-j[0])+j[0],et=.7*(255-j[1])+j[1],_t=.7*(255-j[2])+j[2];x.style.backgroundColor=n.Util.makeHexColor(ft|0,et|0,_t|0)}const F=document.createElement("h1");F.dir=this.titleObj.dir,F.textContent=this.titleObj.str,x.append(F);const $=g.PDFDateString.toDateObject(this.modificationDate);if($){const ft=document.createElement("span");ft.className="popupDate",ft.textContent="{{date}}, {{time}}",ft.dataset.l10nId="annotation_date_string",ft.dataset.l10nArgs=JSON.stringify({date:$.toLocaleDateString(),time:$.toLocaleTimeString()}),x.append(ft)}if((ot=this.richText)!=null&&ot.str&&(!((dt=this.contentsObj)!=null&&dt.str)||this.contentsObj.str===this.richText.str))D.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:x}),x.lastChild.className="richText popupContent";else{const ft=this._formatContents(this.contentsObj);x.append(ft)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const ft of this.trigger)ft.addEventListener("click",this._toggle.bind(this)),ft.addEventListener("mouseover",this._show.bind(this,!1)),ft.addEventListener("mouseout",this._hide.bind(this,!1));return x.addEventListener("click",this._hide.bind(this,!0)),_.append(x),_}_formatContents({str:d,dir:_}){const x=document.createElement("p");x.className="popupContent",x.dir=_;const j=d.split(/(?:\r\n?|\n)/);for(let F=0,$=j.length;F<$;++F){const ot=j[F];x.append(document.createTextNode(ot)),F<$-1&&x.append(document.createElement("br"))}return x}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(d=!1){d&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(d=!0){d&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class k extends A{constructor(d){var x,j,F;const _=!!(d.data.hasPopup||(x=d.data.titleObj)!=null&&x.str||(j=d.data.contentsObj)!=null&&j.str||(F=d.data.richText)!=null&&F.str);super(d,{isRenderable:_,ignoreBorder:!0}),this.textContent=d.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const d=document.createElement("div");d.className="annotationTextContent",d.setAttribute("role","comment");for(const _ of this.textContent){const x=document.createElement("span");x.textContent=_,d.append(x)}this.container.append(d)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class M extends A{constructor(d){var x,j,F;const _=!!(d.data.hasPopup||(x=d.data.titleObj)!=null&&x.str||(j=d.data.contentsObj)!=null&&j.str||(F=d.data.richText)!=null&&F.str);super(d,{isRenderable:_,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const d=this.data,{width:_,height:x}=I(d.rect),j=this.svgFactory.create(_,x,!0),F=this.svgFactory.createElement("svg:line");return F.setAttribute("x1",d.rect[2]-d.lineCoordinates[0]),F.setAttribute("y1",d.rect[3]-d.lineCoordinates[1]),F.setAttribute("x2",d.rect[2]-d.lineCoordinates[2]),F.setAttribute("y2",d.rect[3]-d.lineCoordinates[3]),F.setAttribute("stroke-width",d.borderStyle.width||1),F.setAttribute("stroke","transparent"),F.setAttribute("fill","transparent"),j.append(F),this.container.append(j),this._createPopup(F,d),this.container}}class q extends A{constructor(d){var x,j,F;const _=!!(d.data.hasPopup||(x=d.data.titleObj)!=null&&x.str||(j=d.data.contentsObj)!=null&&j.str||(F=d.data.richText)!=null&&F.str);super(d,{isRenderable:_,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const d=this.data,{width:_,height:x}=I(d.rect),j=this.svgFactory.create(_,x,!0),F=d.borderStyle.width,$=this.svgFactory.createElement("svg:rect");return $.setAttribute("x",F/2),$.setAttribute("y",F/2),$.setAttribute("width",_-F),$.setAttribute("height",x-F),$.setAttribute("stroke-width",F||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),j.append($),this.container.append(j),this._createPopup($,d),this.container}}class S extends A{constructor(d){var x,j,F;const _=!!(d.data.hasPopup||(x=d.data.titleObj)!=null&&x.str||(j=d.data.contentsObj)!=null&&j.str||(F=d.data.richText)!=null&&F.str);super(d,{isRenderable:_,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const d=this.data,{width:_,height:x}=I(d.rect),j=this.svgFactory.create(_,x,!0),F=d.borderStyle.width,$=this.svgFactory.createElement("svg:ellipse");return $.setAttribute("cx",_/2),$.setAttribute("cy",x/2),$.setAttribute("rx",_/2-F/2),$.setAttribute("ry",x/2-F/2),$.setAttribute("stroke-width",F||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),j.append($),this.container.append(j),this._createPopup($,d),this.container}}class G extends A{constructor(d){var x,j,F;const _=!!(d.data.hasPopup||(x=d.data.titleObj)!=null&&x.str||(j=d.data.contentsObj)!=null&&j.str||(F=d.data.richText)!=null&&F.str);super(d,{isRenderable:_,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const d=this.data,{width:_,height:x}=I(d.rect),j=this.svgFactory.create(_,x,!0);let F=[];for(const ot of d.vertices){const dt=ot.x-d.rect[0],ft=d.rect[3]-ot.y;F.push(dt+","+ft)}F=F.join(" ");const $=this.svgFactory.createElement(this.svgElementName);return $.setAttribute("points",F),$.setAttribute("stroke-width",d.borderStyle.width||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),j.append($),this.container.append(j),this._createPopup($,d),this.container}}class ht extends G{constructor(d){super(d),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class nt extends A{constructor(d){var x,j,F;const _=!!(d.data.hasPopup||(x=d.data.titleObj)!=null&&x.str||(j=d.data.contentsObj)!=null&&j.str||(F=d.data.richText)!=null&&F.str);super(d,{isRenderable:_,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class rt extends A{constructor(d){var x,j,F;const _=!!(d.data.hasPopup||(x=d.data.titleObj)!=null&&x.str||(j=d.data.contentsObj)!=null&&j.str||(F=d.data.richText)!=null&&F.str);super(d,{isRenderable:_,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const d=this.data,{width:_,height:x}=I(d.rect),j=this.svgFactory.create(_,x,!0);for(const F of d.inkLists){let $=[];for(const dt of F){const ft=dt.x-d.rect[0],et=d.rect[3]-dt.y;$.push(`${ft},${et}`)}$=$.join(" ");const ot=this.svgFactory.createElement(this.svgElementName);ot.setAttribute("points",$),ot.setAttribute("stroke-width",d.borderStyle.width||1),ot.setAttribute("stroke","transparent"),ot.setAttribute("fill","transparent"),this._createPopup(ot,d),j.append(ot)}return this.container.append(j),this.container}}class K extends A{constructor(d){var x,j,F;const _=!!(d.data.hasPopup||(x=d.data.titleObj)!=null&&x.str||(j=d.data.contentsObj)!=null&&j.str||(F=d.data.richText)!=null&&F.str);super(d,{isRenderable:_,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class z extends A{constructor(d){var x,j,F;const _=!!(d.data.hasPopup||(x=d.data.titleObj)!=null&&x.str||(j=d.data.contentsObj)!=null&&j.str||(F=d.data.richText)!=null&&F.str);super(d,{isRenderable:_,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class X extends A{constructor(d){var x,j,F;const _=!!(d.data.hasPopup||(x=d.data.titleObj)!=null&&x.str||(j=d.data.contentsObj)!=null&&j.str||(F=d.data.richText)!=null&&F.str);super(d,{isRenderable:_,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class at extends A{constructor(d){var x,j,F;const _=!!(d.data.hasPopup||(x=d.data.titleObj)!=null&&x.str||(j=d.data.contentsObj)!=null&&j.str||(F=d.data.richText)!=null&&F.str);super(d,{isRenderable:_,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class ct extends A{constructor(d){var x,j,F;const _=!!(d.data.hasPopup||(x=d.data.titleObj)!=null&&x.str||(j=d.data.contentsObj)!=null&&j.str||(F=d.data.richText)!=null&&F.str);super(d,{isRenderable:_,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class N extends A{constructor(d){var j;super(d,{isRenderable:!0});const{filename:_,content:x}=this.data.file;this.filename=(0,g.getFilenameFromUrl)(_,!0),this.content=x,(j=this.linkService.eventBus)==null||j.dispatch("fileattachmentannotation",{source:this,filename:_,content:x})}render(){var _,x;this.container.className="fileAttachmentAnnotation";let d;return this.data.hasAppearance?d=document.createElement("div"):(d=document.createElement("img"),d.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),d.className="popupTriggerArea",d.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((_=this.data.titleObj)!=null&&_.str||(x=this.data.contentsObj)!=null&&x.str||this.data.richText)&&this._createPopup(d,this.data),this.container.append(d),this.container}_download(){var d;(d=this.downloadManager)==null||d.openOrDownloadData(this.container,this.content,this.filename)}}const st=class{static render(d){var dt,ft;const{annotations:_,div:x,viewport:j,accessibilityManager:F}=d;(0,g.setLayerDimensions)(x,j);const $={data:null,layer:x,page:d.page,viewport:j,linkService:d.linkService,downloadManager:d.downloadManager,imageResourcesPath:d.imageResourcesPath||"",renderForms:d.renderForms!==!1,svgFactory:new g.DOMSVGFactory,annotationStorage:d.annotationStorage||new T.AnnotationStorage,enableScripting:d.enableScripting===!0,hasJSActions:d.hasJSActions,fieldObjects:d.fieldObjects};let ot=0;for(const et of _){if(et.annotationType!==n.AnnotationType.POPUP){const{width:mt,height:bt}=I(et.rect);if(mt<=0||bt<=0)continue}$.data=et;const _t=y.create($);if(!_t.isRenderable)continue;const it=_t.render();if(et.hidden&&(it.style.visibility="hidden"),Array.isArray(it))for(const mt of it)mt.style.zIndex=ot++,ut(dt=st,W,Ce).call(dt,mt,et.id,x,F);else it.style.zIndex=ot++,_t instanceof s?x.prepend(it):ut(ft=st,W,Ce).call(ft,it,et.id,x,F)}ut(this,Q,we).call(this,x,d.annotationCanvasMap)}static update(d){const{annotationCanvasMap:_,div:x,viewport:j}=d;(0,g.setLayerDimensions)(x,{rotation:j.rotation}),ut(this,Q,we).call(this,x,_),x.hidden=!1}};let u=st;W=new WeakSet,Ce=function(d,_,x,j){const F=d.firstChild||d;F.id=`${g.AnnotationPrefix}${_}`,x.append(d),j==null||j.moveElementInDOM(x,d,F,!1)},Q=new WeakSet,we=function(d,_){if(_){for(const[x,j]of _){const F=d.querySelector(`[data-annotation-id="${x}"]`);if(!F)continue;const{firstChild:$}=F;$?$.nodeName==="CANVAS"?$.replaceWith(j):$.before(j):F.append(j)}_.clear()}},lt(u,W),lt(u,Q),t.AnnotationLayer=u},(L,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function l(g){return Math.floor(Math.max(0,Math.min(1,g))*255).toString(16).padStart(2,"0")}class n{static CMYK_G([T,P,D,w]){return["G",1-Math.min(1,.3*T+.59*D+.11*P+w)]}static G_CMYK([T]){return["CMYK",0,0,0,1-T]}static G_RGB([T]){return["RGB",T,T,T]}static G_HTML([T]){const P=l(T);return`#${P}${P}${P}`}static RGB_G([T,P,D]){return["G",.3*T+.59*P+.11*D]}static RGB_HTML([T,P,D]){const w=l(T),h=l(P),v=l(D);return`#${w}${h}${v}`}static T_HTML(){return"#00000000"}static CMYK_RGB([T,P,D,w]){return["RGB",1-Math.min(1,T+w),1-Math.min(1,D+w),1-Math.min(1,P+w)]}static CMYK_HTML(T){const P=this.CMYK_RGB(T).slice(1);return this.RGB_HTML(P)}static RGB_CMYK([T,P,D]){const w=1-T,h=1-P,v=1-D,I=Math.min(w,h,v);return["CMYK",w,h,v,I]}}t.ColorConverters=n},(L,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var n=l(19);class g{static setupStorage(P,D,w,h,v){const I=h.getValue(D,{value:null});switch(w.name){case"textarea":if(I.value!==null&&(P.textContent=I.value),v==="print")break;P.addEventListener("input",y=>{h.setValue(D,{value:y.target.value})});break;case"input":if(w.attributes.type==="radio"||w.attributes.type==="checkbox"){if(I.value===w.attributes.xfaOn?P.setAttribute("checked",!0):I.value===w.attributes.xfaOff&&P.removeAttribute("checked"),v==="print")break;P.addEventListener("change",y=>{h.setValue(D,{value:y.target.checked?y.target.getAttribute("xfaOn"):y.target.getAttribute("xfaOff")})})}else{if(I.value!==null&&P.setAttribute("value",I.value),v==="print")break;P.addEventListener("input",y=>{h.setValue(D,{value:y.target.value})})}break;case"select":if(I.value!==null)for(const y of w.children)y.attributes.value===I.value&&(y.attributes.selected=!0);P.addEventListener("input",y=>{const A=y.target.options,m=A.selectedIndex===-1?"":A[A.selectedIndex].value;h.setValue(D,{value:m})});break}}static setAttributes({html:P,element:D,storage:w=null,intent:h,linkService:v}){const{attributes:I}=D,y=P instanceof HTMLAnchorElement;I.type==="radio"&&(I.name=`${I.name}-${h}`);for(const[A,m]of Object.entries(I))if(m!=null)switch(A){case"class":m.length&&P.setAttribute(A,m.join(" "));break;case"dataId":break;case"id":P.setAttribute("data-element-id",m);break;case"style":Object.assign(P.style,m);break;case"textContent":P.textContent=m;break;default:(!y||A!=="href"&&A!=="newWindow")&&P.setAttribute(A,m)}y&&v.addLinkAttributes(P,I.href,I.newWindow),w&&I.dataId&&this.setupStorage(P,I.dataId,D,w)}static render(P){var f;const D=P.annotationStorage,w=P.linkService,h=P.xfaHtml,v=P.intent||"display",I=document.createElement(h.name);h.attributes&&this.setAttributes({html:I,element:h,intent:v,linkService:w});const y=[[h,-1,I]],A=P.div;if(A.append(I),P.viewport){const r=`matrix(${P.viewport.transform.join(",")})`;A.style.transform=r}v!=="richText"&&A.setAttribute("class","xfaLayer xfaFont");const m=[];for(;y.length>0;){const[r,c,p]=y.at(-1);if(c+1===r.children.length){y.pop();continue}const i=r.children[++y.at(-1)[1]];if(i===null)continue;const{name:a}=i;if(a==="#text"){const s=document.createTextNode(i.value);m.push(s),p.append(s);continue}let e;if((f=i==null?void 0:i.attributes)!=null&&f.xmlns?e=document.createElementNS(i.attributes.xmlns,a):e=document.createElement(a),p.append(e),i.attributes&&this.setAttributes({html:e,element:i,storage:D,intent:v,linkService:w}),i.children&&i.children.length>0)y.push([i,-1,e]);else if(i.value){const s=document.createTextNode(i.value);n.XfaText.shouldBuildText(a)&&m.push(s),e.append(s)}}for(const r of A.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))r.setAttribute("readOnly",!0);return{textDivs:m}}static update(P){const D=`matrix(${P.viewport.transform.join(",")})`;P.div.style.transform=D,P.div.hidden=!1}}t.XfaLayer=g},(L,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var n=l(6),g=l(1),T=l(10);let P=class{constructor(){(0,g.unreachable)("Not implemented: SVGGraphics")}};t.SVGGraphics=P;{let f=function(e){let s=[];const b=[];for(const k of e){if(k.fn==="save"){s.push({fnId:92,fn:"group",items:[]}),b.push(s),s=s.at(-1).items;continue}k.fn==="restore"?s=b.pop():s.push(k)}return s},r=function(e){if(Number.isInteger(e))return e.toString();const s=e.toFixed(10);let b=s.length-1;if(s[b]!=="0")return s;do b--;while(s[b]==="0");return s.substring(0,s[b]==="."?b:b+1)},c=function(e){if(e[4]===0&&e[5]===0){if(e[1]===0&&e[2]===0)return e[0]===1&&e[3]===1?"":`scale(${r(e[0])} ${r(e[3])})`;if(e[0]===e[3]&&e[1]===-e[2]){const s=Math.acos(e[0])*180/Math.PI;return`rotate(${r(s)})`}}else if(e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1)return`translate(${r(e[4])} ${r(e[5])})`;return`matrix(${r(e[0])} ${r(e[1])} ${r(e[2])} ${r(e[3])} ${r(e[4])} ${r(e[5])})`};const D={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},w="http://www.w3.org/XML/1998/namespace",h="http://www.w3.org/1999/xlink",v=["butt","round","square"],I=["miter","round","bevel"],y=function(e,s="",b=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!b)return URL.createObjectURL(new Blob([e],{type:s}));const k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let M=`data:${s};base64,`;for(let q=0,S=e.length;q<S;q+=3){const G=e[q]&255,ht=e[q+1]&255,nt=e[q+2]&255,rt=G>>2,K=(G&3)<<4|ht>>4,z=q+1<S?(ht&15)<<2|nt>>6:64,X=q+2<S?nt&63:64;M+=k[rt]+k[K]+k[z]+k[X]}return M},A=function(){const e=new Uint8Array([137,80,78,71,13,10,26,10]),s=12,b=new Int32Array(256);for(let nt=0;nt<256;nt++){let rt=nt;for(let K=0;K<8;K++)rt&1?rt=3988292384^rt>>1&2147483647:rt=rt>>1&2147483647;b[nt]=rt}function k(nt,rt,K){let z=-1;for(let X=rt;X<K;X++){const at=(z^nt[X])&255,ct=b[at];z=z>>>8^ct}return z^-1}function M(nt,rt,K,z){let X=z;const at=rt.length;K[X]=at>>24&255,K[X+1]=at>>16&255,K[X+2]=at>>8&255,K[X+3]=at&255,X+=4,K[X]=nt.charCodeAt(0)&255,K[X+1]=nt.charCodeAt(1)&255,K[X+2]=nt.charCodeAt(2)&255,K[X+3]=nt.charCodeAt(3)&255,X+=4,K.set(rt,X),X+=rt.length;const ct=k(K,z+4,X);K[X]=ct>>24&255,K[X+1]=ct>>16&255,K[X+2]=ct>>8&255,K[X+3]=ct&255}function q(nt,rt,K){let z=1,X=0;for(let at=rt;at<K;++at)z=(z+(nt[at]&255))%65521,X=(X+z)%65521;return X<<16|z}function S(nt){if(!T.isNodeJS)return G(nt);try{let rt;parseInt(process.versions.node)>=8?rt=nt:rt=Buffer.from(nt);const K=require$$5.deflateSync(rt,{level:9});return K instanceof Uint8Array?K:new Uint8Array(K)}catch(rt){(0,g.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+rt)}return G(nt)}function G(nt){let rt=nt.length;const K=65535,z=Math.ceil(rt/K),X=new Uint8Array(2+rt+z*5+4);let at=0;X[at++]=120,X[at++]=156;let ct=0;for(;rt>K;)X[at++]=0,X[at++]=255,X[at++]=255,X[at++]=0,X[at++]=0,X.set(nt.subarray(ct,ct+K),at),at+=K,ct+=K,rt-=K;X[at++]=1,X[at++]=rt&255,X[at++]=rt>>8&255,X[at++]=~rt&65535&255,X[at++]=(~rt&65535)>>8&255,X.set(nt.subarray(ct),at),at+=nt.length-ct;const N=q(nt,0,nt.length);return X[at++]=N>>24&255,X[at++]=N>>16&255,X[at++]=N>>8&255,X[at++]=N&255,X}function ht(nt,rt,K,z){const X=nt.width,at=nt.height;let ct,N,u;const o=nt.data;switch(rt){case g.ImageKind.GRAYSCALE_1BPP:N=0,ct=1,u=X+7>>3;break;case g.ImageKind.RGB_24BPP:N=2,ct=8,u=X*3;break;case g.ImageKind.RGBA_32BPP:N=6,ct=8,u=X*4;break;default:throw new Error("invalid format")}const E=new Uint8Array((1+u)*at);let R=0,O=0;for(let st=0;st<at;++st)E[R++]=0,E.set(o.subarray(O,O+u),R),O+=u,R+=u;if(rt===g.ImageKind.GRAYSCALE_1BPP&&z){R=0;for(let st=0;st<at;st++){R++;for(let Z=0;Z<u;Z++)E[R++]^=255}}const B=new Uint8Array([X>>24&255,X>>16&255,X>>8&255,X&255,at>>24&255,at>>16&255,at>>8&255,at&255,ct,N,0,0,0]),W=S(E),Y=e.length+s*3+B.length+W.length,Q=new Uint8Array(Y);let J=0;return Q.set(e,J),J+=e.length,M("IHDR",B,Q,J),J+=s+B.length,M("IDATA",W,Q,J),J+=s+W.length,M("IEND",new Uint8Array(0),Q,J),y(Q,"image/png",K)}return function(rt,K,z){const X=rt.kind===void 0?g.ImageKind.GRAYSCALE_1BPP:rt.kind;return ht(rt,X,K,z)}}();class m{constructor(){this.fontSizeScale=1,this.fontWeight=D.fontWeight,this.fontSize=0,this.textMatrix=g.IDENTITY_MATRIX,this.fontMatrix=g.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=g.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=D.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(s,b){this.x=s,this.y=b}}let p=0,i=0,a=0;t.SVGGraphics=P=class{constructor(e,s,b=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new m,this.transformMatrix=g.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=s,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!b,this._operatorIdMapping=[];for(const k in g.OPS)this._operatorIdMapping[g.OPS[k]]=k}getObject(e,s=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):s}save(){this.transformStack.push(this.transformMatrix);const e=this.current;this.extraStack.push(e),this.current=e.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(e){this.save(),this.executeOpTree(e),this.restore()}loadDependencies(e){const s=e.fnArray,b=e.argsArray;for(let k=0,M=s.length;k<M;k++)if(s[k]===g.OPS.dependency)for(const q of b[k]){const S=q.startsWith("g_")?this.commonObjs:this.objs,G=new Promise(ht=>{S.get(q,ht)});this.current.dependencies.push(G)}return Promise.all(this.current.dependencies)}transform(e,s,b,k,M,q){const S=[e,s,b,k,M,q];this.transformMatrix=g.Util.transform(this.transformMatrix,S),this.tgrp=null}getSVG(e,s){this.viewport=s;const b=this._initialize(s);return this.loadDependencies(e).then(()=>(this.transformMatrix=g.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(e)),b))}convertOpList(e){const s=this._operatorIdMapping,b=e.argsArray,k=e.fnArray,M=[];for(let q=0,S=k.length;q<S;q++){const G=k[q];M.push({fnId:G,fn:s[G],args:b[q]})}return f(M)}executeOpTree(e){for(const s of e){const b=s.fn,k=s.fnId,M=s.args;switch(k|0){case g.OPS.beginText:this.beginText();break;case g.OPS.dependency:break;case g.OPS.setLeading:this.setLeading(M);break;case g.OPS.setLeadingMoveText:this.setLeadingMoveText(M[0],M[1]);break;case g.OPS.setFont:this.setFont(M);break;case g.OPS.showText:this.showText(M[0]);break;case g.OPS.showSpacedText:this.showText(M[0]);break;case g.OPS.endText:this.endText();break;case g.OPS.moveText:this.moveText(M[0],M[1]);break;case g.OPS.setCharSpacing:this.setCharSpacing(M[0]);break;case g.OPS.setWordSpacing:this.setWordSpacing(M[0]);break;case g.OPS.setHScale:this.setHScale(M[0]);break;case g.OPS.setTextMatrix:this.setTextMatrix(M[0],M[1],M[2],M[3],M[4],M[5]);break;case g.OPS.setTextRise:this.setTextRise(M[0]);break;case g.OPS.setTextRenderingMode:this.setTextRenderingMode(M[0]);break;case g.OPS.setLineWidth:this.setLineWidth(M[0]);break;case g.OPS.setLineJoin:this.setLineJoin(M[0]);break;case g.OPS.setLineCap:this.setLineCap(M[0]);break;case g.OPS.setMiterLimit:this.setMiterLimit(M[0]);break;case g.OPS.setFillRGBColor:this.setFillRGBColor(M[0],M[1],M[2]);break;case g.OPS.setStrokeRGBColor:this.setStrokeRGBColor(M[0],M[1],M[2]);break;case g.OPS.setStrokeColorN:this.setStrokeColorN(M);break;case g.OPS.setFillColorN:this.setFillColorN(M);break;case g.OPS.shadingFill:this.shadingFill(M[0]);break;case g.OPS.setDash:this.setDash(M[0],M[1]);break;case g.OPS.setRenderingIntent:this.setRenderingIntent(M[0]);break;case g.OPS.setFlatness:this.setFlatness(M[0]);break;case g.OPS.setGState:this.setGState(M[0]);break;case g.OPS.fill:this.fill();break;case g.OPS.eoFill:this.eoFill();break;case g.OPS.stroke:this.stroke();break;case g.OPS.fillStroke:this.fillStroke();break;case g.OPS.eoFillStroke:this.eoFillStroke();break;case g.OPS.clip:this.clip("nonzero");break;case g.OPS.eoClip:this.clip("evenodd");break;case g.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case g.OPS.paintImageXObject:this.paintImageXObject(M[0]);break;case g.OPS.paintInlineImageXObject:this.paintInlineImageXObject(M[0]);break;case g.OPS.paintImageMaskXObject:this.paintImageMaskXObject(M[0]);break;case g.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(M[0],M[1]);break;case g.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case g.OPS.closePath:this.closePath();break;case g.OPS.closeStroke:this.closeStroke();break;case g.OPS.closeFillStroke:this.closeFillStroke();break;case g.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case g.OPS.nextLine:this.nextLine();break;case g.OPS.transform:this.transform(M[0],M[1],M[2],M[3],M[4],M[5]);break;case g.OPS.constructPath:this.constructPath(M[0],M[1]);break;case g.OPS.endPath:this.endPath();break;case 92:this.group(s.items);break;default:(0,g.warn)(`Unimplemented operator ${b}`);break}}}setWordSpacing(e){this.current.wordSpacing=e}setCharSpacing(e){this.current.charSpacing=e}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(e,s,b,k,M,q){const S=this.current;S.textMatrix=S.lineMatrix=[e,s,b,k,M,q],S.textMatrixScale=Math.hypot(e,s),S.x=S.lineX=0,S.y=S.lineY=0,S.xcoords=[],S.ycoords=[],S.tspan=this.svgFactory.createElement("svg:tspan"),S.tspan.setAttributeNS(null,"font-family",S.fontFamily),S.tspan.setAttributeNS(null,"font-size",`${r(S.fontSize)}px`),S.tspan.setAttributeNS(null,"y",r(-S.y)),S.txtElement=this.svgFactory.createElement("svg:text"),S.txtElement.append(S.tspan)}beginText(){const e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=g.IDENTITY_MATRIX,e.lineMatrix=g.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}moveText(e,s){const b=this.current;b.x=b.lineX+=e,b.y=b.lineY+=s,b.xcoords=[],b.ycoords=[],b.tspan=this.svgFactory.createElement("svg:tspan"),b.tspan.setAttributeNS(null,"font-family",b.fontFamily),b.tspan.setAttributeNS(null,"font-size",`${r(b.fontSize)}px`),b.tspan.setAttributeNS(null,"y",r(-b.y))}showText(e){const s=this.current,b=s.font,k=s.fontSize;if(k===0)return;const M=s.fontSizeScale,q=s.charSpacing,S=s.wordSpacing,G=s.fontDirection,ht=s.textHScale*G,nt=b.vertical,rt=nt?1:-1,K=b.defaultVMetrics,z=k*s.fontMatrix[0];let X=0;for(const N of e){if(N===null){X+=G*S;continue}else if(typeof N=="number"){X+=rt*N*k/1e3;continue}const u=(N.isSpace?S:0)+q,o=N.fontChar;let E,R,O=N.width;if(nt){let W;const Y=N.vmetric||K;W=N.vmetric?Y[1]:O*.5,W=-W*z;const Q=Y[2]*z;O=Y?-Y[0]:O,E=W/M,R=(X+Q)/M}else E=X/M,R=0;(N.isInFont||b.missingFile)&&(s.xcoords.push(s.x+E),nt&&s.ycoords.push(-s.y+R),s.tspan.textContent+=o);let B;nt?B=O*z-u*G:B=O*z+u*G,X+=B}s.tspan.setAttributeNS(null,"x",s.xcoords.map(r).join(" ")),nt?s.tspan.setAttributeNS(null,"y",s.ycoords.map(r).join(" ")):s.tspan.setAttributeNS(null,"y",r(-s.y)),nt?s.y-=X:s.x+=X*ht,s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${r(s.fontSize)}px`),s.fontStyle!==D.fontStyle&&s.tspan.setAttributeNS(null,"font-style",s.fontStyle),s.fontWeight!==D.fontWeight&&s.tspan.setAttributeNS(null,"font-weight",s.fontWeight);const at=s.textRenderingMode&g.TextRenderingMode.FILL_STROKE_MASK;if(at===g.TextRenderingMode.FILL||at===g.TextRenderingMode.FILL_STROKE?(s.fillColor!==D.fillColor&&s.tspan.setAttributeNS(null,"fill",s.fillColor),s.fillAlpha<1&&s.tspan.setAttributeNS(null,"fill-opacity",s.fillAlpha)):s.textRenderingMode===g.TextRenderingMode.ADD_TO_PATH?s.tspan.setAttributeNS(null,"fill","transparent"):s.tspan.setAttributeNS(null,"fill","none"),at===g.TextRenderingMode.STROKE||at===g.TextRenderingMode.FILL_STROKE){const N=1/(s.textMatrixScale||1);this._setStrokeAttributes(s.tspan,N)}let ct=s.textMatrix;s.textRise!==0&&(ct=ct.slice(),ct[5]+=s.textRise),s.txtElement.setAttributeNS(null,"transform",`${c(ct)} scale(${r(ht)}, -1)`),s.txtElement.setAttributeNS(w,"xml:space","preserve"),s.txtElement.append(s.tspan),s.txtgrp.append(s.txtElement),this._ensureTransformGroup().append(s.txtElement)}setLeadingMoveText(e,s){this.setLeading(-s),this.moveText(e,s)}addFontStyle(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const s=y(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${e.loadedName}"; src: url(${s}); }
`}setFont(e){const s=this.current,b=this.commonObjs.get(e[0]);let k=e[1];s.font=b,this.embedFonts&&!b.missingFile&&!this.embeddedFonts[b.loadedName]&&(this.addFontStyle(b),this.embeddedFonts[b.loadedName]=b),s.fontMatrix=b.fontMatrix||g.FONT_IDENTITY_MATRIX;let M="normal";b.black?M="900":b.bold&&(M="bold");const q=b.italic?"italic":"normal";k<0?(k=-k,s.fontDirection=-1):s.fontDirection=1,s.fontSize=k,s.fontFamily=b.loadedName,s.fontWeight=M,s.fontStyle=q,s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"y",r(-s.y)),s.xcoords=[],s.ycoords=[]}endText(){var s;const e=this.current;e.textRenderingMode&g.TextRenderingMode.ADD_TO_PATH_FLAG&&((s=e.txtElement)!=null&&s.hasChildNodes())&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(e){e>0&&(this.current.lineWidth=e)}setLineCap(e){this.current.lineCap=v[e]}setLineJoin(e){this.current.lineJoin=I[e]}setMiterLimit(e){this.current.miterLimit=e}setStrokeAlpha(e){this.current.strokeAlpha=e}setStrokeRGBColor(e,s,b){this.current.strokeColor=g.Util.makeHexColor(e,s,b)}setFillAlpha(e){this.current.fillAlpha=e}setFillRGBColor(e,s,b){this.current.fillColor=g.Util.makeHexColor(e,s,b),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(e){this.current.strokeColor=this._makeColorN_Pattern(e)}setFillColorN(e){this.current.fillColor=this._makeColorN_Pattern(e)}shadingFill(e){const s=this.viewport.width,b=this.viewport.height,k=g.Util.inverseTransform(this.transformMatrix),M=g.Util.applyTransform([0,0],k),q=g.Util.applyTransform([0,b],k),S=g.Util.applyTransform([s,0],k),G=g.Util.applyTransform([s,b],k),ht=Math.min(M[0],q[0],S[0],G[0]),nt=Math.min(M[1],q[1],S[1],G[1]),rt=Math.max(M[0],q[0],S[0],G[0]),K=Math.max(M[1],q[1],S[1],G[1]),z=this.svgFactory.createElement("svg:rect");z.setAttributeNS(null,"x",ht),z.setAttributeNS(null,"y",nt),z.setAttributeNS(null,"width",rt-ht),z.setAttributeNS(null,"height",K-nt),z.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&z.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(z)}_makeColorN_Pattern(e){return e[0]==="TilingPattern"?this._makeTilingPattern(e):this._makeShadingPattern(e)}_makeTilingPattern(e){const s=e[1],b=e[2],k=e[3]||g.IDENTITY_MATRIX,[M,q,S,G]=e[4],ht=e[5],nt=e[6],rt=e[7],K=`shading${a++}`,[z,X,at,ct]=g.Util.normalizeRect([...g.Util.applyTransform([M,q],k),...g.Util.applyTransform([S,G],k)]),[N,u]=g.Util.singularValueDecompose2dScale(k),o=ht*N,E=nt*u,R=this.svgFactory.createElement("svg:pattern");R.setAttributeNS(null,"id",K),R.setAttributeNS(null,"patternUnits","userSpaceOnUse"),R.setAttributeNS(null,"width",o),R.setAttributeNS(null,"height",E),R.setAttributeNS(null,"x",`${z}`),R.setAttributeNS(null,"y",`${X}`);const O=this.svg,B=this.transformMatrix,W=this.current.fillColor,Y=this.current.strokeColor,Q=this.svgFactory.create(at-z,ct-X);if(this.svg=Q,this.transformMatrix=k,rt===2){const J=g.Util.makeHexColor(...s);this.current.fillColor=J,this.current.strokeColor=J}return this.executeOpTree(this.convertOpList(b)),this.svg=O,this.transformMatrix=B,this.current.fillColor=W,this.current.strokeColor=Y,R.append(Q.childNodes[0]),this.defs.append(R),`url(#${K})`}_makeShadingPattern(e){switch(typeof e=="string"&&(e=this.objs.get(e)),e[0]){case"RadialAxial":const s=`shading${a++}`,b=e[3];let k;switch(e[1]){case"axial":const M=e[4],q=e[5];k=this.svgFactory.createElement("svg:linearGradient"),k.setAttributeNS(null,"id",s),k.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),k.setAttributeNS(null,"x1",M[0]),k.setAttributeNS(null,"y1",M[1]),k.setAttributeNS(null,"x2",q[0]),k.setAttributeNS(null,"y2",q[1]);break;case"radial":const S=e[4],G=e[5],ht=e[6],nt=e[7];k=this.svgFactory.createElement("svg:radialGradient"),k.setAttributeNS(null,"id",s),k.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),k.setAttributeNS(null,"cx",G[0]),k.setAttributeNS(null,"cy",G[1]),k.setAttributeNS(null,"r",nt),k.setAttributeNS(null,"fx",S[0]),k.setAttributeNS(null,"fy",S[1]),k.setAttributeNS(null,"fr",ht);break;default:throw new Error(`Unknown RadialAxial type: ${e[1]}`)}for(const M of b){const q=this.svgFactory.createElement("svg:stop");q.setAttributeNS(null,"offset",M[0]),q.setAttributeNS(null,"stop-color",M[1]),k.append(q)}return this.defs.append(k),`url(#${s})`;case"Mesh":return(0,g.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${e[0]}`)}}setDash(e,s){this.current.dashArray=e,this.current.dashPhase=s}constructPath(e,s){const b=this.current;let k=b.x,M=b.y,q=[],S=0;for(const G of e)switch(G|0){case g.OPS.rectangle:k=s[S++],M=s[S++];const ht=s[S++],nt=s[S++],rt=k+ht,K=M+nt;q.push("M",r(k),r(M),"L",r(rt),r(M),"L",r(rt),r(K),"L",r(k),r(K),"Z");break;case g.OPS.moveTo:k=s[S++],M=s[S++],q.push("M",r(k),r(M));break;case g.OPS.lineTo:k=s[S++],M=s[S++],q.push("L",r(k),r(M));break;case g.OPS.curveTo:k=s[S+4],M=s[S+5],q.push("C",r(s[S]),r(s[S+1]),r(s[S+2]),r(s[S+3]),r(k),r(M)),S+=6;break;case g.OPS.curveTo2:q.push("C",r(k),r(M),r(s[S]),r(s[S+1]),r(s[S+2]),r(s[S+3])),k=s[S+2],M=s[S+3],S+=4;break;case g.OPS.curveTo3:k=s[S+2],M=s[S+3],q.push("C",r(s[S]),r(s[S+1]),r(k),r(M),r(k),r(M)),S+=4;break;case g.OPS.closePath:q.push("Z");break}q=q.join(" "),b.path&&e.length>0&&e[0]!==g.OPS.rectangle&&e[0]!==g.OPS.moveTo?q=b.path.getAttributeNS(null,"d")+q:(b.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(b.path)),b.path.setAttributeNS(null,"d",q),b.path.setAttributeNS(null,"fill","none"),b.element=b.path,b.setCurrentPoint(k,M)}endPath(){const e=this.current;if(e.path=null,!this.pendingClip)return;if(!e.element){this.pendingClip=null;return}const s=`clippath${p++}`,b=this.svgFactory.createElement("svg:clipPath");b.setAttributeNS(null,"id",s),b.setAttributeNS(null,"transform",c(this.transformMatrix));const k=e.element.cloneNode(!0);if(this.pendingClip==="evenodd"?k.setAttributeNS(null,"clip-rule","evenodd"):k.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,b.append(k),this.defs.append(b),e.activeClipUrl){e.clipGroup=null;for(const M of this.extraStack)M.clipGroup=null;b.setAttributeNS(null,"clip-path",e.activeClipUrl)}e.activeClipUrl=`url(#${s})`,this.tgrp=null}clip(e){this.pendingClip=e}closePath(){const e=this.current;if(e.path){const s=`${e.path.getAttributeNS(null,"d")}Z`;e.path.setAttributeNS(null,"d",s)}}setLeading(e){this.current.leading=-e}setTextRise(e){this.current.textRise=e}setTextRenderingMode(e){this.current.textRenderingMode=e}setHScale(e){this.current.textHScale=e/100}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[s,b]of e)switch(s){case"LW":this.setLineWidth(b);break;case"LC":this.setLineCap(b);break;case"LJ":this.setLineJoin(b);break;case"ML":this.setMiterLimit(b);break;case"D":this.setDash(b[0],b[1]);break;case"RI":this.setRenderingIntent(b);break;case"FL":this.setFlatness(b);break;case"Font":this.setFont(b);break;case"CA":this.setStrokeAlpha(b);break;case"ca":this.setFillAlpha(b);break;default:(0,g.warn)(`Unimplemented graphic state operator ${s}`);break}}fill(){const e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}stroke(){const e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(e,s=1){const b=this.current;let k=b.dashArray;s!==1&&k.length>0&&(k=k.map(function(M){return s*M})),e.setAttributeNS(null,"stroke",b.strokeColor),e.setAttributeNS(null,"stroke-opacity",b.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",r(b.miterLimit)),e.setAttributeNS(null,"stroke-linecap",b.lineCap),e.setAttributeNS(null,"stroke-linejoin",b.lineJoin),e.setAttributeNS(null,"stroke-width",r(s*b.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",k.map(r).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",r(s*b.dashPhase)+"px")}eoFill(){var e;(e=this.current.element)==null||e.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var e;(e=this.current.element)==null||e.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(e)}paintImageXObject(e){const s=this.getObject(e);if(!s){(0,g.warn)(`Dependent image with object ID ${e} is not ready yet`);return}this.paintInlineImageXObject(s)}paintInlineImageXObject(e,s){const b=e.width,k=e.height,M=A(e,this.forceDataSchema,!!s),q=this.svgFactory.createElement("svg:rect");q.setAttributeNS(null,"x","0"),q.setAttributeNS(null,"y","0"),q.setAttributeNS(null,"width",r(b)),q.setAttributeNS(null,"height",r(k)),this.current.element=q,this.clip("nonzero");const S=this.svgFactory.createElement("svg:image");S.setAttributeNS(h,"xlink:href",M),S.setAttributeNS(null,"x","0"),S.setAttributeNS(null,"y",r(-k)),S.setAttributeNS(null,"width",r(b)+"px"),S.setAttributeNS(null,"height",r(k)+"px"),S.setAttributeNS(null,"transform",`scale(${r(1/b)} ${r(-1/k)})`),s?s.append(S):this._ensureTransformGroup().append(S)}paintImageMaskXObject(e){const s=this.getObject(e.data,e);if(s.bitmap){(0,g.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const b=this.current,k=s.width,M=s.height,q=b.fillColor;b.maskId=`mask${i++}`;const S=this.svgFactory.createElement("svg:mask");S.setAttributeNS(null,"id",b.maskId);const G=this.svgFactory.createElement("svg:rect");G.setAttributeNS(null,"x","0"),G.setAttributeNS(null,"y","0"),G.setAttributeNS(null,"width",r(k)),G.setAttributeNS(null,"height",r(M)),G.setAttributeNS(null,"fill",q),G.setAttributeNS(null,"mask",`url(#${b.maskId})`),this.defs.append(S),this._ensureTransformGroup().append(G),this.paintInlineImageXObject(s,S)}paintFormXObjectBegin(e,s){if(Array.isArray(e)&&e.length===6&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),s){const b=s[2]-s[0],k=s[3]-s[1],M=this.svgFactory.createElement("svg:rect");M.setAttributeNS(null,"x",s[0]),M.setAttributeNS(null,"y",s[1]),M.setAttributeNS(null,"width",r(b)),M.setAttributeNS(null,"height",r(k)),this.current.element=M,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(e){const s=this.svgFactory.create(e.width,e.height),b=this.svgFactory.createElement("svg:defs");s.append(b),this.defs=b;const k=this.svgFactory.createElement("svg:g");return k.setAttributeNS(null,"transform",c(e.transform)),s.append(k),this.svg=k,s}_ensureClipGroup(){if(!this.current.clipGroup){const e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(e),this.current.clipGroup=e}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",c(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(L){var t=__webpack_module_cache__[L];if(t!==void 0)return t.exports;var l=__webpack_module_cache__[L]={exports:{}};return __webpack_modules__[L](l,l.exports,__w_pdfjs_require__),l.exports}var __webpack_exports__={};return(()=>{var L=__webpack_exports__;Object.defineProperty(L,"__esModule",{value:!0}),Object.defineProperty(L,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(L,"AnnotationEditorLayer",{enumerable:!0,get:function(){return T.AnnotationEditorLayer}}),Object.defineProperty(L,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(L,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(L,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return P.AnnotationEditorUIManager}}),Object.defineProperty(L,"AnnotationLayer",{enumerable:!0,get:function(){return D.AnnotationLayer}}),Object.defineProperty(L,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(L,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(L,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(L,"GlobalWorkerOptions",{enumerable:!0,get:function(){return w.GlobalWorkerOptions}}),Object.defineProperty(L,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(L,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(L,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(L,"PDFDataRangeTransport",{enumerable:!0,get:function(){return l.PDFDataRangeTransport}}),Object.defineProperty(L,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(L,"PDFWorker",{enumerable:!0,get:function(){return l.PDFWorker}}),Object.defineProperty(L,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(L,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(L,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(L,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(L,"SVGGraphics",{enumerable:!0,get:function(){return h.SVGGraphics}}),Object.defineProperty(L,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return t.UNSUPPORTED_FEATURES}}),Object.defineProperty(L,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(L,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(L,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(L,"XfaLayer",{enumerable:!0,get:function(){return v.XfaLayer}}),Object.defineProperty(L,"build",{enumerable:!0,get:function(){return l.build}}),Object.defineProperty(L,"createPromiseCapability",{enumerable:!0,get:function(){return t.createPromiseCapability}}),Object.defineProperty(L,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(L,"getDocument",{enumerable:!0,get:function(){return l.getDocument}}),Object.defineProperty(L,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(L,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(L,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(L,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(L,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(L,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(L,"renderTextLayer",{enumerable:!0,get:function(){return g.renderTextLayer}}),Object.defineProperty(L,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(L,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(L,"updateTextLayer",{enumerable:!0,get:function(){return g.updateTextLayer}}),Object.defineProperty(L,"version",{enumerable:!0,get:function(){return l.version}});var t=__w_pdfjs_require__(1),l=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),g=__w_pdfjs_require__(26),T=__w_pdfjs_require__(27),P=__w_pdfjs_require__(5),D=__w_pdfjs_require__(32),w=__w_pdfjs_require__(14),h=__w_pdfjs_require__(35),v=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf);var FileSaver_minExports={},FileSaver_min={get exports(){return FileSaver_minExports},set exports(L){FileSaver_minExports=L}};(function(L,t){(function(l,n){n()})(commonjsGlobal,function(){function l(h,v){return typeof v>"u"?v={autoBom:!1}:typeof v!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),v={autoBom:!v}),v.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function n(h,v,I){var y=new XMLHttpRequest;y.open("GET",h),y.responseType="blob",y.onload=function(){w(y.response,v,I)},y.onerror=function(){console.error("could not download file")},y.send()}function g(h){var v=new XMLHttpRequest;v.open("HEAD",h,!1);try{v.send()}catch{}return 200<=v.status&&299>=v.status}function T(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var v=document.createEvent("MouseEvents");v.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(v)}}var P=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,D=P.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),w=P.saveAs||(typeof window!="object"||window!==P?function(){}:"download"in HTMLAnchorElement.prototype&&!D?function(h,v,I){var y=P.URL||P.webkitURL,A=document.createElement("a");v=v||h.name||"download",A.download=v,A.rel="noopener",typeof h=="string"?(A.href=h,A.origin===location.origin?T(A):g(A.href)?n(h,v,I):T(A,A.target="_blank")):(A.href=y.createObjectURL(h),setTimeout(function(){y.revokeObjectURL(A.href)},4e4),setTimeout(function(){T(A)},0))}:"msSaveOrOpenBlob"in navigator?function(h,v,I){if(v=v||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(l(h,I),v);else if(g(h))n(h,v,I);else{var y=document.createElement("a");y.href=h,y.target="_blank",setTimeout(function(){T(y)})}}:function(h,v,I,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof h=="string")return n(h,v,I);var A=h.type==="application/octet-stream",m=/constructor/i.test(P.HTMLElement)||P.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||A&&m||D)&&typeof FileReader<"u"){var r=new FileReader;r.onloadend=function(){var i=r.result;i=f?i:i.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=i:location=i,y=null},r.readAsDataURL(h)}else{var c=P.URL||P.webkitURL,p=c.createObjectURL(h);y?y.location=p:location.href=p,y=null,setTimeout(function(){c.revokeObjectURL(p)},4e4)}});P.saveAs=w.saveAs=w,L.exports=w})})(FileSaver_min);const FileSaver=FileSaver_minExports,onPrint=L=>{let t;t||(t=document.createElement("iframe"),document.body.appendChild(t),t.style.display="none",t.onload=function(){setTimeout(function(){t.focus(),t.contentWindow.print()},1)}),t.src=L},calcRT=L=>{let l=L.split(" ").length;if(l>0)return Math.ceil(l/200)},getPageText=(L,t)=>new Promise(function(l,n){t.getPage(L).then(function(g){g.getTextContent().then(function(T){for(var P=T.items,D="",w=0;w<P.length;w++){var h=P[w];D+=h.str+" "}l(D)})})});function cubicOut(L){const t=L-1;return t*t*t+1}function scale(L,{delay:t=0,duration:l=400,easing:n=cubicOut,start:g=0,opacity:T=0}={}){const P=getComputedStyle(L),D=+P.opacity,w=P.transform==="none"?"":P.transform,h=1-g,v=D*(1-T);return{delay:t,duration:l,easing:n,css:(I,y)=>`
			transform: ${w} scale(${1-h*y});
			opacity: ${D-v*y}
		`}}class ClassBuilder{constructor(t,l){this.defaults=typeof t=="function"?t(l):t,this.classes=this.defaults}flush(){return this.classes=this.defaults,this}extend(...t){return this}get(){return this.classes}replace(t,l=!0){return l&&t&&(this.classes=Object.keys(t).reduce((n,g)=>n.replace(new RegExp(g,"g"),t[g]),this.classes)),this}remove(t,l=!0){return l&&t&&(this.classes=t.split(" ").reduce((n,g)=>n.replace(new RegExp(g,"g"),""),this.classes)),this}add(t,l=!0,n){if(!l||!t)return this;switch(typeof t){case"string":default:return this.classes+=` ${t} `,this;case"function":return this.classes+=` ${t(n||this.classes)} `,this}}}const Tooltip_svelte_svelte_type_style_lang="",get_activator_slot_changes=L=>({}),get_activator_slot_context=L=>({});function create_if_block$1(L){let t,l,n,g,T;const P=L[8].default,D=create_slot(P,L,L[7],null);return{c(){t=element("div"),D&&D.c(),this.h()},l(w){t=claim_element(w,"DIV",{class:!0});var h=children(t);D&&D.l(h),h.forEach(detach),this.h()},h(){attr(t,"class",l=null_to_empty(L[1])+" svelte-10lk5cm")},m(w,h){insert_hydration(w,t,h),D&&D.m(t,null),T=!0},p(w,h){D&&D.p&&(!T||h&128)&&update_slot_base(D,P,w,w[7],T?get_slot_changes(P,w[7],h,null):get_all_dirty_from_scope(w[7]),null),(!T||h&2&&l!==(l=null_to_empty(w[1])+" svelte-10lk5cm"))&&attr(t,"class",l)},i(w){T||(transition_in(D,w),add_render_callback(()=>{T&&(g&&g.end(1),n=create_in_transition(t,scale,{duration:150}),n.start())}),T=!0)},o(w){transition_out(D,w),n&&n.invalidate(),g=create_out_transition(t,scale,{duration:150,delay:100}),T=!1},d(w){w&&detach(t),D&&D.d(w),w&&g&&g.end()}}}function create_fragment$1(L){let t,l,n,g,T,P;const D=L[8].activator,w=create_slot(D,L,L[7],get_activator_slot_context);let h=L[0]&&create_if_block$1(L);return{c(){t=element("div"),l=element("div"),w&&w.c(),n=space(),h&&h.c(),this.h()},l(v){t=claim_element(v,"DIV",{class:!0});var I=children(t);l=claim_element(I,"DIV",{});var y=children(l);w&&w.l(y),y.forEach(detach),n=claim_space(I),h&&h.l(I),I.forEach(detach),this.h()},h(){attr(t,"class","activator svelte-10lk5cm")},m(v,I){insert_hydration(v,t,I),append_hydration(t,l),w&&w.m(l,null),append_hydration(t,n),h&&h.m(t,null),g=!0,T||(P=[listen(l,"mouseenter",debounce(L[2],100)),listen(l,"mouseleave",debounce(L[3],500)),listen(l,"mouseenter",L[9]),listen(l,"mouseleave",L[10]),listen(l,"focus",L[11]),listen(l,"blur",L[12])],T=!0)},p(v,[I]){w&&w.p&&(!g||I&128)&&update_slot_base(w,D,v,v[7],g?get_slot_changes(D,v[7],I,get_activator_slot_changes):get_all_dirty_from_scope(v[7]),get_activator_slot_context),v[0]?h?(h.p(v,I),I&1&&transition_in(h,1)):(h=create_if_block$1(v),h.c(),transition_in(h,1),h.m(t,null)):h&&(group_outros(),transition_out(h,1,1,()=>{h=null}),check_outros())},i(v){g||(transition_in(w,v),transition_in(h),g=!0)},o(v){transition_out(w,v),transition_out(h),g=!1},d(v){v&&detach(t),w&&w.d(v),h&&h.d(),T=!1,run_all(P)}}}const classesDefault="tooltip";function debounce(L,t,l){let n;return function(){let g=this,T=arguments,P=function(){n=null,l||L.apply(g,T)},D=l&&!n;clearTimeout(n),n=setTimeout(P,t),D&&L.apply(g,T)}}function instance$1(L,t,l){let n,{$$slots:g={},$$scope:T}=t,{class:P=""}=t,{classes:D=classesDefault}=t,{show:w=!1}=t,{timeout:h=null}=t;const v=new ClassBuilder(D,classesDefault);function I(){w||(l(0,w=!0),h&&l(4,h=setTimeout(()=>{l(0,w=!1)},h)))}function y(){w&&(l(0,w=!1),clearTimeout(h))}function A(c){bubble.call(this,L,c)}function m(c){bubble.call(this,L,c)}function f(c){bubble.call(this,L,c)}function r(c){bubble.call(this,L,c)}return L.$$set=c=>{"class"in c&&l(5,P=c.class),"classes"in c&&l(6,D=c.classes),"show"in c&&l(0,w=c.show),"timeout"in c&&l(4,h=c.timeout),"$$scope"in c&&l(7,T=c.$$scope)},L.$$.update=()=>{L.$$.dirty&96&&l(1,n=v.flush().add(D,!0,classesDefault).add(P).get())},[w,n,I,y,h,P,D,T,g,A,m,f,r]}class Tooltip extends SvelteComponent{constructor(t){super(),init(this,t,instance$1,create_fragment$1,safe_not_equal,{class:5,classes:6,show:0,timeout:4})}}const PdfViewer_svelte_svelte_type_style_lang="",{window:window_1}=globals;function create_else_block_1(L){let t,l,n;return{c(){t=element("div"),l=element("canvas"),this.h()},l(g){t=claim_element(g,"DIV",{class:!0});var T=children(t);l=claim_element(T,"CANVAS",{class:!0}),children(l).forEach(detach),T.forEach(detach),this.h()},h(){attr(l,"class","svelte-19h83wp"),attr(t,"class",n=null_to_empty(L[5]===!0?"viewer":"null")+" svelte-19h83wp")},m(g,T){insert_hydration(g,t,T),append_hydration(t,l),L[45](l)},p(g,T){T[0]&32&&n!==(n=null_to_empty(g[5]===!0?"viewer":"null")+" svelte-19h83wp")&&attr(t,"class",n)},i:noop,o:noop,d(g){g&&detach(t),L[45](null)}}}function create_if_block_1(L){let t,l,n=L[4].includes("navigation"),g,T=L[4].includes("zoom"),P,D=L[4].includes("print"),w,h=L[4].includes("rotate"),v,I=L[4].includes("download"),y,A=L[4].includes("autoflip"),m,f,r,c,p,i,a,e,s,b,k,M,q,S,G,ht,nt,rt,K,z,X,at,ct,N,u,o=n&&create_if_block_8(L),E=T&&create_if_block_7(L),R=D&&create_if_block_6(L),O=h&&create_if_block_5(L),B=I&&create_if_block_4(L),W=A&&create_if_block_2(L);return{c(){t=element("div"),l=element("div"),o&&o.c(),g=space(),E&&E.c(),P=space(),R&&R.c(),w=space(),O&&O.c(),v=space(),B&&B.c(),y=space(),W&&W.c(),m=space(),f=element("span"),r=svg_element("svg"),c=svg_element("path"),p=space(),i=element("span"),a=text(L[9]),e=text(" min read"),b=space(),k=element("span"),M=svg_element("svg"),q=svg_element("path"),S=space(),G=element("div"),ht=text(`Page :
              `),nt=element("span"),rt=text(`
              /
              `),K=element("span"),X=space(),at=element("div"),ct=element("canvas"),this.h()},l(Y){t=claim_element(Y,"DIV",{class:!0});var Q=children(t);l=claim_element(Q,"DIV",{class:!0});var J=children(l);o&&o.l(J),g=claim_space(J),E&&E.l(J),P=claim_space(J),R&&R.l(J),w=claim_space(J),O&&O.l(J),v=claim_space(J),B&&B.l(J),y=claim_space(J),W&&W.l(J),m=claim_space(J),f=claim_element(J,"SPAN",{class:!0,style:!0});var st=children(f);r=claim_svg_element(st,"svg",{class:!0,xmlns:!0,viewBox:!0});var Z=children(r);c=claim_svg_element(Z,"path",{d:!0}),children(c).forEach(detach),Z.forEach(detach),p=claim_space(st),i=claim_element(st,"SPAN",{class:!0});var d=children(i);a=claim_text(d,L[9]),e=claim_text(d," min read"),d.forEach(detach),st.forEach(detach),b=claim_space(J),k=claim_element(J,"SPAN",{class:!0,style:!0});var _=children(k);M=claim_svg_element(_,"svg",{class:!0,xmlns:!0,viewBox:!0});var x=children(M);q=claim_svg_element(x,"path",{d:!0}),children(q).forEach(detach),x.forEach(detach),S=claim_space(_),G=claim_element(_,"DIV",{class:!0});var j=children(G);ht=claim_text(j,`Page :
              `),nt=claim_element(j,"SPAN",{}),children(nt).forEach(detach),rt=claim_text(j,`
              /
              `),K=claim_element(j,"SPAN",{}),children(K).forEach(detach),j.forEach(detach),_.forEach(detach),J.forEach(detach),X=claim_space(Q),at=claim_element(Q,"DIV",{class:!0});var F=children(at);ct=claim_element(F,"CANVAS",{width:!0,height:!0,class:!0}),children(ct).forEach(detach),F.forEach(detach),Q.forEach(detach),this.h()},h(){attr(c,"d",`M16.32 7.1A8 8 0 1 1 9 4.06V2h2v2.06c1.46.18 2.8.76 3.9
                1.62l1.46-1.46 1.42 1.42-1.46 1.45zM10 18a6 6 0 1 0 0-12 6 6 0 0
                0 0 12zM7 0h6v2H7V0zm5.12 8.46l1.42 1.42L10 13.4 8.59
                12l3.53-3.54z`),attr(r,"class","icon svelte-19h83wp"),attr(r,"xmlns","http://www.w3.org/2000/svg"),attr(r,"viewBox","0 0 20 20"),attr(i,"class","text svelte-19h83wp"),attr(f,"class","page-info svelte-19h83wp"),attr(f,"style",s=L[4].includes("timeInfo")?"":"display: none;"),attr(q,"d",`M16 2h4v15a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V0h16v2zm0 2v13a1 1 0
                0 0 1 1 1 1 0 0 0 1-1V4h-2zM2 2v15a1 1 0 0 0 1 1h11.17a2.98 2.98
                0 0 1-.17-1V2H2zm2 8h8v2H4v-2zm0 4h8v2H4v-2zM4 4h8v4H4V4z`),attr(M,"class","icon svelte-19h83wp"),attr(M,"xmlns","http://www.w3.org/2000/svg"),attr(M,"viewBox","0 0 20 20"),attr(G,"class","text svelte-19h83wp"),attr(k,"class","page-info svelte-19h83wp"),attr(k,"style",z=L[4].includes("pageInfo")?"":"display: none;"),attr(l,"class","line svelte-19h83wp"),attr(ct,"width",L[15]),attr(ct,"height",L[16]),attr(ct,"class","svelte-19h83wp"),attr(at,"class",N=null_to_empty(L[5]===!0?"viewer":"null")+" svelte-19h83wp"),attr(t,"class","control-start svelte-19h83wp")},m(Y,Q){insert_hydration(Y,t,Q),append_hydration(t,l),o&&o.m(l,null),append_hydration(l,g),E&&E.m(l,null),append_hydration(l,P),R&&R.m(l,null),append_hydration(l,w),O&&O.m(l,null),append_hydration(l,v),B&&B.m(l,null),append_hydration(l,y),W&&W.m(l,null),append_hydration(l,m),append_hydration(l,f),append_hydration(f,r),append_hydration(r,c),append_hydration(f,p),append_hydration(f,i),append_hydration(i,a),append_hydration(i,e),append_hydration(l,b),append_hydration(l,k),append_hydration(k,M),append_hydration(M,q),append_hydration(k,S),append_hydration(k,G),append_hydration(G,ht),append_hydration(G,nt),L[42](nt),append_hydration(G,rt),append_hydration(G,K),L[43](K),append_hydration(t,X),append_hydration(t,at),append_hydration(at,ct),L[44](ct),u=!0},p(Y,Q){Q[0]&16&&(n=Y[4].includes("navigation")),n?o?(o.p(Y,Q),Q[0]&16&&transition_in(o,1)):(o=create_if_block_8(Y),o.c(),transition_in(o,1),o.m(l,g)):o&&(group_outros(),transition_out(o,1,1,()=>{o=null}),check_outros()),Q[0]&16&&(T=Y[4].includes("zoom")),T?E?(E.p(Y,Q),Q[0]&16&&transition_in(E,1)):(E=create_if_block_7(Y),E.c(),transition_in(E,1),E.m(l,P)):E&&(group_outros(),transition_out(E,1,1,()=>{E=null}),check_outros()),Q[0]&16&&(D=Y[4].includes("print")),D?R?(R.p(Y,Q),Q[0]&16&&transition_in(R,1)):(R=create_if_block_6(Y),R.c(),transition_in(R,1),R.m(l,w)):R&&(group_outros(),transition_out(R,1,1,()=>{R=null}),check_outros()),Q[0]&16&&(h=Y[4].includes("rotate")),h?O?(O.p(Y,Q),Q[0]&16&&transition_in(O,1)):(O=create_if_block_5(Y),O.c(),transition_in(O,1),O.m(l,v)):O&&(group_outros(),transition_out(O,1,1,()=>{O=null}),check_outros()),Q[0]&16&&(I=Y[4].includes("download")),I?B?(B.p(Y,Q),Q[0]&16&&transition_in(B,1)):(B=create_if_block_4(Y),B.c(),transition_in(B,1),B.m(l,y)):B&&(group_outros(),transition_out(B,1,1,()=>{B=null}),check_outros()),Q[0]&16&&(A=Y[4].includes("autoflip")),A?W?(W.p(Y,Q),Q[0]&16&&transition_in(W,1)):(W=create_if_block_2(Y),W.c(),transition_in(W,1),W.m(l,m)):W&&(group_outros(),transition_out(W,1,1,()=>{W=null}),check_outros()),(!u||Q[0]&512)&&set_data(a,Y[9]),(!u||Q[0]&16&&s!==(s=Y[4].includes("timeInfo")?"":"display: none;"))&&attr(f,"style",s),(!u||Q[0]&16&&z!==(z=Y[4].includes("pageInfo")?"":"display: none;"))&&attr(k,"style",z),(!u||Q[0]&32768)&&attr(ct,"width",Y[15]),(!u||Q[0]&65536)&&attr(ct,"height",Y[16]),(!u||Q[0]&32&&N!==(N=null_to_empty(Y[5]===!0?"viewer":"null")+" svelte-19h83wp"))&&attr(at,"class",N)},i(Y){u||(transition_in(o),transition_in(E),transition_in(R),transition_in(O),transition_in(B),transition_in(W),u=!0)},o(Y){transition_out(o),transition_out(E),transition_out(R),transition_out(O),transition_out(B),transition_out(W),u=!1},d(Y){Y&&detach(t),o&&o.d(),E&&E.d(),R&&R.d(),O&&O.d(),B&&B.d(),W&&W.d(),L[42](null),L[43](null),L[44](null)}}}function create_if_block(L){let t,l,n,g,T,P,D,w,h,v,I,y,A,m;return{c(){t=element("div"),l=element("p"),n=text("This document requires a password to open:"),g=space(),T=element("p"),P=text(L[14]),D=space(),w=element("div"),h=element("input"),v=space(),I=element("button"),y=text("Submit"),this.h()},l(f){t=claim_element(f,"DIV",{class:!0});var r=children(t);l=claim_element(r,"P",{});var c=children(l);n=claim_text(c,"This document requires a password to open:"),c.forEach(detach),g=claim_space(r),T=claim_element(r,"P",{class:!0});var p=children(T);P=claim_text(p,L[14]),p.forEach(detach),D=claim_space(r),w=claim_element(r,"DIV",{class:!0});var i=children(w);h=claim_element(i,"INPUT",{type:!0,class:!0}),v=claim_space(i),I=claim_element(i,"BUTTON",{class:!0});var a=children(I);y=claim_text(a,"Submit"),a.forEach(detach),i.forEach(detach),r.forEach(detach),this.h()},h(){attr(T,"class","password-message svelte-19h83wp"),attr(h,"type","password"),attr(h,"class","password-input svelte-19h83wp"),attr(I,"class","password-button svelte-19h83wp"),attr(w,"class","password-container svelte-19h83wp"),attr(t,"class","password-viewer svelte-19h83wp")},m(f,r){insert_hydration(f,t,r),append_hydration(t,l),append_hydration(l,n),append_hydration(t,g),append_hydration(t,T),append_hydration(T,P),append_hydration(t,D),append_hydration(t,w),append_hydration(w,h),set_input_value(h,L[12]),append_hydration(w,v),append_hydration(w,I),append_hydration(I,y),A||(m=[listen(h,"input",L[32]),listen(I,"click",L[24])],A=!0)},p(f,r){r[0]&16384&&set_data(P,f[14]),r[0]&4096&&h.value!==f[12]&&set_input_value(h,f[12])},i:noop,o:noop,d(f){f&&detach(t),A=!1,run_all(m)}}}function create_if_block_8(L){let t,l,n,g;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot_8],default:[create_default_slot_8]},$$scope:{ctx:L}}}),n=new Tooltip({props:{$$slots:{activator:[create_activator_slot_7],default:[create_default_slot_7]},$$scope:{ctx:L}}}),{c(){create_component(t.$$.fragment),l=space(),create_component(n.$$.fragment)},l(T){claim_component(t.$$.fragment,T),l=claim_space(T),claim_component(n.$$.fragment,T)},m(T,P){mount_component(t,T,P),insert_hydration(T,l,P),mount_component(n,T,P),g=!0},p(T,P){const D={};P[0]&1|P[1]&268435456&&(D.$$scope={dirty:P,ctx:T}),t.$set(D);const w={};P[0]&5|P[1]&268435456&&(w.$$scope={dirty:P,ctx:T}),n.$set(w)},i(T){g||(transition_in(t.$$.fragment,T),transition_in(n.$$.fragment,T),g=!0)},o(T){transition_out(t.$$.fragment,T),transition_out(n.$$.fragment,T),g=!1},d(T){destroy_component(t,T),T&&detach(l),destroy_component(n,T)}}}function create_default_slot_8(L){let t;return{c(){t=text("Previous")},l(l){t=claim_text(l,"Previous")},m(l,n){insert_hydration(l,t,n)},d(l){l&&detach(t)}}}function create_activator_slot_8(L){let t,l,n,g,T,P;return{c(){t=element("span"),l=svg_element("svg"),n=svg_element("polygon"),this.h()},l(D){t=claim_element(D,"SPAN",{slot:!0,class:!0});var w=children(t);l=claim_svg_element(w,"svg",{class:!0,xmlns:!0,viewBox:!0});var h=children(l);n=claim_svg_element(h,"polygon",{points:!0}),children(n).forEach(detach),h.forEach(detach),w.forEach(detach),this.h()},h(){attr(n,"points",`3.828 9 9.899 2.929 8.485 1.515 0 10 .707 10.707 8.485
                  18.485 9.899 17.071 3.828 11 20 11 20 9 3.828 9`),attr(l,"class","icon svelte-19h83wp"),attr(l,"xmlns","http://www.w3.org/2000/svg"),attr(l,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class",g="button-control "+(L[0]<=1?"disabled":null)+" svelte-19h83wp")},m(D,w){insert_hydration(D,t,w),append_hydration(t,l),append_hydration(l,n),T||(P=listen(t,"click",L[33]),T=!0)},p(D,w){w[0]&1&&g!==(g="button-control "+(D[0]<=1?"disabled":null)+" svelte-19h83wp")&&attr(t,"class",g)},d(D){D&&detach(t),T=!1,P()}}}function create_default_slot_7(L){let t;return{c(){t=text("Next")},l(l){t=claim_text(l,"Next")},m(l,n){insert_hydration(l,t,n)},d(l){l&&detach(t)}}}function create_activator_slot_7(L){let t,l,n,g,T,P;return{c(){t=element("span"),l=svg_element("svg"),n=svg_element("polygon"),this.h()},l(D){t=claim_element(D,"SPAN",{slot:!0,class:!0});var w=children(t);l=claim_svg_element(w,"svg",{class:!0,xmlns:!0,viewBox:!0});var h=children(l);n=claim_svg_element(h,"polygon",{points:!0}),children(n).forEach(detach),h.forEach(detach),w.forEach(detach),this.h()},h(){attr(n,"points",`16.172 9 10.101 2.929 11.515 1.515 20 10 19.293 10.707
                  11.515 18.485 10.101 17.071 16.172 11 0 11 0 9`),attr(l,"class","icon svelte-19h83wp"),attr(l,"xmlns","http://www.w3.org/2000/svg"),attr(l,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class",g="button-control "+(L[0]>=L[2]?"disabled":null)+" svelte-19h83wp")},m(D,w){insert_hydration(D,t,w),append_hydration(t,l),append_hydration(l,n),T||(P=listen(t,"click",L[34]),T=!0)},p(D,w){w[0]&5&&g!==(g="button-control "+(D[0]>=D[2]?"disabled":null)+" svelte-19h83wp")&&attr(t,"class",g)},d(D){D&&detach(t),T=!1,P()}}}function create_if_block_7(L){let t,l,n,g;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot_6],default:[create_default_slot_6]},$$scope:{ctx:L}}}),n=new Tooltip({props:{$$slots:{activator:[create_activator_slot_5],default:[create_default_slot_5]},$$scope:{ctx:L}}}),{c(){create_component(t.$$.fragment),l=space(),create_component(n.$$.fragment)},l(T){claim_component(t.$$.fragment,T),l=claim_space(T),claim_component(n.$$.fragment,T)},m(T,P){mount_component(t,T,P),insert_hydration(T,l,P),mount_component(n,T,P),g=!0},p(T,P){const D={};P[0]&2|P[1]&268435456&&(D.$$scope={dirty:P,ctx:T}),t.$set(D);const w={};P[0]&2|P[1]&268435456&&(w.$$scope={dirty:P,ctx:T}),n.$set(w)},i(T){g||(transition_in(t.$$.fragment,T),transition_in(n.$$.fragment,T),g=!0)},o(T){transition_out(t.$$.fragment,T),transition_out(n.$$.fragment,T),g=!1},d(T){destroy_component(t,T),T&&detach(l),destroy_component(n,T)}}}function create_default_slot_6(L){let t;return{c(){t=text("Zoom In")},l(l){t=claim_text(l,"Zoom In")},m(l,n){insert_hydration(l,t,n)},d(l){l&&detach(t)}}}function create_activator_slot_6(L){let t,l,n,g,T,P;return{c(){t=element("span"),l=svg_element("svg"),n=svg_element("path"),this.h()},l(D){t=claim_element(D,"SPAN",{slot:!0,class:!0});var w=children(t);l=claim_svg_element(w,"svg",{class:!0,xmlns:!0,viewBox:!0});var h=children(l);n=claim_svg_element(h,"path",{"fill-rule":!0,d:!0}),children(n).forEach(detach),h.forEach(detach),w.forEach(detach),this.h()},h(){attr(n,"fill-rule","evenodd"),attr(n,"d",`M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42
                  1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12zM7
                  7V5h2v2h2v2H9v2H7V9H5V7h2z`),attr(l,"class","icon svelte-19h83wp"),attr(l,"xmlns","http://www.w3.org/2000/svg"),attr(l,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class",g="button-control "+(L[1]>=maxScale?"disabled":null)+" svelte-19h83wp")},m(D,w){insert_hydration(D,t,w),append_hydration(t,l),append_hydration(l,n),T||(P=listen(t,"click",L[35]),T=!0)},p(D,w){w[0]&2&&g!==(g="button-control "+(D[1]>=maxScale?"disabled":null)+" svelte-19h83wp")&&attr(t,"class",g)},d(D){D&&detach(t),T=!1,P()}}}function create_default_slot_5(L){let t;return{c(){t=text("Zoom Out")},l(l){t=claim_text(l,"Zoom Out")},m(l,n){insert_hydration(l,t,n)},d(l){l&&detach(t)}}}function create_activator_slot_5(L){let t,l,n,g,T,P;return{c(){t=element("span"),l=svg_element("svg"),n=svg_element("path"),this.h()},l(D){t=claim_element(D,"SPAN",{slot:!0,class:!0});var w=children(t);l=claim_svg_element(w,"svg",{class:!0,xmlns:!0,viewBox:!0});var h=children(l);n=claim_svg_element(h,"path",{"fill-rule":!0,d:!0}),children(n).forEach(detach),h.forEach(detach),w.forEach(detach),this.h()},h(){attr(n,"fill-rule","evenodd"),attr(n,"d",`M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42
                  1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12zM5
                  7h6v2H5V7z`),attr(l,"class","icon svelte-19h83wp"),attr(l,"xmlns","http://www.w3.org/2000/svg"),attr(l,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class",g="button-control "+(L[1]<=minScale?"disabled":null)+" svelte-19h83wp")},m(D,w){insert_hydration(D,t,w),append_hydration(t,l),append_hydration(l,n),T||(P=listen(t,"click",L[36]),T=!0)},p(D,w){w[0]&2&&g!==(g="button-control "+(D[1]<=minScale?"disabled":null)+" svelte-19h83wp")&&attr(t,"class",g)},d(D){D&&detach(t),T=!1,P()}}}function create_if_block_6(L){let t,l;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot_4],default:[create_default_slot_4]},$$scope:{ctx:L}}}),{c(){create_component(t.$$.fragment)},l(n){claim_component(t.$$.fragment,n)},m(n,g){mount_component(t,n,g),l=!0},p(n,g){const T={};g[0]&8|g[1]&268435456&&(T.$$scope={dirty:g,ctx:n}),t.$set(T)},i(n){l||(transition_in(t.$$.fragment,n),l=!0)},o(n){transition_out(t.$$.fragment,n),l=!1},d(n){destroy_component(t,n)}}}function create_default_slot_4(L){let t;return{c(){t=text("Print")},l(l){t=claim_text(l,"Print")},m(l,n){insert_hydration(l,t,n)},d(l){l&&detach(t)}}}function create_activator_slot_4(L){let t,l,n,g,T;return{c(){t=element("span"),l=svg_element("svg"),n=svg_element("path"),this.h()},l(P){t=claim_element(P,"SPAN",{slot:!0,class:!0});var D=children(t);l=claim_svg_element(D,"svg",{class:!0,xmlns:!0,viewBox:!0});var w=children(l);n=claim_svg_element(w,"path",{d:!0}),children(n).forEach(detach),w.forEach(detach),D.forEach(detach),this.h()},h(){attr(n,"d",`M4 16H0V6h20v10h-4v4H4v-4zm2-4v6h8v-6H6zM4 0h12v5H4V0zM2
                  8v2h2V8H2zm4 0v2h2V8H6z`),attr(l,"class","icon svelte-19h83wp"),attr(l,"xmlns","http://www.w3.org/2000/svg"),attr(l,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class","button-control svelte-19h83wp")},m(P,D){insert_hydration(P,t,D),append_hydration(t,l),append_hydration(l,n),g||(T=listen(t,"click",L[37]),g=!0)},p:noop,d(P){P&&detach(t),g=!1,T()}}}function create_if_block_5(L){let t,l,n,g;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot_3],default:[create_default_slot_3]},$$scope:{ctx:L}}}),n=new Tooltip({props:{$$slots:{activator:[create_activator_slot_2],default:[create_default_slot_2]},$$scope:{ctx:L}}}),{c(){create_component(t.$$.fragment),l=space(),create_component(n.$$.fragment)},l(T){claim_component(t.$$.fragment,T),l=claim_space(T),claim_component(n.$$.fragment,T)},m(T,P){mount_component(t,T,P),insert_hydration(T,l,P),mount_component(n,T,P),g=!0},p(T,P){const D={};P[1]&268435456&&(D.$$scope={dirty:P,ctx:T}),t.$set(D);const w={};P[1]&268435456&&(w.$$scope={dirty:P,ctx:T}),n.$set(w)},i(T){g||(transition_in(t.$$.fragment,T),transition_in(n.$$.fragment,T),g=!0)},o(T){transition_out(t.$$.fragment,T),transition_out(n.$$.fragment,T),g=!1},d(T){destroy_component(t,T),T&&detach(l),destroy_component(n,T)}}}function create_default_slot_3(L){let t;return{c(){t=text("Anti-Clockwise")},l(l){t=claim_text(l,"Anti-Clockwise")},m(l,n){insert_hydration(l,t,n)},d(l){l&&detach(t)}}}function create_activator_slot_3(L){let t,l,n,g,T;return{c(){t=element("span"),l=svg_element("svg"),n=svg_element("path"),this.h()},l(P){t=claim_element(P,"SPAN",{slot:!0,class:!0});var D=children(t);l=claim_svg_element(D,"svg",{class:!0,xmlns:!0,viewBox:!0});var w=children(l);n=claim_svg_element(w,"path",{d:!0}),children(n).forEach(detach),w.forEach(detach),D.forEach(detach),this.h()},h(){attr(n,"d",`M14.66 15.66A8 8 0 1 1 17 10h-2a6 6 0 1 0-1.76 4.24l1.42
                  1.42zM12 10h8l-4 4-4-4z`),attr(l,"class","icon rot-icon svelte-19h83wp"),attr(l,"xmlns","http://www.w3.org/2000/svg"),attr(l,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class","button-control svelte-19h83wp")},m(P,D){insert_hydration(P,t,D),append_hydration(t,l),append_hydration(l,n),g||(T=listen(t,"click",L[38]),g=!0)},p:noop,d(P){P&&detach(t),g=!1,T()}}}function create_default_slot_2(L){let t;return{c(){t=text("Clockwise")},l(l){t=claim_text(l,"Clockwise")},m(l,n){insert_hydration(l,t,n)},d(l){l&&detach(t)}}}function create_activator_slot_2(L){let t,l,n,g,T;return{c(){t=element("span"),l=svg_element("svg"),n=svg_element("path"),this.h()},l(P){t=claim_element(P,"SPAN",{slot:!0,class:!0});var D=children(t);l=claim_svg_element(D,"svg",{class:!0,xmlns:!0,viewBox:!0});var w=children(l);n=claim_svg_element(w,"path",{d:!0}),children(n).forEach(detach),w.forEach(detach),D.forEach(detach),this.h()},h(){attr(n,"d",`M14.66 15.66A8 8 0 1 1 17 10h-2a6 6 0 1 0-1.76 4.24l1.42
                  1.42zM12 10h8l-4 4-4-4z`),attr(l,"class","icon svelte-19h83wp"),attr(l,"xmlns","http://www.w3.org/2000/svg"),attr(l,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class","button-control svelte-19h83wp")},m(P,D){insert_hydration(P,t,D),append_hydration(t,l),append_hydration(l,n),g||(T=listen(t,"click",L[39]),g=!0)},p:noop,d(P){P&&detach(t),g=!1,T()}}}function create_if_block_4(L){let t,l;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot_1],default:[create_default_slot_1]},$$scope:{ctx:L}}}),{c(){create_component(t.$$.fragment)},l(n){claim_component(t.$$.fragment,n)},m(n,g){mount_component(t,n,g),l=!0},p(n,g){const T={};g[0]&8|g[1]&268435456&&(T.$$scope={dirty:g,ctx:n}),t.$set(T)},i(n){l||(transition_in(t.$$.fragment,n),l=!0)},o(n){transition_out(t.$$.fragment,n),l=!1},d(n){destroy_component(t,n)}}}function create_default_slot_1(L){let t;return{c(){t=text("Download")},l(l){t=claim_text(l,"Download")},m(l,n){insert_hydration(l,t,n)},d(l){l&&detach(t)}}}function create_activator_slot_1(L){let t,l,n,g,T;return{c(){t=element("span"),l=svg_element("svg"),n=svg_element("path"),this.h()},l(P){t=claim_element(P,"SPAN",{slot:!0,class:!0});var D=children(t);l=claim_svg_element(D,"svg",{class:!0,xmlns:!0,viewBox:!0});var w=children(l);n=claim_svg_element(w,"path",{d:!0}),children(n).forEach(detach),w.forEach(detach),D.forEach(detach),this.h()},h(){attr(n,"d","M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"),attr(l,"class","icon svelte-19h83wp"),attr(l,"xmlns","http://www.w3.org/2000/svg"),attr(l,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class","button-control svelte-19h83wp")},m(P,D){insert_hydration(P,t,D),append_hydration(t,l),append_hydration(l,n),g||(T=listen(t,"click",L[40]),g=!0)},p:noop,d(P){P&&detach(t),g=!1,T()}}}function create_if_block_2(L){let t,l;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot],default:[create_default_slot]},$$scope:{ctx:L}}}),{c(){create_component(t.$$.fragment)},l(n){claim_component(t.$$.fragment,n)},m(n,g){mount_component(t,n,g),l=!0},p(n,g){const T={};g[0]&3072|g[1]&268435456&&(T.$$scope={dirty:g,ctx:n}),t.$set(T)},i(n){l||(transition_in(t.$$.fragment,n),l=!0)},o(n){transition_out(t.$$.fragment,n),l=!1},d(n){destroy_component(t,n)}}}function create_default_slot(L){let t=(L[10]===!0?L[11]:"Auto Turn Page")+"",l;return{c(){l=text(t)},l(n){l=claim_text(n,t)},m(n,g){insert_hydration(n,l,g)},p(n,g){g[0]&3072&&t!==(t=(n[10]===!0?n[11]:"Auto Turn Page")+"")&&set_data(l,t)},d(n){n&&detach(l)}}}function create_else_block(L){let t;return{c(){t=svg_element("path"),this.h()},l(l){t=claim_svg_element(l,"path",{d:!0}),children(t).forEach(detach),this.h()},h(){attr(t,"d",`M9.896,3.838L0.792,1.562v14.794l9.104,2.276L19,16.356V1.562L9.896,3.838z
                    M9.327,17.332L1.93,15.219V3.27 l7.397,1.585V17.332z
                    M17.862,15.219l-7.397,2.113V4.855l7.397-1.585V15.219z`)},m(l,n){insert_hydration(l,t,n)},d(l){l&&detach(t)}}}function create_if_block_3(L){let t;return{c(){t=svg_element("path"),this.h()},l(l){t=claim_svg_element(l,"path",{d:!0}),children(t).forEach(detach),this.h()},h(){attr(t,"d","M4 18h12V6h-4V2H4v16zm-2 1V0h12l4 4v16H2v-1z")},m(l,n){insert_hydration(l,t,n)},d(l){l&&detach(t)}}}function create_activator_slot(L){let t,l,n,g;function T(w,h){return w[10]===!0?create_if_block_3:create_else_block}let P=T(L),D=P(L);return{c(){t=element("span"),l=svg_element("svg"),D.c(),this.h()},l(w){t=claim_element(w,"SPAN",{slot:!0,class:!0});var h=children(t);l=claim_svg_element(h,"svg",{class:!0,xmlns:!0,viewBox:!0});var v=children(l);D.l(v),v.forEach(detach),h.forEach(detach),this.h()},h(){attr(l,"class","icon svelte-19h83wp"),attr(l,"xmlns","http://www.w3.org/2000/svg"),attr(l,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class","page-info button-control svelte-19h83wp")},m(w,h){insert_hydration(w,t,h),append_hydration(t,l),D.m(l,null),n||(g=listen(t,"click",L[41]),n=!0)},p(w,h){P!==(P=T(w))&&(D.d(1),D=P(w),D&&(D.c(),D.m(l,null)))},d(w){w&&detach(t),D.d(),n=!1,g()}}}function create_fragment(L){let t,l,n,g,T,P,D,w,h,v,I,y;add_render_callback(L[31]);const A=[create_if_block,create_if_block_1,create_else_block_1],m=[];function f(r,c){return r[13]===!0?0:r[4].length?1:2}return n=f(L),g=m[n]=A[n](L),{c(){t=element("div"),l=element("div"),g.c(),P=space(),D=element("button"),w=svg_element("svg"),h=svg_element("path"),this.h()},l(r){t=claim_element(r,"DIV",{class:!0});var c=children(t);l=claim_element(c,"DIV",{class:!0});var p=children(l);g.l(p),p.forEach(detach),P=claim_space(c),D=claim_element(c,"BUTTON",{id:!0,class:!0});var i=children(D);w=claim_svg_element(i,"svg",{class:!0,xmlns:!0,viewBox:!0});var a=children(w);h=claim_svg_element(a,"path",{d:!0}),children(h).forEach(detach),a.forEach(detach),i.forEach(detach),c.forEach(detach),this.h()},h(){attr(l,"class",T=null_to_empty(L[5]===!0?"control":"null")+" svelte-19h83wp"),attr(h,"d","M7 10v8h6v-8h5l-8-8-8 8h5z"),attr(w,"class","icon svelte-19h83wp"),attr(w,"xmlns","http://www.w3.org/2000/svg"),attr(w,"viewBox","0 0 20 20"),attr(D,"id","topBtn"),attr(D,"class","svelte-19h83wp"),attr(t,"class","parent svelte-19h83wp")},m(r,c){insert_hydration(r,t,c),append_hydration(t,l),m[n].m(l,null),append_hydration(t,P),append_hydration(t,D),append_hydration(D,w),append_hydration(w,h),v=!0,I||(y=[listen(window_1,"resize",L[31]),listen(D,"click",L[46])],I=!0)},p(r,c){let p=n;n=f(r),n===p?m[n].p(r,c):(group_outros(),transition_out(m[p],1,1,()=>{m[p]=null}),check_outros(),g=m[n],g?g.p(r,c):(g=m[n]=A[n](r),g.c()),transition_in(g,1),g.m(l,null)),(!v||c[0]&32&&T!==(T=null_to_empty(r[5]===!0?"control":"null")+" svelte-19h83wp"))&&attr(l,"class",T)},i(r){v||(transition_in(g),v=!0)},o(r){transition_out(g),v=!1},d(r){r&&detach(t),m[n].d(),I=!1,run_all(y)}}}const minScale=1,maxScale=2.3;function instance(L,t,l){let{url:n}=t,{data:g}=t,{scale:T=1.8}=t,{pageNum:P=1}=t,{flipTime:D=120}=t,{showButtons:w=["navigation","zoom","print","rotate","download","autoflip","timeInfo","pageInfo"]}=t,{showBorder:h=!0}=t,{totalPage:v=0}=t,{downloadFileName:I=""}=t;pdfExports.GlobalWorkerOptions.workerSrc=new URL(""+new URL("../assets/pdf.worker.5507f856.js",import.meta.url).href,self.location);let y,A=0,m=0,f=null,r=!1,c=null,p=0,i="",a=0,e=!1,s,b,k=D,M=[],q="",S=!1,G="",ht=!1;const nt=it=>{r=!0,f.getPage(it).then(function(mt){let bt=mt.getViewport({scale:T,rotation:p});const St=y.getContext("2d");l(6,y.height=bt.height,y),l(6,y.width=bt.width,y);let wt={canvasContext:St,viewport:bt};mt.render(wt).promise.then(function(){if(r=!1,c!==null){if(P<f.totalPage)M[P]=y,l(0,P++,P),f.getPage(P).then(nt);else for(let U=1;U<M.length;U++)y.appendChild(M[U]);c=null}})}),w.length&&l(7,A.textContent=it,A)},rt=it=>{r?c=it:nt(it)},K=()=>{P<=1||(l(0,P--,P),rt(P))},z=()=>{P>=f.numPages||(l(0,P++,P),rt(P))},X=()=>{T<=maxScale&&(l(1,T=T+.1),rt(P))},at=()=>{T>=minScale&&(l(1,T=T-.1),rt(P))},ct=it=>{onPrint(it)},N=()=>{p=p+90,rt(P)},u=()=>{p=p-90,rt(P)},o=()=>{E()},E=async()=>{pdfExports.getDocument({...n&&{url:n},...g&&{data:g},...q&&{password:q}}).promise.then(async function(mt){if(f=mt,l(13,S=!1),await tick(),w.length&&l(8,m.textContent=f.numPages,m),l(2,v=f.numPages),w.length)for(let bt=1;bt<=v;bt++)getPageText(bt,f).then(function(St){i=i.concat(St),l(9,a=calcRT(i))});l(30,ht=!0)}).catch(function(mt){l(13,S=!0),l(14,G=mt.message)})};E();const R=()=>{l(10,e=!e),e===!1&&(clearInterval(s),clearInterval(b)),e===!0&&P<=v&&(b=setInterval(()=>{l(11,k=k-1)},1e3),s=setInterval(()=>{l(11,k=D),z()},D*1e3))},O=it=>{let mt=I||it.substring(it.lastIndexOf("/")+1);FileSaver.saveAs(it,mt)};onDestroy(()=>{clearInterval(s),clearInterval(b)});let B,W;function Y(){l(15,B=window_1.innerWidth),l(16,W=window_1.innerHeight)}function Q(){q=this.value,l(12,q)}const J=()=>K(),st=()=>z(),Z=()=>X(),d=()=>at(),_=()=>ct(n),x=()=>u(),j=()=>N(),F=()=>O(n),$=()=>R();function ot(it){binding_callbacks[it?"unshift":"push"](()=>{A=it,l(7,A)})}function dt(it){binding_callbacks[it?"unshift":"push"](()=>{m=it,l(8,m)})}function ft(it){binding_callbacks[it?"unshift":"push"](()=>{y=it,l(6,y)})}function et(it){binding_callbacks[it?"unshift":"push"](()=>{y=it,l(6,y)})}const _t=()=>window.scrollTo(0,0);return L.$$set=it=>{"url"in it&&l(3,n=it.url),"data"in it&&l(27,g=it.data),"scale"in it&&l(1,T=it.scale),"pageNum"in it&&l(0,P=it.pageNum),"flipTime"in it&&l(28,D=it.flipTime),"showButtons"in it&&l(4,w=it.showButtons),"showBorder"in it&&l(5,h=it.showBorder),"totalPage"in it&&l(2,v=it.totalPage),"downloadFileName"in it&&l(29,I=it.downloadFileName)},L.$$.update=()=>{L.$$.dirty[0]&1073741825&&ht&&rt(P)},[P,T,v,n,w,h,y,A,m,a,e,k,q,S,G,B,W,K,z,X,at,ct,N,u,o,R,O,g,D,I,ht,Y,Q,J,st,Z,d,_,x,j,F,$,ot,dt,ft,et,_t]}class PdfViewer extends SvelteComponent{constructor(t){super(),init(this,t,instance,create_fragment,safe_not_equal,{url:3,data:27,scale:1,pageNum:0,flipTime:28,showButtons:4,showBorder:5,totalPage:2,downloadFileName:29},null,[-1,-1])}}const PdfViewer$1=PdfViewer;export{PdfViewer$1 as default};
